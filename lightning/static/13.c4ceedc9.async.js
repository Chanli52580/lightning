(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Iw0d:function(e,t,a){"use strict";a.r(t);var n=a("qIgq"),r=a.n(n),l=a("q1tI"),o=a.n(l),i=(a("Q9mQ"),a("diRs")),s=(a("Pwec"),a("CtXQ")),c=a("gWZ8"),p=a.n(c),u=a("2Taf"),d=a.n(u),m=a("vZ4D"),f=a.n(m),h=a("MhPg"),v=a.n(h),y=a("l4Ni"),g=a.n(y),k=a("ujKo"),b=a.n(k),w=a("Nz1C"),M=a.n(w),E=a("7DBZ"),S=a("17x9"),P=a.n(S),j=a("AAgL"),q=a("8hbc"),x=a("k+V/"),A=a.n(x);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return g()(this,a)}}var O=function(e){v()(a,e);var t=F(a);function a(){var e;d()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={showModal:!1,tempValue:void 0,mapMaker:[]},e.myProps=[],e.handleSelect=function(t){var a=t.poi,n=a.district,r=a.address,l=a.name,o=a.adcode,i=a.location,s=i.lng,c=i.lat;window.AMap.plugin("AMap.PlaceSearch",function(){(new window.AMap.PlaceSearch).search(n+r+l,function(t,a){var i=[];a.poiList.pois.map(function(e){return i.push({position:{longitude:e.location.lng,latitude:e.location.lat},title:e.name,data:[{name:"主营业务",value:e.type},{name:"地址",value:"".concat(e.address,"-").concat(e.name)}],classType:"mapMaker"}),null}),e.setState({mapMaker:i,tempValue:{adcode:o,address:n+r+l,latitude:c,longitude:s}})})})},e}return f()(a,[{key:"render",value:function(){var e=this.state,t=e.tempValue,a=e.mapMaker,n=this.props,r=n.data,l=n.display,c=n.latField,u=n.lngField,d=n.model,m=n.amapkey,f=[];r.forEach(function(e){var t,a=[];l.forEach(function(t){var n;a.push({name:null===(n=Object(q.t)(d,t))||void 0===n?void 0:n.displayName,value:_.get(e,t)})}),_.get(e,u)&&_.get(e,c)&&f.push({position:{longitude:_.get(e,u),latitude:_.get(e,c)},title:_.get(e,null===(t=Object(q.s)(d))||void 0===t?void 0:t.titleField),data:a,classType:"map"})});var h={mapMaker:A.a.mapMarkers,map:A.a.map};return o.a.createElement(E.Map,{useAMapUI:!0,options:{},zoom:t&&20,amapkey:m,center:t},o.a.createElement(E.Markers,{markers:[].concat(p()(a),f),render:function(e){return o.a.createElement("div",null,o.a.createElement(i.a,{title:e.title,content:e.data.map(function(e){return e.value&&o.a.createElement("p",null,e.name,":",e.value)})},o.a.createElement(s.a,{className:h[e.classType],style:{fontSize:28},type:"environment",theme:"filled"})))}}),o.a.createElement(M.a,{options:{},onSelect:this.handleSelect,placeholder:"搜索",style:{transform:"translateY(-200%)",marginLeft:8}}))}}]),a}(j.a);O.propTypes={value:P.a.array},O.defaultProps={value:[]};var R=a("HP82"),I=["address.address","type","name"],T="address.latitude",V="address.longitude",D=[];T.split(".").length>1&&D.push(T.split(".")[0]),V.split(".").length>1&&D.push(V.split(".")[0]),I.forEach(function(e){var t=e.split(".");t.length>1&&D.push(t[0])});var N=_.uniq(D);function z(e){var t=Object(q.I)("amap_key"),a=e.match.params.model,n=Object(l.useState)([]),i=r()(n,2),s=i[0],c=i[1];return Object(l.useEffect)(function(){Object(R.queryContent)({model:a,expandFields:_.uniq(N)}).then(function(e){var t=e.list;c(t)});var e=document.querySelector(".antd-pro-layouts-basic-layout-content");return e&&(e.style.position="relative"),function(){e.style.position=null}},[]),o.a.createElement("div",{style:{margin:-24,position:"absolute",left:0,right:0,top:0,bottom:0,boxShadow:"0 1px 4px rgba(0, 21, 41, 0.08)"}},o.a.createElement(O,{data:s,amapkey:t,latField:T,lngField:V,display:I,model:a}))}a.d(t,"default",function(){return z})},"k+V/":function(e,t,a){e.exports={mapMarkers:"antd-pro-bsm-components-display-map-markers-map-mapMarkers",map:"antd-pro-bsm-components-display-map-markers-map-map"}}}]);