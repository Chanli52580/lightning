(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[46],{"5WY0":function(e,a,t){e.exports={main:"antd-pro-pages-user-register-main",getCaptcha:"antd-pro-pages-user-register-getCaptcha",submit:"antd-pro-pages-user-register-submit",login:"antd-pro-pages-user-register-login",error:"antd-pro-pages-user-register-error",success:"antd-pro-pages-user-register-success",warning:"antd-pro-pages-user-register-warning","progress-pass":"antd-pro-pages-user-register-progress-pass",progress:"antd-pro-pages-user-register-progress"}},cq3J:function(e,a,t){"use strict";t.r(a);t("FtyQ");var r,s,n,i=t("WvG8"),o=(t("Ti7s"),t("t/Nd")),l=(t("8keV"),t("IhqU")),c=(t("XIdb"),t("czoS")),d=(t("pmSv"),t("Qo9K")),p=t("sXdV"),m=t.n(p),u=(t("qms0"),t("vZs3")),g=t("q847"),f=t.n(g),h=t("dLrW"),v=t.n(h),b=t("cjXc"),w=t.n(b),E=t("3m6/"),M=t.n(E),y=t("CIpT"),O=t.n(y),j=t("QetK"),k=t.n(j),S=(t("2zJo"),t("EpZc")),F=(t("2eh7"),t("T37F")),q=(t("HqD5"),t("4sAw")),x=t("qE61"),N=t.n(x),P=t("kHhk"),C=t("Se3J"),V=t.n(C),z=t("upLx"),D=t("Hegt"),I=t.n(D),J=t("HP82"),R=(t("OLo9"),t("5WY0")),T=t.n(R);function W(e){var a=G();return function(){var t,r=k()(e);if(a){var s=k()(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return O()(this,t)}}function G(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var H=q["a"].Item,L=F["a"].Option,Q=S["a"].Group,X={ok:N.a.createElement("div",{className:T.a.success},N.a.createElement(P["FormattedMessage"],{id:"validation.password.strength.strong"})),pass:N.a.createElement("div",{className:T.a.warning},N.a.createElement(P["FormattedMessage"],{id:"validation.password.strength.medium"})),poor:N.a.createElement("div",{className:T.a.error},N.a.createElement(P["FormattedMessage"],{id:"validation.password.strength.short"}))},A={ok:"success",pass:"normal",poor:"exception"},B=(r=q["a"].create(),r((n=function(e){M()(t,e);var a=W(t);function t(){var e;v()(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return e=a.call.apply(a,[this].concat(s)),e.state={count:0,confirmDirty:!1,visible:!1,help:"",prefix:"86",sliderValidation:!1},e.onGetCaptcha=f()(m.a.mark(function a(){var t,r,s,n,i,o;return m.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.props.form,r=t.getFieldValue("mobile"),s=59,e.setState({count:s}),e.interval=setInterval(function(){s-=1,e.setState({count:s}),0===s&&clearInterval(e.interval)},1e3),!r){a.next=17;break}return a.next=8,Object(J["N"])(r);case 8:if(n=a.sent,i=n.error_code,o=n.error_message,"0"===i){a.next=14;break}return u["a"].info({title:o}),a.abrupt("return");case 14:u["a"].info({title:Object(P["formatMessage"])({id:"app.login.verification-code-warning"})}),a.next=18;break;case 17:u["a"].info({title:Object(P["formatMessage"])({id:"app.login.verification-code-err"})});case 18:case"end":return a.stop()}},a)})),e.getPasswordStatus=function(){var a=e.props.form,t=a.getFieldValue("password");return t&&t.length>9?"ok":t&&t.length>5?"pass":"poor"},e.handleSubmit=function(a){a.preventDefault();var t=e.props.form,r=t.getFieldsValue(["mobile","username","password","code"]);t.validateFields({force:!0},function(e){e?u["a"].info({title:Object(P["formatMessage"])({id:"app.login.err"})}):r&&(Object(J["B"])(r),u["a"].info({title:Object(P["formatMessage"])({id:"app.register-result.msg"})}),z["router"].push("/user/login"))})},e.handleConfirmBlur=function(a){var t=a.target.value,r=e.state.confirmDirty;e.setState({confirmDirty:r||!!t})},e.checkConfirm=function(a,t,r){var s=e.props.form;t&&t!==s.getFieldValue("password")?r(Object(P["formatMessage"])({id:"validation.password.twice"})):r()},e.checkPassword=function(a,t,r){var s=e.state,n=s.visible,i=s.confirmDirty;if(t)if(e.setState({help:""}),n||e.setState({visible:!!t}),t.length<6)r("error");else{var o=e.props.form;t&&i&&o.validateFields(["confirm"],{force:!0}),r()}else e.setState({help:Object(P["formatMessage"])({id:"validation.password.required"}),visible:!!t}),r("error")},e.changePrefix=function(a){e.setState({prefix:a})},e.renderPasswordProgress=function(){var a=e.props.form,t=a.getFieldValue("password"),r=e.getPasswordStatus();return t&&t.length?N.a.createElement("div",{className:T.a["progress-".concat(r)]},N.a.createElement(d["a"],{status:A[r],className:T.a.progress,strokeWidth:6,percent:10*t.length>100?100:10*t.length,showInfo:!1})):null},e}return w()(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.form,r=a.submitting,s=t.getFieldDecorator,n=this.state,d=n.count,p=n.prefix,m=n.help,u=n.visible,g=n.sliderValidation;return N.a.createElement("div",{className:T.a.main},N.a.createElement("h1",null,N.a.createElement(P["FormattedMessage"],{id:"app.register.register"})),N.a.createElement(q["a"],{onSubmit:this.handleSubmit},N.a.createElement(H,{label:Object(P["formatMessage"])({id:"app.login.userName"})},s("username",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.userName.required"})}]})(N.a.createElement(S["a"],{placeholder:Object(P["formatMessage"])({id:"validation.userName.required"})}))),N.a.createElement(H,{help:m,label:Object(P["formatMessage"])({id:"app.login.password"})},N.a.createElement(c["a"],{getPopupContainer:function(e){return e.parentNode},content:N.a.createElement("div",{style:{padding:"4px 0"}},X[this.getPasswordStatus()],this.renderPasswordProgress(),N.a.createElement("div",{style:{marginTop:10}},N.a.createElement(P["FormattedMessage"],{id:"validation.password.strength.msg"}))),overlayStyle:{width:240},placement:"right",visible:u},s("password",{rules:[{validator:this.checkPassword}]})(N.a.createElement(S["a"],{size:"large",type:"password",placeholder:Object(P["formatMessage"])({id:"form.password.placeholder"})})))),N.a.createElement(H,{label:Object(P["formatMessage"])({id:"app.login.confirm.password"})},s("confirm",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.confirm-password.required"})},{validator:this.checkConfirm}]})(N.a.createElement(S["a"],{size:"large",type:"password",placeholder:Object(P["formatMessage"])({id:"form.confirm-password.placeholder"})}))),N.a.createElement(H,null,N.a.createElement(I.a,{width:385,success:function(){e.setState({sliderValidation:!0})}})),g&&N.a.createElement(N.a.Fragment,null,N.a.createElement(H,null,N.a.createElement(Q,{compact:!0},N.a.createElement(F["a"],{size:"large",value:p,onChange:this.changePrefix,style:{width:"20%"}},N.a.createElement(L,{value:"86"},"+86"),N.a.createElement(L,{value:"87"},"+87")),s("mobile",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.phone-number.required"})},{pattern:/^\d{11}$/,message:Object(P["formatMessage"])({id:"validation.phone-number.wrong-format"})}]})(N.a.createElement(S["a"],{size:"large",style:{width:"80%"},placeholder:Object(P["formatMessage"])({id:"form.phone-number.placeholder"})})))),N.a.createElement(H,null,N.a.createElement(i["a"],{gutter:8},N.a.createElement(l["a"],{span:16},s("code",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.verification-code.required"})}]})(N.a.createElement(S["a"],{size:"large",placeholder:Object(P["formatMessage"])({id:"form.verification-code.placeholder"})}))),N.a.createElement(l["a"],{span:8},N.a.createElement(o["a"],{size:"large",disabled:d,className:T.a.getCaptcha,onClick:this.onGetCaptcha},d?"".concat(d," s"):Object(P["formatMessage"])({id:"app.register.get-verification-code"})))))),N.a.createElement(H,null,N.a.createElement(o["a"],{size:"large",loading:r,className:T.a.submit,type:"primary",htmlType:"submit",disabled:!g},N.a.createElement(P["FormattedMessage"],{id:"app.register.register"})),N.a.createElement(V.a,{className:T.a.login,to:"/User/Login"},N.a.createElement(P["FormattedMessage"],{id:"app.register.sign-in"})))))}}]),t}(x["Component"]),s=n))||s);a["default"]=B}}]);