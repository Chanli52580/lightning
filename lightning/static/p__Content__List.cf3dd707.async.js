(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"2Rbm":function(t,e,n){"use strict";n.r(e);var r,a,i=n("dLrW"),o=n.n(i),s=n("cjXc"),l=n.n(s),c=n("3m6/"),p=n.n(c),m=n("CIpT"),d=n.n(m),u=n("QetK"),f=n.n(u),h=n("qE61"),y=n.n(h),v=n("s98/"),g=n.n(v),A=n("AxL8"),b=n.n(A),E=(n("DAWX"),n("USTd")),k=n("zQXf"),I=n("PAW5"),S=n.n(I),R=n("zHco"),C=n("sMR+"),D=n("wOmh"),w=n("C2ml"),T=n("8hbc");function x(t){var e=O();return function(){var n,r=f()(t);if(e){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var j,P=(r=Object(k["connect"])(function(t){var e=t.content,n=e.schemas,r=e.adminConfig,a=e.data,i=t.loading,o=t.user.currentUser;return{schemas:n,adminConfig:r,data:a,loading:i.effects["content/fetch"]||i.effects["content/fetchAll"],currentUser:o}}),g()(a=r(a=function(t){p()(n,t);var e=x(n);function n(){return o()(this,n),e.apply(this,arguments)}return l()(n,[{key:"componentDidMount",value:function(){var t=this.filters,e=this.props,n=e.dispatch,r=e.match.params.model,a=e.schemas,i=e.adminConfig;_.isEmpty(a)||_.isEmpty(i)||(this.displayInTree?n({type:"content/fetchAll",payload:{model:r,filters:t}}):n({type:"content/fetch",payload:{model:r,filters:t}}),n({type:"content/statistics",payload:{model:r,filters:t}}))}},{key:"componentWillReceiveProps",value:function(t){var e=this.filters,n=this.props,r=n.dispatch,a=n.match.params.model,i=n.adminConfig,o=t.match.params.model;a!==o&&((i[o]||{}).displayInTree?r({type:"content/fetchAll",payload:{model:o,filters:e}}):r({type:"content/fetch",payload:{model:o,filters:e}}),r({type:"content/statistics",payload:{model:o,filters:e}}))}},{key:"componentDidUpdate",value:function(t){var e=this.filters,n=t.schemas,r=t.adminConfig,a=this.props,i=a.schemas,o=a.adminConfig,s=a.dispatch,l=a.match.params.model;!_.isEmpty(n)&&!_.isEmpty(r)||_.isEmpty(i)||_.isEmpty(o)||(this.displayInTree?s({type:"content/fetchAll",payload:{model:l,filters:e}}):s({type:"content/fetch",payload:{model:l,filters:e}}),s({type:"content/statistics",payload:{model:l,filters:e}}))}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.schemas,r=t.loading,a=t.match.params.model,i=e[a]?e[a]:{list:[],pagination:{}};i.pagination&&(i.pagination.showTotal=function(t){return"\u5171".concat(t,"\u6761\u6570\u636e")});var o=this.modelAdmin,s=o.display,l=void 0===s?[Object(T["A"])(a)]:s,c=o.editable,p=o.modalForm,m=void 0===p||p,d=o.actions,u=o.listStyle,f=o.exportable,h=o.sortable,v=o.tableActions,g=o.sortKey,A=o.modalDetail,b=o.inlineActions,k=o.maxInlineActions,I=n[a]?n[a].displayName:"",S=Object(C["a"])(a);return y.a.createElement(R["a"],{title:"".concat(I,"\u5217\u8868"),key:I},y.a.createElement(w["a"],null,I),y.a.createElement(E["a"],null,this.permissions&&y.a.createElement(y.a.Fragment,null,this.permissions.includes("view")?y.a.createElement(S,{tableActions:v,data:i,loading:r,model:a,display:l,editable:c||[],inlineActions:b,maxInlineActions:k,modalForm:m,actions:d,listStyle:u,displayInTree:this.displayInTree,displayInSort:this.displayInSort,sortKey:g,exportable:f,sortable:h,modalDetail:A}):y.a.createElement(D["default"],null))))}},{key:"filters",get:function(){var t=this,e=this.props,n=e.location.query,r=e.schemas,a=[];if(_.isEmpty(r))return a;for(var i=function(){var e=s[o];l=b()(e,2);var n=l[0],r=l[1],i=t.modelSchema.fields.find(function(t){return t.name===n});if("datetime"===i.type){var c="YYYY/MM/DD",p=r.split(","),m=b()(p,2),d=m[0],u=m[1];a.push({field:n,value:[S()(d,c).toISOString(),S()(u,c).toISOString()],operator:"between"})}else a.push({field:n,value:r,operator:"="})},o=0,s=Object.entries(n);o<s.length;o++){var l;i()}return a}},{key:"model",get:function(){var t=this.props.match.params.model;return t}},{key:"modelAdmin",get:function(){var t=this.props.adminConfig;return t[this.model]||{}}},{key:"modelSchema",get:function(){var t=this.props,e=t.match.params.model,n=t.schemas;return n[e]}},{key:"displayInTree",get:function(){return!0===this.modelAdmin.displayInTree}},{key:"displayInSort",get:function(){return!0===this.modelAdmin.displayInSort}},{key:"permissions",get:function(){var t=this.props,e=t.currentUser.permissions,n=t.match.params.model;return!!e&&e.filter(function(t){return t.endsWith(n)}).map(function(t){return t.split("_")[0]})}}]),n}(h["PureComponent"]))||a)||a),U=P,W=n("7gdK");function F(t){var e=K();return function(){var n,r=f()(t);if(e){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}function K(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var M=g()(j=function(t){p()(n,t);var e=F(n);function n(){return o()(this,n),e.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var t=this.props.match.params.model;return y.a.createElement(y.a.Fragment,null,y.a.createElement(U,this.props),y.a.createElement(W["a"],{key:t,model:t}))}}]),n}(h["Component"]))||j,Y=M;e["default"]=Y}}]);