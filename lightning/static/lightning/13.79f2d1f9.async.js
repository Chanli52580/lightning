(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{NeHv:function(e,t,a){e.exports={main:"antd-pro-bsm-user-register-main",getCaptcha:"antd-pro-bsm-user-register-getCaptcha",submit:"antd-pro-bsm-user-register-submit",login:"antd-pro-bsm-user-register-login",error:"antd-pro-bsm-user-register-error",success:"antd-pro-bsm-user-register-success",warning:"antd-pro-bsm-user-register-warning","progress-pass":"antd-pro-bsm-user-register-progress-pass",progress:"antd-pro-bsm-user-register-progress"}},uNUk:function(e,t,a){"use strict";var r=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("e+1C");var l=r(a("Nd5c"));a("eNCU");var i=r(a("pjJH"));a("ER8q");var n=r(a("Ai5L"));a("GJOS");var o=r(a("b+i2"));a("XmnF");var d=r(a("kCqd")),u=r(a("d6i3"));a("52nx");var f=r(a("7bDm")),c=r(a("1l/V")),m=r(a("2Taf")),p=r(a("vZ4D")),g=r(a("MhPg")),v=r(a("l4Ni")),h=r(a("ujKo"));a("4X2C");var w=r(a("xvon"));a("yavW");var b=r(a("WuMn"));a("vmZS");var E=r(a("NjVP")),M=s(a("q1tI")),y=a("Y2fQ"),N=r(a("wY1l")),k=a("ArA+"),S=r(a("gCt9")),C=a("mmaM"),F=a("X5j4");a("7qOG");var x,P,q,D=r(a("NeHv"));function V(e){var t=z();return function(){var a,r=(0,h.default)(e);if(t){var s=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var R=E.default.Item,j=b.default.Option,A=w.default.Group,G={ok:M.default.createElement("div",{className:D.default.success},M.default.createElement(y.FormattedMessage,{id:"validation.password.strength.strong"})),pass:M.default.createElement("div",{className:D.default.warning},M.default.createElement(y.FormattedMessage,{id:"validation.password.strength.medium"})),poor:M.default.createElement("div",{className:D.default.error},M.default.createElement(y.FormattedMessage,{id:"validation.password.strength.short"}))},I={ok:"success",pass:"normal",poor:"exception"},J=(x=E.default.create(),x((q=function(e){(0,g.default)(a,e);var t=V(a);function a(){var e;(0,m.default)(this,a);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s)),e.state={count:0,confirmDirty:!1,visible:!1,help:"",prefix:"86",sliderValidation:!1},e.onGetCaptcha=(0,c.default)(u.default.mark(function t(){var a,r,s,l,i,n;return u.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.props.form,r=a.getFieldValue("mobile"),s=59,e.setState({count:s}),e.interval=setInterval(function(){s-=1,e.setState({count:s}),0===s&&clearInterval(e.interval)},1e3),!r){t.next=17;break}return t.next=8,(0,C.verify)(r);case 8:if(l=t.sent,i=l.error_code,n=l.error_message,"0"===i){t.next=14;break}return f.default.info({title:n}),t.abrupt("return");case 14:f.default.info({title:(0,F.formatMessage)({id:"app.login.verification-code-warning"})}),t.next=18;break;case 17:f.default.info({title:(0,F.formatMessage)({id:"app.login.verification-code-err"})});case 18:case"end":return t.stop()}},t)})),e.getPasswordStatus=function(){var t=e.props.form,a=t.getFieldValue("password");return a&&a.length>9?"ok":a&&a.length>5?"pass":"poor"},e.handleSubmit=function(t){t.preventDefault();var a=e.props.form,r=_.omit(a.getFieldsValue(),["confirm"]);a.validateFields({force:!0},function(e){e?f.default.info({title:(0,F.formatMessage)({id:"app.login.err"})}):r&&((0,C.register)(r),f.default.info({title:(0,F.formatMessage)({id:"app.register-result.msg"})}),k.router.push("/user/login"))})},e.handleConfirmBlur=function(t){var a=t.target.value,r=e.state.confirmDirty;e.setState({confirmDirty:r||!!a})},e.checkConfirm=function(t,a,r){var s=e.props.form;a&&a!==s.getFieldValue("password")?r((0,F.formatMessage)({id:"validation.password.twice"})):r()},e.checkPassword=function(t,a,r){var s=e.state,l=s.visible,i=s.confirmDirty;if(a)if(e.setState({help:""}),l||e.setState({visible:!!a}),a.length<6)r("error");else{var n=e.props.form;a&&i&&n.validateFields(["confirm"],{force:!0}),r()}else e.setState({help:(0,F.formatMessage)({id:"validation.password.required"}),visible:!!a}),r("error")},e.changePrefix=function(t){e.setState({prefix:t})},e.renderPasswordProgress=function(){var t=e.props.form,a=t.getFieldValue("password"),r=e.getPasswordStatus();return a&&a.length?M.default.createElement("div",{className:D.default["progress-".concat(r)]},M.default.createElement(d.default,{status:I[r],className:D.default.progress,strokeWidth:6,percent:10*a.length>100?100:10*a.length,showInfo:!1})):null},e}return(0,p.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.form,r=t.submitting,s=a.getFieldDecorator,d=this.state,u=d.count,f=d.prefix,c=d.help,m=d.visible,p=d.sliderValidation;return M.default.createElement("div",{className:D.default.main},M.default.createElement("h1",null,M.default.createElement(y.FormattedMessage,{id:"app.register.register"})),M.default.createElement(E.default,{onSubmit:this.handleSubmit},M.default.createElement(R,{label:(0,F.formatMessage)({id:"app.login.userName"})},s("username",{rules:[{required:!0,message:(0,F.formatMessage)({id:"validation.userName.required"})}]})(M.default.createElement(w.default,{placeholder:(0,F.formatMessage)({id:"validation.userName.required"})}))),M.default.createElement(R,{help:c,label:(0,F.formatMessage)({id:"app.login.password"})},M.default.createElement(o.default,{getPopupContainer:function(e){return e.parentNode},content:M.default.createElement("div",{style:{padding:"4px 0"}},G[this.getPasswordStatus()],this.renderPasswordProgress(),M.default.createElement("div",{style:{marginTop:10}},M.default.createElement(y.FormattedMessage,{id:"validation.password.strength.msg"}))),overlayStyle:{width:240},placement:"right",visible:m},s("password",{rules:[{validator:this.checkPassword}]})(M.default.createElement(w.default,{size:"large",type:"password",placeholder:(0,F.formatMessage)({id:"form.password.placeholder"})})))),M.default.createElement(R,{label:(0,F.formatMessage)({id:"app.login.confirm.password"})},s("confirm",{rules:[{required:!0,message:(0,F.formatMessage)({id:"validation.confirm-password.required"})},{validator:this.checkConfirm}]})(M.default.createElement(w.default,{size:"large",type:"password",placeholder:(0,F.formatMessage)({id:"form.confirm-password.placeholder"})}))),M.default.createElement(R,null,M.default.createElement(S.default,{width:385,success:function(){e.setState({sliderValidation:!0})}})),p&&M.default.createElement(M.default.Fragment,null,M.default.createElement(R,null,M.default.createElement(A,{compact:!0},M.default.createElement(b.default,{size:"large",value:f,onChange:this.changePrefix,style:{width:"20%"}},M.default.createElement(j,{value:"86"},"+86"),M.default.createElement(j,{value:"87"},"+87")),s("mobile",{rules:[{required:!0,message:(0,F.formatMessage)({id:"validation.phone-number.required"})},{pattern:/^\d{11}$/,message:(0,F.formatMessage)({id:"validation.phone-number.wrong-format"})}]})(M.default.createElement(w.default,{size:"large",style:{width:"80%"},placeholder:(0,F.formatMessage)({id:"form.phone-number.placeholder"})})))),M.default.createElement(R,null,M.default.createElement(l.default,{gutter:8},M.default.createElement(n.default,{span:16},s("code",{rules:[{required:!0,message:(0,F.formatMessage)({id:"validation.verification-code.required"})}]})(M.default.createElement(w.default,{size:"large",placeholder:(0,F.formatMessage)({id:"form.verification-code.placeholder"})}))),M.default.createElement(n.default,{span:8},M.default.createElement(i.default,{size:"large",disabled:u,className:D.default.getCaptcha,onClick:this.onGetCaptcha},u?"".concat(u," s"):(0,F.formatMessage)({id:"app.register.get-verification-code"})))))),M.default.createElement(R,null,M.default.createElement(i.default,{size:"large",loading:r,className:D.default.submit,type:"primary",htmlType:"submit",disabled:!p},M.default.createElement(y.FormattedMessage,{id:"app.register.register"})),M.default.createElement(N.default,{className:D.default.login,to:"/User/Login"},M.default.createElement(y.FormattedMessage,{id:"app.register.sign-in"})))))}}]),a}(M.Component),P=q))||P),O=J;t.default=O}}]);