(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{Ho1b:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("GJOS");var n=l(a("b+i2"));a("eE3J");var r=l(a("GSZB")),i=l(a("gWZ8")),o=l(a("2Taf")),u=l(a("vZ4D")),d=l(a("MhPg")),s=l(a("l4Ni")),p=l(a("ujKo")),c=l(a("q1tI")),f=l(a("Nz1C")),m=a("7DBZ"),v=l(a("17x9")),y=l(a("AAgL")),h=a("jfUH"),g=l(a("k+V/"));function M(e){var t=k();return function(){var a,l=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(l,arguments,n)}else a=l.apply(this,arguments);return(0,s.default)(this,a)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var b=function(e){(0,d.default)(a,e);var t=M(a);function a(){var e;(0,o.default)(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n)),e.state={showModal:!1,tempValue:void 0,mapMaker:[]},e.myProps=[],e.handleSelect=function(t){var a=t.poi,l=a.district,n=a.address,r=a.name,i=a.adcode,o=a.location,u=o.lng,d=o.lat;window.AMap.plugin("AMap.PlaceSearch",function(){var t=new window.AMap.PlaceSearch;t.search(l+n+r,function(t,a){var o=[];a.poiList.pois.map(function(e){return o.push({position:{longitude:e.location.lng,latitude:e.location.lat},title:e.name,data:[{name:"\u4e3b\u8425\u4e1a\u52a1",value:e.type},{name:"\u5730\u5740",value:"".concat(e.address,"-").concat(e.name)}],classType:"mapMaker"}),null}),e.setState({mapMaker:o,tempValue:{adcode:i,address:l+n+r,latitude:d,longitude:u}})})})},e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.state,t=e.tempValue,a=e.mapMaker,l=this.props,o=l.data,u=l.display,d=l.latField,s=l.lngField,p=l.model,v=l.amapkey,y=[];o.forEach(function(e){var t,a=[];u.forEach(function(t){var l;a.push({name:null===(l=(0,h.getSchemaField)(p,t))||void 0===l?void 0:l.displayName,value:_.get(e,t)})}),_.get(e,s)&&_.get(e,d)&&y.push({position:{longitude:_.get(e,s),latitude:_.get(e,d)},title:_.get(e,null===(t=(0,h.getSchema)(p))||void 0===t?void 0:t.titleField),data:a,classType:"map"})});var M={mapMaker:g.default.mapMarkers,map:g.default.map};return c.default.createElement(m.Map,{useAMapUI:!0,options:{},zoom:t&&20,amapkey:v,center:t},c.default.createElement(m.Markers,{markers:[].concat((0,i.default)(a),y),render:function(e){return c.default.createElement("div",null,c.default.createElement(n.default,{title:e.title,content:e.data.map(function(e){return e.value&&c.default.createElement("p",null,e.name,":",e.value)})},c.default.createElement(r.default,{className:M[e.classType],style:{fontSize:28},type:"environment",theme:"filled"})))}}),c.default.createElement(f.default,{options:{},onSelect:this.handleSelect,placeholder:"\u641c\u7d22",style:{transform:"translateY(-200%)",marginLeft:8}}))}}]),a}(y.default);t.default=b,b.propTypes={value:v.default.array},b.defaultProps={value:[]}},Iw0d:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var r=n(a("qIgq")),i=l(a("q1tI")),o=n(a("Ho1b")),u=a("mmaM"),d=a("VM7V"),s=a("jfUH");function p(e){var t=(0,s.useBSMSetting)("amap_key"),a=e.match.params.model,l=(0,i.useState)([]),n=(0,r.default)(l,2),p=n[0],c=n[1];return(0,i.useEffect)(function(){(0,u.queryContent)({model:a,expandFields:_.uniq(d.expandFields)}).then(function(e){var t=e.list;c(t)});var e=document.querySelector(".antd-pro-layouts-basic-layout-content");return e&&(e.style.position="relative"),function(){e.style.position=null}},[]),i.default.createElement("div",{style:{margin:-24,position:"absolute",left:0,right:0,top:0,bottom:0,boxShadow:"0 1px 4px rgba(0, 21, 41, 0.08)"}},i.default.createElement(o.default,{data:p,amapkey:t,latField:d.latField,lngField:d.lngField,display:d.display,model:a}))}},VM7V:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expandFields=t.lngField=t.latField=t.display=void 0;var l=["address.address","type","name"];t.display=l;var n="address.latitude";t.latField=n;var r="address.longitude";t.lngField=r;var i=[];n.split(".").length>1&&i.push(n.split(".")[0]),r.split(".").length>1&&i.push(r.split(".")[0]),l.forEach(function(e){var t=e.split(".");t.length>1&&i.push(t[0])});var o=_.uniq(i);t.expandFields=o},"k+V/":function(e,t,a){e.exports={mapMarkers:"antd-pro-bsm-components-display-map-markers-map-mapMarkers",map:"antd-pro-bsm-components-display-map-markers-map-map"}}}]);