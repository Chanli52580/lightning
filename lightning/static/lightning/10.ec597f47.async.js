(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"+dfd":function(e,t,n){"use strict";var a=n("g09b"),l=n("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("eHn4")),u=a(n("p0pE"));n("4csm");var i=a(n("2Fwu"));n("eE3J");var o=a(n("GSZB"));n("9kbU");var f=a(n("vbHR"));n("SePM");var c=a(n("PMX6"));n("Ahcs");var d=a(n("k0dM"));n("Dvpn");var s=a(n("myml"));n("eNCU");var m=a(n("pjJH"));n("QjdF");var p=a(n("U4Vl"));n("6dnR");var v=a(n("CQJL"));n("yavW");var h=a(n("WuMn"));n("vmZS");var g=a(n("NjVP"));n("4X2C");var y,E,b=a(n("xvon")),C=a(n("gWZ8")),S=a(n("qIgq")),w=l(n("q1tI")),O=a(n("RsOY")),x=a(n("rfrl")),D=n("jfUH"),N=a(n("O/S9")),I=n("mmaM"),A=a(n("umGZ")),k=a(n("U/ol")),F=n("VW+w"),P=l(n("cPjh")),j=a(n("MU2A")),M=n("MxUj"),R=n("wiuW"),V={group:"\u5206\u7ec4"};function T(e){return e&&(null===e||void 0===e?void 0:e.map(function(e){return _.isString(e)?{name:e}:e}))}function z(e){var t,n=e.modelName,a=e.detailValue,l=e.schemas,r=e.useLayout,u=void 0!==r&&r,i=e.style,o=void 0===i?"group":i,f=e.bsmSetting.staff_model,c=[],d=[];a&&(c=null!==(t=(_.cloneDeep(a.sections)||[]).map(function(e){var t=e;return t.fields=T(t.fields),t}))&&void 0!==t?t:[],d=T(_.cloneDeep(a.fields))||c.filter(function(e){return!_.isEmpty(e.fields)}).reduce(function(e,t){return e.concat(t.fields)},[]));var y=(0,w.useState)(c),E=(0,S.default)(y,2),O=E[0],P=E[1],j=(0,w.useState)(d),M=(0,S.default)(j,2),R=M[0],z=M[1],q=(0,w.useState)([]),W=(0,S.default)(q,2),L=W[0],U=W[1];function $(e,t){var n=_.cloneDeep(O);n[e].title=t,P(n)}function G(e,t){var n=_.cloneDeep(O);n[e].fields=t.map(function(e){return R.find(function(t){return t.name===e})}),P(n)}function Z(e,t){var n=_.cloneDeep(O);n[e].style||(n[e].style={}),n[e].style.widget=t,P(n)}function B(){P(c),z(d)}function Y(e){var t=_.cloneDeep(O);t.splice(e,1),P(t)}function J(){z([].concat((0,C.default)(R),[{}]))}function K(e){return{name:e}}function X(e){var t=_.cloneDeep(R);t.splice(e,1);var n=(_.cloneDeep(O)||[]).map(function(e){var n,a=e;a.fields&&(a.fields=null===(n=a.fields)||void 0===n?void 0:n.filter(function(e){return t.map(function(e){return e.name}).includes(e.name)}));return a});P(n),z(t)}function H(e,t,n){var a=_.cloneDeep(R);a[e][n]=t,z(a)}function Q(e){var t=_.cloneDeep(O),n=e-1,a=[t[e],t[n]];t[n]=a[0],t[e]=a[1],P(t)}function ee(e){var t=_.cloneDeep(O),n=e+1,a=[t[e],t[n]];t[n]=a[0],t[e]=a[1],P(t)}(0,w.useEffect)(function(){var e,t,a=[],r=[];if(f){var u=[];l[n].fields.forEach(function(e){e.ref===f&&u.push(e)}),U(u)}var i=null===(e=_.cloneDeep(R))||void 0===e?void 0:e.filter(function(e){return(0,D.getSchemaField)(n,e.name)});i.forEach(function(e,t){var l=e;l.showIf&&l.showIf.forEach(function(e,l){var u=e;if(_.isArray(u.value)){var i=(0,D.getSchemaField)(n,u.field),o=new Promise(function(e){(0,I.queryContent)({model:i.ref,filters:[{field:(0,D.pkField)(i.ref),operator:"in",value:u.value}]}).then(function(n){var r=n.list;a.push([t,l,r]),e()})});r.push(o)}})});var o=null===(t=_.cloneDeep(O))||void 0===t?void 0:t.map(function(e){var t=e;return t.fields&&(t.fields=t.fields.filter(function(e){return i.map(function(e){return e.name}).includes(e.name)})),t});Promise.all(r).then(function(){a.forEach(function(e){var t=(0,S.default)(e,3),n=t[0],a=t[1],l=t[2];i[n].showIf[a].value=l})}),z(i),P(o)},[]);var te=function(e,t){z((0,x.default)(R,function(n){t?n[e].alias=t:delete n[e].alias}))},ne={handleDisPlayName:te,handleFieldChange:H,deleteField:X,addField:J,reset:B,setFields:z,getField:K};function ae(e){var t,r;if(void 0===e)return null;var u=R[e];return w.default.createElement(g.default,{labelCol:{span:5},wrapperCol:{span:19}},w.default.createElement(g.default.Item,{label:"\u663e\u793a\u540d"},w.default.createElement(b.default,{allowClear:!0,value:u.alias,onChange:function(t){return te(e,t.target.value)},placeholder:u.name&&(0,F.displayPreprocess)([_.cloneDeep(u)],n,l)[0].alias})),w.default.createElement("div",{className:k.default.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),w.default.createElement(A.default,{groupsValue:null!==(t=null===(r=u.groups)||void 0===r?void 0:r.filter(function(e){return!("number"===typeof e)}))&&void 0!==t?t:[],groupsOnChange:function(t){var n=_.cloneDeep(R);n[e].groups=t,z((0,C.default)(n))},userValue:u.userField,userOnChange:function(t){var n=_.cloneDeep(R);n[e].userField=t,z((0,C.default)(n))},staffModelFields:L,staffModel:f,defauldGroupValue:a.fields[e]}),w.default.createElement(g.default.Item,{label:"\u6ee1\u8db3\u6761\u4ef6\u663e\u793a"},w.default.createElement(N.default,{fields:l[n].fields,onChange:function(t){return H(e,t,"showIf")},value:u.showIf,disabledField:function(e){return u.showIf.filter(function(e){return e.field}).map(function(e){return e.field}).includes(e.name)}})))}var le=u&&w.default.createElement(g.default,{layout:"inline"},"default"!==o&&w.default.createElement(w.default.Fragment,null,w.default.createElement(s.default,{style:{marginTop:24},size:"middle",bordered:!0,dataSource:O,pagination:!1,columns:[{title:"".concat(V[o],"\u540d\u79f0"),key:"title",render:function(e,t,n){return w.default.createElement(b.default,{value:e.title,onChange:function(e){return $(n,e.target.value)}})}},{title:"\u6240\u542b\u5b57\u6bb5",key:"fields",render:function(e,t,a){var r;return w.default.createElement(h.default,{mode:"multiple",value:null===(r=e.fields)||void 0===r?void 0:r.map(function(e){return e.name}),onChange:function(e){G(a,e)}},R.filter(function(e){return e.name}).map(function(t){var a;return w.default.createElement(h.default.Option,{value:t.name,key:t.name,disabled:O.map(function(e){var t;return null===(t=e.fields)||void 0===t?void 0:t.map(function(e){return e.name})}).flat().includes(t.name)&&!(e.fields||[]).map(function(e){return e.name}).includes(t.name)},null===(a=l[n].fields.find(function(e){return e.name===t.name}))||void 0===a?void 0:a.displayName)}))}},{title:"\u663e\u793a\u98ce\u683c",key:"style.widget",render:function(e,t,n){return w.default.createElement(v.default.Group,{value:e.style&&e.style.widget||"cell",onChange:function(e){return Z(n,e.target.value)}},w.default.createElement(v.default,{value:"cell"},"\u5217\u8868"),w.default.createElement(v.default,{value:"table"},"\u8868\u683c"))}},{title:"\u64cd\u4f5c",key:"option",render:function(e,t,n){return w.default.createElement(w.default.Fragment,null,w.default.createElement("a",{onClick:function(){return Y(n)}},"\u5220\u9664"),n>0&&w.default.createElement(w.default.Fragment,null,w.default.createElement(p.default,{type:"vertical"}),w.default.createElement("a",{onClick:function(){return Q(n)}},"\u4e0a\u79fb")),n<O.length-1&&w.default.createElement(w.default.Fragment,null,w.default.createElement(p.default,{type:"vertical"}),w.default.createElement("a",{onClick:function(){return ee(n)}},"\u4e0b\u79fb")))}}],footer:function(){return w.default.createElement(m.default,{onClick:function(){return P([].concat((0,C.default)(O),[{}]))}},"\u6dfb\u52a0",V[o])}})));return[ae,le,R,O,ne]}function q(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=e.bsmSetting,r="default";n[t].detail&&(r=n[t].detail.style||r);var u=(0,w.useState)(r),i=(0,S.default)(u,2),o=i[0],f=i[1],s=(0,w.useState)(String(0)),m=(0,S.default)(s,2),h=m[0],y=m[1],E=z({modelName:t,adminConfig:n,schemas:a,useLayout:!0,style:o,bsmSetting:l}),b=(0,S.default)(E,5),C=b[0],O=b[1],x=b[2],D=b[3],N=b[4],I=N.deleteField,A=N.addField,k=N.check,F=N.detailReset;function P(){F(),f(r)}function j(){A(),y(String(x.length))}var M={style:o,sections:"default"!==o&&D,fields:"default"===o&&x},R=w.default.createElement(d.default,{tabBarStyle:{minWidth:48},activeKey:h,tabPosition:"left",type:"editable-card",onChange:y,onEdit:function(e,t){var n={add:j,remove:function(){return I(e)}};n[t]()}},x.map(function(e,n){var l=a[t].fields.find(function(t){return t.name===e.name});return w.default.createElement(d.default.TabPane,{tab:(l||{}).displayName||"\u5b57\u6bb5".concat(n+1),key:n,closable:!l||!l.required||x.filter(function(t){return t.name===e.name}).length>=2},C(n))})),T=w.default.createElement(w.default.Fragment,null,w.default.createElement(c.default,{title:"\u8be6\u60c5\u5b57\u6bb5",type:"inner"},R),w.default.createElement(p.default,null),w.default.createElement(g.default,{layout:"inline"},w.default.createElement(g.default.Item,{label:"\u6392\u5217\u65b9\u5f0f"},w.default.createElement(v.default.Group,{value:o,onChange:function(e){return f(e.target.value)}},w.default.createElement(v.default,{value:"default"},"\u9ed8\u8ba4"),_.map(V,function(e,t){return w.default.createElement(v.default,{value:t},e)})))));return[T,O,M,P,k]}function W(e){var t,n,a=e.schemas,l=e.modelName,r=e.detailValue,c=e.bsmSetting,d=e.onChange,s=[],p=[],v=[];"default"===(null===r||void 0===r?void 0:r.style)||_.isEmpty(null===r||void 0===r?void 0:r.sections)?s=[(null===r||void 0===r?void 0:null===(t=r.fields)||void 0===t?void 0:t.length)||0]:null===r||void 0===r||null===(n=r.sections)||void 0===n||n.forEach(function(e){e.fields&&s.push(e.fields.length),p.push(e.title),v.push(e.style)});var g=(0,w.useState)(s),y=(0,S.default)(g,2),x=y[0],D=y[1],N=(0,w.useState)(p),I=(0,S.default)(N,2),A=I[0],k=I[1],F=(0,w.useState)(v),M=(0,S.default)(F,2),T=M[0],q=M[1],W="group",L=z({modelName:l,detailValue:r,schemas:a,style:W,bsmSetting:c}),U=(0,S.default)(L,5),$=U[0],G=U[2],Z=U[4],B=Z.deleteField,Y=Z.setFields,J=Z.getField,K=Z.handleFieldChange;function X(e){var t=0,n=e.length+x[E];x.forEach(function(e,n){n<=E&&(t+=e)});var a=e.map(J),l=(0,O.default)(G,{$splice:[[t,0].concat((0,C.default)(a))]});Y(l),D((0,O.default)(x,{$splice:[[E,1,n]]}))}var H=(0,P.useSelectFields)({modelName:l,schemas:a,onOk:function(){return X(te)},fieldDisabled:function(e){return G.map(function(e){return e.name}).includes(e.name)},expand:!0}),Q=(0,S.default)(H,3),ee=Q[0],te=Q[1],ne=Q[2];function ae(e,t){B((0,P.getRealIndex)(e,t,x)),D((0,O.default)(x,{$splice:[[t,1,x[t]-1]]}))}function le(e){var t=x.reduce(function(t,n,a){return a<e?t+n:t},0);Y((0,O.default)(G,{$splice:[[t,x[e]]]})),D((0,O.default)(x,{$splice:[[e,1]]})),k((0,O.default)(A,{$splice:[[e,1]]})),q((0,O.default)(T,{$splice:[[e,1]]}))}function re(e,t,n){K((0,P.getRealIndex)(e,t,x),n,"name")}function ue(e,t){k((0,O.default)(A,{$splice:[[e,1,t]]}))}function ie(e,t){if(t in R.detailComponent){var n=x.reduce(function(t,n,a){return a<e?t+n:t},0),a=_.cloneDeep(x);a[e]=0,Y((0,O.default)(G,{$splice:[[n,x[e]]]})),D(a)}q((0,O.default)(T,{$splice:[[e,1,{widget:t}]]}))}function oe(e,t){var n=_.cloneDeep(x);n.splice(e,0,0),D(n);var a=_.cloneDeep(T);a.splice(e,0,{widget:t}),q(a),k((0,O.default)(A,{$splice:[[e,0,null]]}))}var fe=(0,P.default)({sectionStyle:T,style:W,sections:x,setSections:D,allData:G,setData:Y,modalView:ee,columns:[{title:"\u5b57\u6bb5",key:"name",render:function(e,t,n,a){return w.default.createElement(j.default,{value:e.name,onChange:function(e){return re(n,a,e)},model:l})}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n,a){return w.default.createElement(w.default.Fragment,null,w.default.createElement("a",{onClick:function(){return ae(n,a)}},"\u5220\u9664"))}}],footer:function(e){return w.default.createElement(m.default,{onClick:function(){E=e,ne()}},"\u6dfb\u52a0\u5b57\u6bb5")},expandedRowRender:function(e,t,n,a,l){return $((0,P.getRealIndex)(t,l,x))},addAndDeleteView:function(e){var t;return"default"!==W&&w.default.createElement("div",null,"\u5361\u7247\u7c7b\u578b\uff1a",w.default.createElement(h.default,{value:(null===(t=T[e])||void 0===t?void 0:t.widget)||"cell",onChange:function(t){return ie(e,t)},style:{minWidth:120,maxWidth:200}},w.default.createElement(h.default.Option,{value:"cell"},"\u5b57\u6bb5\u5217\u8868"),w.default.createElement(h.default.Option,{value:"tiles"},"\u5b57\u6bb5\u5e73\u94fa"),w.default.createElement(h.default.Option,{value:"table"},"\u5b57\u6bb5\u8868\u683c"),w.default.createElement(h.default.Option,{value:"table-v"},"\u5782\u76f4\u5b57\u6bb5\u8868\u683c"),Object.keys(R.detailComponentModel).map(function(e){return R.detailComponentModel[e].includes(l)&&w.default.createElement(h.default.Option,{value:e},R.detailComponentDisplayName[e])})),0!==e&&w.default.createElement(m.default,{icon:"delete",onClick:function(){return le(e)}},"\u5220\u9664"))},addAndWidget:function(e){return"default"!==W&&w.default.createElement("div",null,w.default.createElement(i.default,{overlay:w.default.createElement(f.default,{onClick:function(t){return oe(e+1,t.key)}},w.default.createElement(f.default.Item,{key:"cell"},"\u5b57\u6bb5\u5217\u8868"),w.default.createElement(f.default.Item,{key:"tiles"},"\u5b57\u6bb5\u5e73\u94fa"),w.default.createElement(f.default.Item,{key:"table"},"\u5b57\u6bb5\u8868\u683c"),w.default.createElement(f.default.Item,{key:"table-v"},"\u5782\u76f4\u5b57\u6bb5\u8868\u683c"),Object.keys(R.detailComponentModel).map(function(e){return R.detailComponentModel[e].includes(l)&&w.default.createElement(f.default.Item,{key:e},R.detailComponentDisplayName[e])})),trigger:["click"]},w.default.createElement(m.default,{type:"dashed",block:!0},w.default.createElement(o.default,{type:"plus"}))))},tableTitle:function(e){return"default"!==W&&w.default.createElement("div",null,"".concat(V[W],"\u540d\u79f0"),"\xa0\xa0",w.default.createElement(b.default,{style:{width:100},value:A[e],onChange:function(t){return ue(e,t.target.value)},placeholder:"\u7b2c".concat(e+1,"\u7ec4")}))}}),ce=(0,S.default)(fe,1),de=ce[0],se=(0,u.default)({},r,{style:W,fields:"default"===W&&G});if("default"!==W){var me=0;se.sections=[],x.forEach(function(e,t){se.sections.push({title:A[t],fields:G.slice(me,me+e),style:T[t]}),me+=e})}return(0,w.useEffect)(function(){d(se)},[x,A,T,W,G]),de}var L=(y={},(0,r.default)(y,M.VERSION_FIRST,q),(0,r.default)(y,M.VERSION_SECOND,W),y),U=L[M.CONFIG_VERSION];t.default=U},"1n/C":function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("52nx");var r=l(n("7bDm"));n("cW/2");var u=l(n("RtDF"));n("eNCU");var i=l(n("pjJH"));n("vmZS");var o=l(n("NjVP")),f=l(n("p0pE")),c=l(n("gWZ8")),d=l(n("qIgq")),s=a(n("q1tI")),m=l(n("RsOY")),p=l(n("LvDl")),v=l(n("4b23")),h=l(n("cPjh")),g=l(n("MU2A")),y=l(n("umGZ")),E=l(n("U/ol")),b=function(e){return e.name?e:{name:e}};function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:0},a=n.id,l=n.title,r=void 0===l?"":l,u=[];return t[e].fields.forEach(function(e){if("bref"!==e.type){var t=a?"".concat(a,".").concat(e.name):e.name,n={id:t,pId:a,value:t,title:"".concat(r?"".concat(r,"."):"").concat(e.displayName)};e.ref&&(n.fieldRef=e.ref),u.push(n)}}),u}function S(e){var t=e.modelName,n=e.schemas,a=e.adminConfig,l=e.bsmSetting.staff_model,r=function(){var e;return(null===(e=a[t].filter)||void 0===e?void 0:e.map(b))||[]},u=(0,s.useState)(r),i=(0,d.default)(u,2),m=i[0],h=i[1],g=function(){return h(r())},C=(0,s.useState)([]),S=(0,d.default)(C,2),w=S[0],O=S[1];function x(){h([].concat((0,c.default)(m),[{}]))}function D(e,t){var n=p.default.cloneDeep(m);n[e].name=t,h(n)}(0,s.useEffect)(function(){if(l){var e=[];n[t].fields.forEach(function(t){t.ref===l&&e.push(t)}),O(e)}},[]);var N=function(){var e=p.default.cloneDeep(m);return e.map(function(e){var t=(0,f.default)({},e);return p.default.isEmpty(e.groups)||(t.groups=t.groups.filter(function(e){return e}).map(function(e){return e.id||e})),e.id||(t.id=(0,v.default)(6)),t})},I={handleTitleChange:D,handleAdd:x,setFilters:h};function A(e){var n,r;if(void 0===e)return null;var u=m[e];return s.default.createElement(o.default,{labelCol:{span:6},wrapperCol:{span:8}},s.default.createElement("div",{className:E.default.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),s.default.createElement(y.default,{groupsValue:null!==(n=null===(r=u.groups)||void 0===r?void 0:r.filter(function(e){return!("number"===typeof e)}))&&void 0!==n?n:[],groupsOnChange:function(t){var n=p.default.cloneDeep(m);n[e].groups=t,h((0,c.default)(n))},userValue:u.userField,userOnChange:function(t){var n=p.default.cloneDeep(m);n[e].userField=t,h((0,c.default)(n))},staffModelFields:w,staffModel:l,defauldGroupValue:a[t].filter[e]}))}return[A,m,g,N,I]}function w(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=e.bsmSetting,o=(0,s.useState)([]),f=(0,d.default)(o,2),p=f[0],v=f[1],y=(0,s.useState)(!1),E=(0,d.default)(y,2),w=E[0],O=E[1],x=(0,s.useState)([]),D=(0,d.default)(x,2),N=D[0],I=D[1],A=S({modelName:t,schemas:a,adminConfig:n,bsmSetting:l}),k=(0,d.default)(A,5),_=k[0],F=k[1],P=k[2],j=k[3],M=k[4],R=M.setFilters;function V(e){var t=(0,c.default)(F);t.splice(e,1),R(t)}function T(e,t){R((0,m.default)(F,{$splice:[[e,1,{name:t}]]}))}function z(e){R([].concat((0,c.default)(F),(0,c.default)(e.map(b))))}function q(){z(N),O(!1)}function W(){O(!1),I([])}var L=(0,h.default)({allData:F,setData:R,title:"\u7b5b\u9009\u5b57\u6bb5",sections:[F.length||0],columns:[{title:"\u5b57\u6bb5",key:"name",render:function(e,n,a){return s.default.createElement(g.default,{value:e.name||e,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.apply(void 0,[a].concat(t))},model:t,layer:2})}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n){return s.default.createElement(s.default.Fragment,null,s.default.createElement("a",{onClick:function(){return V(n)}},"\u5220\u9664"))}}],footer:function(){return s.default.createElement("div",null,s.default.createElement(i.default,{onClick:function(){return O(!0)}},"\u6dfb\u52a0\u5b57\u6bb5"))},expandedRowRender:function(e,t){return _(t)}}),U=(0,d.default)(L,1),$=U[0];(0,s.useEffect)(function(){var e=C(t,a);e.forEach(function(t){t.fieldRef&&e.push.apply(e,(0,c.default)(C(t.fieldRef,a,t)))}),v(e)},[]);var G=s.default.createElement(u.default,{treeDataSimpleMode:!0,style:{width:"100%"},value:N,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8bf7\u9009\u62e9",onChange:I,multiple:!0,treeData:p.map(function(e){return(0,m.default)(e,{disabled:{$set:F.some(function(t){return t.name===e.value})}})}),filterTreeNode:function(e,t){var n=t.props;return["title","value"].some(function(t){return n[t].toLowerCase().includes(e.toLowerCase())})}}),Z=s.default.createElement(s.default.Fragment,null,s.default.createElement(r.default,{title:"\u6dfb\u52a0\u5b57\u6bb5",visible:w,onOk:q,onCancel:function(){return O(!1)},afterClose:W,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},G),$);return[Z,F,P,j]}var O=w;t.default=O},"2DRO":function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("2qtc");var r=l(n("kLXV"));n("+L6B");var u=l(n("2/Rp"));n("5NDa");var i=l(n("5rEg"));n("y8nQ");var o=l(n("Vl3Y"));n("OaEy");var f=l(n("2fM7")),c=l(n("gWZ8")),d=l(n("qIgq")),s=a(n("q1tI")),m=l(n("LvDl")),p=l(n("cPjh")),v=l(n("uRgk")),h={add:"\u65b0\u5efa",excelImport:"\u5bfc\u5165",link:"\u94fe\u63a5\u8df3\u8f6c",action:"\u4e91\u51fd\u6570"},g={link:"\u7f51\u5740",action:"\u4e91\u51fd\u6570\u540d"};function y(e){var t={type:e,title:h[e],params:{},icon:""};return t}function E(e){var t=e.modelName,n=e.adminConfig,a=(0,s.useState)(n[t].tableActions),l=(0,d.default)(a,2),r=l[0],u=void 0===r?[]:r,p=l[1];function E(){p(n[t].tableActions)}function b(){p([].concat((0,c.default)(u),[{}]))}function C(e){var t=e.map(y);p([].concat((0,c.default)(u),(0,c.default)(t)))}function S(e){var t=m.default.cloneDeep(u);t.splice(e,1),p(t)}function w(e,t){var n=m.default.cloneDeep(u);n[e].type=t,n[e].title=h[t],n[e].params={},p(n)}function O(e,t){var n=m.default.cloneDeep(u);n[e].title=t,p(n)}function x(e,t,n){var a=m.default.cloneDeep(u);a[e].params[t]=n,p(a)}function D(e,t){var n=m.default.cloneDeep(u);n[e].icon=t,p(n)}var N=function(){var e=m.default.cloneDeep(u);return e.filter(function(e){return e.type})},I={handleParamsChange:x,handleTitleChange:O,handleDelete:S,handleAdd:b,setTabAction:p,addTabActions:C};function A(e){if(void 0===e)return null;var t=u[e];return s.default.createElement(o.default,{labelCol:{span:6},wrapperCol:{span:8}},s.default.createElement(o.default.Item,{label:"\u5168\u5c40\u64cd\u4f5c\u7c7b\u578b"},s.default.createElement(f.default,{value:t.type,onChange:function(t){return w(e,t)}},Object.keys(h).map(function(e){return s.default.createElement(f.default.Option,{value:e},h[e])}))),s.default.createElement(o.default.Item,{label:"\u64cd\u4f5c\u56fe\u6807"},s.default.createElement(v.default,{onChange:function(t){D(e,t)},value:t.icon})),s.default.createElement(o.default.Item,{label:"\u5168\u5c40\u64cd\u4f5c\u540d\u79f0"},s.default.createElement(i.default,{value:t.title,onChange:function(t){return O(e,t.target.value)}})),"link"===t.type&&s.default.createElement(s.default.Fragment,null,s.default.createElement(o.default.Item,{label:g[t.type]},s.default.createElement(i.default,{value:t.params[t.type],onChange:function(n){return x(e,t.type,n.target.value)}}))),"action"===t.type&&s.default.createElement(s.default.Fragment,null,s.default.createElement(o.default.Item,{label:g[t.type]},s.default.createElement(i.default,{value:t.params[t.type],onChange:function(t){return x(e,"action",t.target.value)}})),s.default.createElement(o.default.Item,{label:"\u53c2\u6570"},s.default.createElement(i.default.TextArea,{defaultValue:JSON.stringify(t.params.payload),autosize:{minRows:5},onChange:function(t){try{x(e,"payload",JSON.parse(t.target.value))}catch(e){console.error(e)}}}),s.default.createElement("p",{style:{color:"grey"}},"\u53c2\u6570\u683c\u5f0f\u4e3aJSON object"))))}return[A,u,E,N,I]}function b(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=e.bsmSetting,i=(0,s.useState)(!1),c=(0,d.default)(i,2),m=c[0],v=c[1],g=(0,s.useState)([]),y=(0,d.default)(g,2),b=y[0],C=y[1],S=E({modelName:t,schemas:a,adminConfig:n,bsmSetting:l}),w=(0,d.default)(S,5),O=w[0],x=w[1],D=w[2],N=w[3],I=w[4],A=I.addTabActions,k=I.handleDelete,_=I.setTabAction,F=(0,p.default)({allData:x,setData:_,sections:[x.length||0],title:"\u5168\u5c40\u64cd\u4f5c",setSections:function(e){_(e[0].fields)},columns:[{title:"\u5168\u5c40\u64cd\u4f5c",key:"name",render:function(e){return e.title||h[e.type]}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n){return s.default.createElement(s.default.Fragment,null,s.default.createElement("a",{onClick:function(){return k(n)}},"\u5220\u9664"))}}],footer:function(){return s.default.createElement(u.default,{onClick:function(){return v(!0)}},"\u6dfb\u52a0\u64cd\u4f5c\u9879")},expandedRowRender:function(e,t){return O(t)}}),P=(0,d.default)(F,1),j=P[0];function M(){A(b),v(!1)}function R(){v(!1),C([])}var V=s.default.createElement("div",null,s.default.createElement(o.default.Item,{label:"\u9009\u62e9\u7c7b\u578b",labelCol:{span:6},wrapperCol:{span:18}},s.default.createElement(f.default,{mode:"multiple",defaultValue:[],value:b,onChange:C,style:{minWidth:160}},Object.keys(h).map(function(e,t){return s.default.createElement(f.default.Option,{value:e,key:"".concat(e,"__").concat(t+1)},h[e])})))),T=s.default.createElement(s.default.Fragment,null,s.default.createElement(r.default,{title:"\u6dfb\u52a0\u64cd\u4f5c\u9879",visible:m,onOk:M,onCancel:function(){return v(!1)},afterClose:R,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},V),j);return[T,x,D,N]}var C=b;t.default=C},"5NDa":function(e,t,n){"use strict";n.r(t);n("cIOH"),n("OnYD"),n("+L6B")},"5rEg":function(e,t,n){"use strict";n.r(t);var a=n("pVnL"),l=n.n(a),r=n("lwsE"),u=n.n(r),i=n("W8MJ"),o=n.n(i),f=n("7W2i"),c=n.n(f),d=n("LQ03"),s=n.n(d),m=n("lSNA"),p=n.n(m),v=n("q1tI"),h=n("TSYQ"),g=n.n(h),y=n("6UMo"),E=n("kbBi"),b=n.n(E),C=n("CWQg"),S=n("0n0R"),w=Object(C["a"])("text","input");function O(e){return!!(e.prefix||e.suffix||e.allowClear)}function x(e){return!(!e.addonBefore&&!e.addonAfter)}var D=function(e){c()(n,e);var t=s()(n);function n(){var e;return u()(this,n),e=t.apply(this,arguments),e.containerRef=v["createRef"](),e.onInputMouseUp=function(t){var n;if(null===(n=e.containerRef.current)||void 0===n?void 0:n.contains(t.target)){var a=e.props.triggerFocus;null===a||void 0===a||a()}},e}return o()(n,[{key:"renderClearIcon",value:function(e){var t=this.props,n=t.allowClear,a=t.value,l=t.disabled,r=t.readOnly,u=t.handleReset;if(!n)return null;var i=!l&&!r&&a,o="".concat(e,"-clear-icon");return v["createElement"](b.a,{onClick:u,className:g()(p()({},"".concat(o,"-hidden"),!i),o),role:"button"})}},{key:"renderSuffix",value:function(e){var t=this.props,n=t.suffix,a=t.allowClear;return n||a?v["createElement"]("span",{className:"".concat(e,"-suffix")},this.renderClearIcon(e),n):null}},{key:"renderLabeledIcon",value:function(e,t){var n,a=this.props,l=a.focused,r=a.value,u=a.prefix,i=a.className,o=a.size,f=a.suffix,c=a.disabled,d=a.allowClear,s=a.direction,m=a.style,h=a.readOnly,y=a.bordered,E=this.renderSuffix(e);if(!O(this.props))return Object(S["a"])(t,{value:r});var b=u?v["createElement"]("span",{className:"".concat(e,"-prefix")},u):null,C=g()("".concat(e,"-affix-wrapper"),(n={},p()(n,"".concat(e,"-affix-wrapper-focused"),l),p()(n,"".concat(e,"-affix-wrapper-disabled"),c),p()(n,"".concat(e,"-affix-wrapper-sm"),"small"===o),p()(n,"".concat(e,"-affix-wrapper-lg"),"large"===o),p()(n,"".concat(e,"-affix-wrapper-input-with-clear-btn"),f&&d&&r),p()(n,"".concat(e,"-affix-wrapper-rtl"),"rtl"===s),p()(n,"".concat(e,"-affix-wrapper-readonly"),h),p()(n,"".concat(e,"-affix-wrapper-borderless"),!y),p()(n,"".concat(i),!x(this.props)&&i),n));return v["createElement"]("span",{ref:this.containerRef,className:C,style:m,onMouseUp:this.onInputMouseUp},b,Object(S["a"])(t,{style:null,value:r,className:P(e,y,o,c)}),E)}},{key:"renderInputWithLabel",value:function(e,t){var n,a=this.props,l=a.addonBefore,r=a.addonAfter,u=a.style,i=a.size,o=a.className,f=a.direction;if(!x(this.props))return t;var c="".concat(e,"-group"),d="".concat(c,"-addon"),s=l?v["createElement"]("span",{className:d},l):null,m=r?v["createElement"]("span",{className:d},r):null,h=g()("".concat(e,"-wrapper"),c,p()({},"".concat(c,"-rtl"),"rtl"===f)),y=g()("".concat(e,"-group-wrapper"),(n={},p()(n,"".concat(e,"-group-wrapper-sm"),"small"===i),p()(n,"".concat(e,"-group-wrapper-lg"),"large"===i),p()(n,"".concat(e,"-group-wrapper-rtl"),"rtl"===f),n),o);return v["createElement"]("span",{className:y,style:u},v["createElement"]("span",{className:h},s,Object(S["a"])(t,{style:null}),m))}},{key:"renderTextAreaWithClearIcon",value:function(e,t){var n,a=this.props,l=a.value,r=a.allowClear,u=a.className,i=a.style,o=a.direction,f=a.bordered;if(!r)return Object(S["a"])(t,{value:l});var c=g()("".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"),(n={},p()(n,"".concat(e,"-affix-wrapper-rtl"),"rtl"===o),p()(n,"".concat(e,"-affix-wrapper-borderless"),!f),p()(n,"".concat(u),!x(this.props)&&u),n));return v["createElement"]("span",{className:c,style:i},Object(S["a"])(t,{style:null,value:l}),this.renderClearIcon(e))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.inputType,a=e.element;return n===w[0]?this.renderTextAreaWithClearIcon(t,a):this.renderInputWithLabel(t,this.renderLabeledIcon(t,a))}}]),n}(v["Component"]),N=D,I=n("H84U"),A=n("3Nzz"),k=n("uaoM");function _(e){return"undefined"===typeof e||null===e?"":e}function F(e,t,n){if(n){var a=t;if("click"===t.type){a=Object.create(t),a.target=e,a.currentTarget=e;var l=e.value;return e.value="",n(a),void(e.value=l)}n(a)}}function P(e,t,n,a,l){var r;return g()(e,(r={},p()(r,"".concat(e,"-sm"),"small"===n),p()(r,"".concat(e,"-lg"),"large"===n),p()(r,"".concat(e,"-disabled"),a),p()(r,"".concat(e,"-rtl"),"rtl"===l),p()(r,"".concat(e,"-borderless"),!t),r))}var j=function(e){c()(n,e);var t=s()(n);function n(e){var a;u()(this,n),a=t.call(this,e),a.direction="ltr",a.focus=function(){a.input.focus()},a.saveClearableInput=function(e){a.clearableInput=e},a.saveInput=function(e){a.input=e},a.onFocus=function(e){var t=a.props.onFocus;a.setState({focused:!0},a.clearPasswordValueAttribute),t&&t(e)},a.onBlur=function(e){var t=a.props.onBlur;a.setState({focused:!1},a.clearPasswordValueAttribute),t&&t(e)},a.handleReset=function(e){a.setValue("",function(){a.focus()}),F(a.input,e,a.props.onChange)},a.renderInput=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=a.props,i=u.className,o=u.addonBefore,f=u.addonAfter,c=u.size,d=u.disabled,s=Object(y["a"])(a.props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","inputType","bordered"]);return v["createElement"]("input",l()({autoComplete:r.autoComplete},s,{onChange:a.handleChange,onFocus:a.onFocus,onBlur:a.onBlur,onKeyDown:a.handleKeyDown,className:g()(P(e,n,c||t,d,a.direction),p()({},i,i&&!o&&!f)),ref:a.saveInput}))},a.clearPasswordValueAttribute=function(){a.removePasswordTimeout=setTimeout(function(){a.input&&"password"===a.input.getAttribute("type")&&a.input.hasAttribute("value")&&a.input.removeAttribute("value")})},a.handleChange=function(e){a.setValue(e.target.value,a.clearPasswordValueAttribute),F(a.input,e,a.props.onChange)},a.handleKeyDown=function(e){var t=a.props,n=t.onPressEnter,l=t.onKeyDown;13===e.keyCode&&n&&n(e),l&&l(e)},a.renderComponent=function(e){var t=e.getPrefixCls,n=e.direction,r=e.input,u=a.state,i=u.value,o=u.focused,f=a.props,c=f.prefixCls,d=f.bordered,s=void 0===d||d,m=t("input",c);return a.direction=n,v["createElement"](A["b"].Consumer,null,function(e){return v["createElement"](N,l()({size:e},a.props,{prefixCls:m,inputType:"input",value:_(i),element:a.renderInput(m,e,s,r),handleReset:a.handleReset,ref:a.saveClearableInput,direction:n,focused:o,triggerFocus:a.focus,bordered:s}))})};var r="undefined"===typeof e.value?e.defaultValue:e.value;return a.state={value:r,focused:!1,prevValue:e.value},a}return o()(n,[{key:"componentDidMount",value:function(){this.clearPasswordValueAttribute()}},{key:"componentDidUpdate",value:function(){}},{key:"getSnapshotBeforeUpdate",value:function(e){return O(e)!==O(this.props)&&Object(k["a"])(this.input!==document.activeElement,"Input","When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ"),null}},{key:"componentWillUnmount",value:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)}},{key:"blur",value:function(){this.input.blur()}},{key:"setSelectionRange",value:function(e,t,n){this.input.setSelectionRange(e,t,n)}},{key:"select",value:function(){this.input.select()}},{key:"setValue",value:function(e,t){void 0===this.props.value?this.setState({value:e},t):null===t||void 0===t||t()}},{key:"render",value:function(){return v["createElement"](I["a"],null,this.renderComponent)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevValue,a={prevValue:e.value};return void 0===e.value&&n===e.value||(a.value=e.value),a}}]),n}(v["Component"]);j.defaultProps={type:"text"};var M=j,R=function(e){return v["createElement"](I["a"],null,function(t){var n,a=t.getPrefixCls,l=t.direction,r=e.prefixCls,u=e.className,i=void 0===u?"":u,o=a("input-group",r),f=g()(o,(n={},p()(n,"".concat(o,"-lg"),"large"===e.size),p()(n,"".concat(o,"-sm"),"small"===e.size),p()(n,"".concat(o,"-compact"),e.compact),p()(n,"".concat(o,"-rtl"),"rtl"===l),n),i);return v["createElement"]("span",{className:f,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},e.children)})},V=R,T=n("c+Xe"),z=n("w6Tc"),q=n.n(z),W=n("2/Rp"),L=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},U=v["forwardRef"](function(e,t){var n,a,r=e.prefixCls,u=e.inputPrefixCls,i=e.className,o=e.size,f=e.suffix,c=e.enterButton,d=void 0!==c&&c,s=e.addonAfter,m=e.loading,h=e.disabled,y=e.onSearch,E=e.onChange,b=L(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange"]),C=v["useContext"](I["b"]),w=C.getPrefixCls,O=C.direction,x=v["useContext"](A["b"]),D=o||x,N=v["useRef"](null),k=function(e){e&&e.target&&"click"===e.type&&y&&y(e.target.value,e),E&&E(e)},_=function(e){var t;document.activeElement===(null===(t=N.current)||void 0===t?void 0:t.input)&&e.preventDefault()},F=function(e){var t;y&&y(null===(t=N.current)||void 0===t?void 0:t.input.value,e)},P=w("input-search",r),j=w("input",u),R="boolean"===typeof d||"undefined"===typeof d?v["createElement"](q.a,null):null,V="".concat(P,"-button"),z=d||{},U=z.type&&!0===z.type.__ANT_BUTTON;a=U||"button"===z.type?Object(S["a"])(z,l()({onMouseDown:_,onClick:F,key:"enterButton"},U?{className:V,size:D}:{})):v["createElement"](W["default"],{className:V,type:d?"primary":void 0,size:D,disabled:h,key:"enterButton",onMouseDown:_,onClick:F,loading:m,icon:R},d),s&&(a=[a,Object(S["a"])(s,{key:"addonAfter"})]);var $=g()(P,(n={},p()(n,"".concat(P,"-rtl"),"rtl"===O),p()(n,"".concat(P,"-").concat(D),!!D),p()(n,"".concat(P,"-with-button"),!!d),n),i);return v["createElement"](M,l()({ref:Object(T["a"])(N,t),onPressEnter:F},b,{size:D,prefixCls:j,addonAfter:a,suffix:f,onChange:k,className:$,disabled:h}))});U.displayName="Search";var $=U,G=n("RIqP"),Z=n.n(G),B=n("J4zp"),Y=n.n(B),J=n("1OyB"),K=n("vuIU"),X=n("Ji7U"),H=n("LK+K"),Q=n("VTBJ"),ee=n("rePB"),te=n("t23M");function ne(e,t){for(var n=Object.assign({},e),a=0;a<t.length;a+=1){var l=t[a];delete n[l]}return n}var ae,le,re=ne,ue="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",ie=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],oe={};function fe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&oe[n])return oe[n];var a=window.getComputedStyle(e),l=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),r=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),u=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),i=ie.map(function(e){return"".concat(e,":").concat(a.getPropertyValue(e))}).join(";"),o={sizingStyle:i,paddingSize:r,borderSize:u,boxSizing:l};return t&&n&&(oe[n]=o),o}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ae||(ae=document.createElement("textarea"),ae.setAttribute("tab-index","-1"),ae.setAttribute("aria-hidden","true"),document.body.appendChild(ae)),e.getAttribute("wrap")?ae.setAttribute("wrap",e.getAttribute("wrap")):ae.removeAttribute("wrap");var l=fe(e,t),r=l.paddingSize,u=l.borderSize,i=l.boxSizing,o=l.sizingStyle;ae.setAttribute("style","".concat(o,";").concat(ue)),ae.value=e.value||e.placeholder||"";var f,c=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,s=ae.scrollHeight;if("border-box"===i?s+=u:"content-box"===i&&(s-=r),null!==n||null!==a){ae.value=" ";var m=ae.scrollHeight-r;null!==n&&(c=m*n,"border-box"===i&&(c=c+r+u),s=Math.max(c,s)),null!==a&&(d=m*a,"border-box"===i&&(d=d+r+u),f=s>d?"":"hidden",s=Math.min(d,s))}return{height:s,minHeight:c,maxHeight:d,overflowY:f,resize:"none"}}(function(e){e[e["NONE"]=0]="NONE",e[e["RESIZING"]=1]="RESIZING",e[e["RESIZED"]=2]="RESIZED"})(le||(le={}));var de=function(e){Object(X["a"])(n,e);var t=Object(H["a"])(n);function n(e){var a;return Object(J["a"])(this,n),a=t.call(this,e),a.saveTextArea=function(e){a.textArea=e},a.handleResize=function(e){var t=a.state.resizeStatus,n=a.props,l=n.autoSize,r=n.onResize;t===le.NONE&&("function"===typeof r&&r(e),l&&a.resizeOnNextFrame())},a.resizeOnNextFrame=function(){cancelAnimationFrame(a.nextFrameActionId),a.nextFrameActionId=requestAnimationFrame(a.resizeTextarea)},a.resizeTextarea=function(){var e=a.props.autoSize;if(e&&a.textArea){var t=e.minRows,n=e.maxRows,l=ce(a.textArea,!1,t,n);a.setState({textareaStyles:l,resizeStatus:le.RESIZING},function(){cancelAnimationFrame(a.resizeFrameId),a.resizeFrameId=requestAnimationFrame(function(){a.setState({resizeStatus:le.RESIZED},function(){a.resizeFrameId=requestAnimationFrame(function(){a.setState({resizeStatus:le.NONE}),a.fixFirefoxAutoScroll()})})})})}},a.renderTextArea=function(){var e=a.props,t=e.prefixCls,n=void 0===t?"rc-textarea":t,l=e.autoSize,r=e.onResize,u=e.className,i=e.disabled,o=a.state,f=o.textareaStyles,c=o.resizeStatus,d=re(a.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),s=g()(n,u,Object(ee["a"])({},"".concat(n,"-disabled"),i));"value"in d&&(d.value=d.value||"");var m=Object(Q["a"])(Object(Q["a"])(Object(Q["a"])({},a.props.style),f),c===le.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return v["createElement"](te["a"],{onResize:a.handleResize,disabled:!(l||r)},v["createElement"]("textarea",Object.assign({},d,{className:s,style:m,ref:a.saveTextArea})))},a.state={textareaStyles:{},resizeStatus:le.NONE},a}return Object(K["a"])(n,[{key:"componentDidMount",value:function(){this.resizeTextarea()}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,t)}}catch(e){}}},{key:"render",value:function(){return this.renderTextArea()}}]),n}(v["Component"]),se=de,me=function(e){Object(X["a"])(n,e);var t=Object(H["a"])(n);function n(e){var a;Object(J["a"])(this,n),a=t.call(this,e),a.focus=function(){a.resizableTextArea.textArea.focus()},a.saveTextArea=function(e){a.resizableTextArea=e},a.handleChange=function(e){var t=a.props.onChange;a.setValue(e.target.value,function(){a.resizableTextArea.resizeTextarea()}),t&&t(e)},a.handleKeyDown=function(e){var t=a.props,n=t.onPressEnter,l=t.onKeyDown;13===e.keyCode&&n&&n(e),l&&l(e)};var l="undefined"===typeof e.value||null===e.value?e.defaultValue:e.value;return a.state={value:l},a}return Object(K["a"])(n,[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return v["createElement"](se,Object.assign({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),n}(v["Component"]),pe=me,ve=n("6cGi"),he=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},ge=v["forwardRef"](function(e,t){var n,a=e.prefixCls,r=e.bordered,u=void 0===r||r,i=e.showCount,o=void 0!==i&&i,f=e.maxLength,c=e.className,d=e.style,s=e.size,m=he(e,["prefixCls","bordered","showCount","maxLength","className","style","size"]),h=v["useContext"](I["b"]),E=h.getPrefixCls,b=h.direction,C=v["useContext"](A["b"]),S=v["useRef"](),w=v["useRef"](null),O=Object(ve["a"])(m.defaultValue,{value:m.value}),x=Y()(O,2),D=x[0],k=x[1],P=v["useRef"](m.value);v["useEffect"](function(){void 0===m.value&&P.current===m.value||(k(m.value),P.current=m.value)},[m.value,P.current]);var j=function(e,t){void 0===m.value&&(k(e),null===t||void 0===t||t())},M=function(e){j(e.target.value),F(S.current,e,m.onChange)},R=function(e){j("",function(){var e;null===(e=S.current)||void 0===e||e.focus()}),F(S.current,e,m.onChange)},V=E("input",a),z=v["createElement"](pe,l()({},Object(y["a"])(m,["allowClear"]),{maxLength:f,className:g()((n={},p()(n,"".concat(V,"-borderless"),!u),p()(n,c,c&&!o),p()(n,"".concat(V,"-sm"),"small"===C||"small"===s),p()(n,"".concat(V,"-lg"),"large"===C||"large"===s),n)),style:o?null:d,prefixCls:V,onChange:M,ref:Object(T["a"])(t,S)})),q=_(D),W=Number(f)>0;q=W?Z()(q).slice(0,f).join(""):q;var L=v["createElement"](N,l()({},m,{prefixCls:V,direction:b,inputType:"text",value:q,element:z,handleReset:R,ref:w,bordered:u}));if(o){var U=Z()(q).length,$="".concat(U).concat(W?" / ".concat(f):"");return v["createElement"]("div",{className:g()("".concat(V,"-textarea"),p()({},"".concat(V,"-textarea-rtl"),"rtl"===b),"".concat(V,"-textarea-show-count"),c),style:d,"data-count":$},L)}return L}),ye=ge,Ee=n("qPY4"),be=n.n(Ee),Ce=n("fUL4"),Se=n.n(Ce),we=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},Oe={click:"onClick",hover:"onMouseOver"},xe=v["forwardRef"](function(e,t){var n=Object(v["useState"])(!1),a=Y()(n,2),r=a[0],u=a[1],i=function(){var t=e.disabled;t||u(!r)},o=function(t){var n,a=e.action,l=e.iconRender,u=void 0===l?function(){return null}:l,o=Oe[a]||"",f=u(r),c=(n={},p()(n,o,i),p()(n,"className","".concat(t,"-icon")),p()(n,"key","passwordIcon"),p()(n,"onMouseDown",function(e){e.preventDefault()}),p()(n,"onMouseUp",function(e){e.preventDefault()}),n);return v["cloneElement"](v["isValidElement"](f)?f:v["createElement"]("span",null,f),c)},f=function(n){var a=n.getPrefixCls,u=e.className,i=e.prefixCls,f=e.inputPrefixCls,c=e.size,d=e.visibilityToggle,s=we(e,["className","prefixCls","inputPrefixCls","size","visibilityToggle"]),m=a("input",f),h=a("input-password",i),E=d&&o(h),b=g()(h,u,p()({},"".concat(h,"-").concat(c),!!c)),C=l()(l()({},Object(y["a"])(s,["suffix","iconRender"])),{type:r?"text":"password",className:b,prefixCls:m,suffix:E});return c&&(C.size=c),v["createElement"](M,l()({ref:t},C))};return v["createElement"](I["a"],null,f)});xe.defaultProps={action:"click",visibilityToggle:!0,iconRender:function(e){return e?v["createElement"](be.a,null):v["createElement"](Se.a,null)}},xe.displayName="Password";var De=xe;M.Group=V,M.Search=$,M.TextArea=ye,M.Password=De;t["default"]=M},"9fIt":function(e,t,n){"use strict";var a=n("g09b"),l=n("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.useDisplayEditorV2=V,t.default=void 0;var r=a(n("eHn4"));n("Dvpn");var u=a(n("myml"));n("eNCU");var i=a(n("pjJH"));n("QjdF");var o=a(n("U4Vl"));n("52nx");var f=a(n("7bDm")),c=a(n("jehZ"));n("WlnS");var d=a(n("7sSx"));n("yavW");var s=a(n("WuMn"));n("h/qz");var m=a(n("GmeQ"));n("vmZS");var p=a(n("NjVP"));n("4X2C");var v,h=a(n("xvon")),g=a(n("p0pE")),y=a(n("gWZ8")),E=a(n("qIgq")),b=l(n("q1tI")),C=a(n("4b23")),S=a(n("MU2A")),w=n("VW+w"),O=n("Wd+Q"),x=a(n("cPjh")),D=n("MxUj"),N=a(n("umGZ")),I=a(n("U/ol"));n("fscj");var A=[{label:"magenta",value:"magenta"},{label:"red",value:"red"},{label:"orange",value:"orange"},{label:"gold",value:"gold"},{label:"lime",value:"lime"},{label:"green",value:"green"},{label:"cyan",value:"cyan"},{label:"blue",value:"blue"},{label:"purple",value:"purple"}],k=[{label:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{label:"YYYY\u5e74MM\u6708DD\u65e5",value:"YYYY\u5e74MM\u6708DD\u65e5"},{label:"YYYY/MM/DD",value:"YYYY/MM/DD"}],F=[{label:"longText",value:"\u957f\u6587\u672c"},{label:"richText",value:"\u5bcc\u6587\u672c"},{label:"jsonText",value:"JSON"}],P={labelCol:{span:4},wrapperCol:{span:10}};function j(e){var t=e;return t.params||(t.params={}),"tag"!==t.widget||t.params.tagSetting||(t.params.tagSetting={}),t}function M(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=e.bsmSetting.staff_model,r=n[t].display.map(j),u=(0,b.useState)(r),i=(0,E.default)(u,2),o=i[0],f=i[1],v=(0,b.useState)([]),S=(0,E.default)(v,2),x=S[0],D=S[1],M=(0,b.useState)(n[t].sortable?n[t].sortable:[]),R=(0,E.default)(M,2),V=R[0],T=R[1],z=(0,O.useDisplayWidgetMapping)(),q=(0,O.useDisplayWidgetNames)();function W(e,t){var n=_.cloneDeep(o);n[e]={name:t},f(n)}function L(e,t){var n=_.cloneDeep(o);return t?n[e].alias=t:delete n[e].alias,f(n),n}function U(){var e=[].concat((0,y.default)(o),[{params:{}}]);return f(e),e}function $(){f([].concat((0,y.default)(o),[{type:"combo",fields:{},params:{}}]))}function G(e){var t=_.cloneDeep(o);t.splice(e,1),f(t)}function Z(){f(n[t].display)}function B(e,n){var l=_.cloneDeep(o),r=l[n];if(r.params={},r.name){var u=a[t].fields.find(function(e){return e.name===r.name});"tag"===e&&(r.params.tagSetting={}),"timeStamp"===e&&(r.params.timeFormat=k[0].value),r.fields={value:u.name}}r.widget=e,f(l)}(0,b.useEffect)(function(){if(l){var e=[];a[t].fields.forEach(function(t){t.ref===l&&e.push(t)}),D(e)}},[]);var Y=function(){var e=_.cloneDeep(o);return e.map(function(e){var t=(0,g.default)({},e);return _.isEmpty(e.groups)||(t.groups=t.groups.filter(function(e){return e}).map(function(e){return e.id||e})),e.id||(t.id=(0,C.default)(6)),t})},J={handleFieldChange:W,handleAliasChange:L,handleFieldDelete:G,handleFieldAdd:U,setDisplay:f,handletemp:$},K=function(e){var r,u,i,v,g,C;if(void 0===e)return null;var S=o[e],D=a[t].fields.find(function(e){var t;return e.name===S.name||e.name===(null===(t=S.fields)||void 0===t?void 0:t.value)}),j=[];D&&z[D.type]&&(j=z[D.type]);var M=S.name,R=S.type;"combo"===R&&(j=O.comboWidget);var W=[];return"mref"===(null===D||void 0===D?void 0:D.type)&&a[D.ref].fields.forEach(function(e){["string","image","file"].includes(e.type)&&W.push({label:e.name,value:e.displayName})}),b.default.createElement(p.default,(0,c.default)({},P,{name:"basic"}),b.default.createElement(p.default.Item,{label:"\u5217\u540d"},b.default.createElement(h.default,{allowClear:!0,value:S.alias,placeholder:S.name&&(0,w.displayPreprocess)([_.cloneDeep(S)],t,a)[0].alias,onChange:function(t){return L(e,t.target.value)}})),!R&&b.default.createElement(p.default.Item,{label:"\u5f00\u542f\u6392\u5e8f"},b.default.createElement(m.default,{defaultChecked:!1,checked:V.includes(M),onChange:function(e){var t=_.cloneDeep(V);if(!0===e)t.push(M),T(t);else{var n=t.filter(function(e){return e!==M});T(n)}}})),"combo"!==R&&!_.isEmpty(j)&&b.default.createElement(p.default.Item,{label:"\u9009\u62e9\u7ec4\u4ef6"},b.default.createElement(s.default,{showSearch:!0,style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u8981\u663e\u793a\u7684\u7ec4\u4ef6",optionFilterProp:"children",value:S.widget?S.widget:null,onChange:function(t){return B(t,e)}},!D||_.uniq(j.concat(D.choices?["tag"]:[])).map(function(e){return b.default.createElement(s.default.Option,{value:e},q[e]||e)}))),"combo"===R&&!_.isEmpty(j)&&b.default.createElement(p.default.Item,{label:"\u9009\u62e9\u6a21\u677f\u7ec4\u4ef6"},b.default.createElement(s.default,{showSearch:!0,style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u8981\u663e\u793a\u7684\u7ec4\u4ef6",optionFilterProp:"children",value:S.widget?S.widget:null,onChange:function(t){var n=_.cloneDeep(o),a=n[e];a.params={},a.widget=t,f(n)}},D||_.uniq(j).map(function(e){return b.default.createElement(s.default.Option,{value:e},q[e]||e)}))),S.widget&&"timeStamp"===S.widget&&b.default.createElement(p.default.Item,{label:"\u914d\u7f6e\u65f6\u95f4\u683c\u5f0f"},b.default.createElement("div",{onMouseDown:function(e){return e.preventDefault(),!1}},b.default.createElement(s.default,{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u65f6\u95f4\u683c\u5f0f",value:S.params.timeFormat,onChange:function(t){var n=_.cloneDeep(o);n[e].params.timeFormat=t,f(n)}},k.map(function(e){return b.default.createElement(s.default.Option,{value:e.value},e.label)})))),S.widget&&"timeStamp"===S.widget&&b.default.createElement(p.default.Item,{label:"\u81ea\u5b9a\u4e49\u65f6\u95f4\u683c\u5f0f"},b.default.createElement(h.default,{style:{flex:"auto",width:"50%"},value:S.params.customFormat,onChange:function(t){var n=_.cloneDeep(o);n[e].params.customFormat=t.target.value,f(n)}})),S.widget&&"tag"===S.widget&&b.default.createElement(p.default.Item,{label:"\u914d\u7f6e\u989c\u8272"},D.choices.map(function(t){var n=(0,E.default)(t,2),a=n[0],l=n[1],r=S.params.tagSetting[a];return b.default.createElement("div",null,b.default.createElement(d.default,{color:r},l),b.default.createElement(s.default,{showSearch:!0,style:{width:200},placeholder:"\u8bf7\u914d\u7f6e\u989c\u8272",value:r,onChange:function(t){var n=_.cloneDeep(o);n[e].params.tagSetting[a]=t,f(n)}},A.map(function(e){return b.default.createElement(s.default.Option,{className:"tagSetting".concat(e.value),value:e.value},e.label)})))})),S.widget&&"longtext"===S.widget&&b.default.createElement(p.default.Item,{label:"\u914d\u7f6e\u5b57\u6bb5\u7c7b\u578b"},b.default.createElement("div",{onMouseDown:function(e){return e.preventDefault(),!1}},b.default.createElement(s.default,{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u5b57\u6bb5\u7c7b\u578b",value:S.params.textType?F.filter(function(e){return e.label===S.params.textType}).map(function(e){return e.label}):null,onChange:function(t){var n=_.cloneDeep(o);n[e].params.textType=t,f(n)}},F.map(function(e){return b.default.createElement(s.default.Option,{value:e.label},e.value)})))),S.widget&&"textimg"===S.widget&&b.default.createElement(b.default.Fragment,null,b.default.createElement(p.default.Item,{label:"\u6807\u9898\u5b57\u6bb5"},b.default.createElement(s.default,{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u6807\u9898\u5b57\u6bb5",value:null===(r=S.fields)||void 0===r?void 0:r.title,onChange:function(t){if(t){var n=_.cloneDeep(o);n[e].fields.title=t,f(n)}}},a[t].fields.map(function(e){return b.default.createElement(s.default.Option,{value:e.name}," ",e.displayName)}))),b.default.createElement(p.default.Item,{label:"\u56fe\u7247\u5b57\u6bb5"},b.default.createElement(s.default,{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u56fe\u7247\u5b57\u6bb5",value:null===(u=S.fields)||void 0===u?void 0:u.avatar,onChange:function(t){if(t){var n=_.cloneDeep(o);n[e].fields.avatar=t,f(n)}}},a[t].fields.map(function(e){return b.default.createElement(s.default.Option,{value:e.name}," ",e.displayName)}))),b.default.createElement(p.default.Item,{label:"\u5185\u5bb9\u5b57\u6bb5"},b.default.createElement(s.default,{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u5185\u5bb9\u5b57\u6bb5",value:null===(i=S.fields)||void 0===i?void 0:i.text,onChange:function(t){if(t){var n=_.cloneDeep(o);n[e].fields.text=t,f(n)}}},a[t].fields.map(function(e){return b.default.createElement(s.default.Option,{value:e.name}," ",e.displayName)})))),S.widget&&"urlImg"===S.widget&&"mref"===D.type&&b.default.createElement(p.default.Item,{label:"\u56fe\u7247\u5b57\u6bb5",help:"\u8be5\u5b57\u6bb5\u5b58\u50a8\u56fe\u7247\u7684URL"},b.default.createElement("div",{onMouseDown:function(e){return e.preventDefault(),!1}},b.default.createElement(s.default,{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u56fe\u7247\u5b57\u6bb5",value:null===(v=S.params)||void 0===v?void 0:v.urlImgName,onChange:function(t){var n=_.cloneDeep(o);n[e].params.urlImgName=t,f(n)}},W.map(function(e){return b.default.createElement(s.default.Option,{value:e.label},e.value)})))),b.default.createElement("div",{className:I.default.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),b.default.createElement(N.default,{groupsValue:null!==(g=null===(C=S.groups)||void 0===C?void 0:C.filter(function(e){return!("number"===typeof e)}))&&void 0!==g?g:[],groupsOnChange:function(t){var n=_.cloneDeep(o);n[e].groups=t,f((0,y.default)(n))},userValue:S.userField,userOnChange:function(t){var n=_.cloneDeep(o);n[e].userField=t,f((0,y.default)(n))},staffModelFields:x,staffModel:l,defauldGroupValue:n[t].display[e]}))};return[K,o,Z,V,Y,J]}function R(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=e.bsmSetting,r=(0,b.useState)(!1),c=(0,E.default)(r,2),d=c[0],s=c[1],m=(0,b.useState)(0),p=(0,E.default)(m,2),v=p[0],g=p[1],y=M({modelName:t,adminConfig:n,schemas:a,FieldIndex:v,bsmSetting:l}),C=(0,E.default)(y,6),O=C[0],x=C[1],D=C[2],N=C[3],I=C[4],A=C[5],k=A.handleFieldChange,F=A.handleAliasChange,P=A.handleFieldDelete,j=A.handleFieldAdd,R=A.setDisplay,V=A.handletemp;function T(){return b.default.createElement("span",null,!x[v]||x[v].name,"\u5b57\u6bb5\u914d\u7f6e")}function z(e){g(e),s(!0),x[v].inplaceEdit||(x[v].inplaceEdit=!1)}function q(e){var t=_.cloneDeep(x),n=e+1,a=[t[e],t[n]];t[n]=a[0],t[e]=a[1],R(t)}function W(e){var t=_.cloneDeep(x),n=e-1,a=[t[e],t[n]];t[n]=a[0],t[e]=a[1],R(t)}var L=b.default.createElement(b.default.Fragment,null,b.default.createElement(f.default,{title:T(),width:"60%",visible:d,closable:!0,onOk:function(){return s(!1)},onCancel:function(){return s(!1)}},O(v)),b.default.createElement(u.default,{dataSource:x,size:"middle",bordered:!0,pagination:!1,columns:[{title:"\u5b57\u6bb5",key:"name",render:function(e,n,a){return b.default.createElement(S.default,{value:e.name,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.apply(void 0,[a].concat(t))},model:t,disabled:"combo"===e.type})}},{title:"\u5217\u540d",key:"alias",render:function(e,n,l){return b.default.createElement(h.default,{allowClear:!0,value:e.alias,placeholder:e.name&&(0,w.displayPreprocess)([_.cloneDeep(e)],t,a)[0].alias,onChange:function(e){return F(l,e.target.value)}})}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n){return b.default.createElement(b.default.Fragment,null,b.default.createElement("a",{onClick:function(){return z(n)}},"\u66f4\u591a"),b.default.createElement(o.default,{type:"vertical"}),b.default.createElement("a",{onClick:function(){return P(n)}},"\u5220\u9664"),n>0&&b.default.createElement(b.default.Fragment,null,b.default.createElement(o.default,{type:"vertical"}),b.default.createElement("a",{onClick:function(){return W(n)}},"\u4e0a\u79fb")),n<x.length-1&&b.default.createElement(b.default.Fragment,null,b.default.createElement(o.default,{type:"vertical"}),b.default.createElement("a",{onClick:function(){return q(n)}},"\u4e0b\u79fb")))}}],footer:function(){return b.default.createElement("div",null,b.default.createElement(i.default,{onClick:j},"\u6dfb\u52a0\u4e00\u5217"),b.default.createElement(i.default,{style:{margin:5},onClick:V},"\u6dfb\u52a0\u7ec4\u5408\u5b57\u6bb5"))}}));return[L,x,D,N,I]}function V(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=e.bsmSetting,r=M({modelName:t,adminConfig:n,schemas:a,bsmSetting:l}),u=(0,E.default)(r,6),o=u[0],f=u[1],c=u[2],d=u[3],s=u[4],m=u[5],p=m.handleFieldChange,v=m.handleFieldDelete,h=m.handleFieldAdd,g=m.setDisplay,y=m.handletemp,C=(0,x.default)({allData:f,setData:g,title:"\u5217\u8868\u5b57\u6bb5",sections:[f.length||0],setSections:function(e){g(e[0].fields)},columns:[{title:"\u5b57\u6bb5",key:"name",render:function(e,n,a){return b.default.createElement(S.default,{value:e.name,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.apply(void 0,[a].concat(t))},model:t,disabled:"combo"===e.type})}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n){return b.default.createElement(b.default.Fragment,null,b.default.createElement("a",{onClick:function(){return v(n)}},"\u5220\u9664"))}}],footer:function(){return b.default.createElement("div",null,b.default.createElement(i.default,{onClick:h},"\u6dfb\u52a0\u4e00\u5217"),b.default.createElement(i.default,{style:{margin:5},onClick:y},"\u6dfb\u52a0\u7ec4\u5408\u5b57\u6bb5"))},expandedRowRender:function(e,t){return o(t)}}),w=(0,E.default)(C,1),O=w[0];return[O,f,c,d,s]}var T=(v={},(0,r.default)(v,D.VERSION_FIRST,R),(0,r.default)(v,D.VERSION_SECOND,V),v),z=T[D.CONFIG_VERSION];t.default=z},D27F:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("SePM");var r=l(n("PMX6"));n("vmZS");var u=l(n("NjVP"));n("6dnR");var i=l(n("CQJL")),o=l(n("qIgq")),f=a(n("q1tI")),c=l(n("OTll"));function d(e){var t=e.modelName,n=e.schemas,a=e.adminConfig,l=e.bsmSetting,d=(0,c.default)({modelName:t,schemas:n,adminConfig:a,bsmSetting:l}),s=(0,o.default)(d,6),m=s[0],p=s[1],v=s[2],h=s[3],g=s[4],y=s[5],E=(0,f.useState)(a[t].modalForm),b=(0,o.default)(E,2),C=b[0],S=b[1],w={formFields:p,formLayout:y,modalForm:C};function O(){var e=g();return w.formFields=e,w}function x(){v()}function D(){return h()}var N=f.default.createElement(f.default.Fragment,null,m,f.default.createElement(r.default,{title:"\u57fa\u672c\u8bbe\u7f6e",type:"inner"},f.default.createElement(u.default,{layout:"inline"},f.default.createElement(u.default.Item,{label:"\u8868\u5355\u754c\u9762"},f.default.createElement(i.default.Group,{value:C,onChange:function(e){return S(e.target.value)}},f.default.createElement(i.default,{value:!0},"\u5f39\u7a97\u7f16\u8f91"),f.default.createElement(i.default,{value:!1},"\u65b0\u9875\u9762\u7f16\u8f91"))))));return[N,w,x,O,D]}var s=d;t.default=s},Evl9:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("SePM");var r=l(n("PMX6"));n("vmZS");var u=l(n("NjVP"));n("6dnR");var i=l(n("CQJL"));n("QjdF");var o=l(n("U4Vl")),f=l(n("qIgq")),c=a(n("q1tI")),d=l(n("1n/C")),s=l(n("9fIt")),m=l(n("Q8IV")),p=l(n("seZw")),v=l(n("2DRO"));function h(e){var t=e.modelName,n=e.schemas,a=e.adminConfig,l=e.bsmSetting,h=(0,d.default)({modelName:t,schemas:n,adminConfig:a,bsmSetting:l}),g=(0,f.default)(h,4),y=g[0],E=g[1],b=g[2],C=g[3],S=(0,s.default)({modelName:t,schemas:n,adminConfig:a,bsmSetting:l}),w=(0,f.default)(S,5),O=w[0],x=w[1],D=w[2],N=w[3],I=w[4],A=(0,m.default)({modelName:t,schemas:n,adminConfig:a,bsmSetting:l}),k=(0,f.default)(A,4),_=k[0],F=k[1],P=k[2],j=k[3],M=(0,p.default)({modelName:t,schemas:n,adminConfig:a,bsmSetting:l}),R=(0,f.default)(M,4),V=R[0],T=R[1],z=R[2],q=R[3],W=(0,c.useState)(a[t].filterLayout||"default"),L=(0,f.default)(W,2),U=L[0],$=L[1],G=(0,v.default)({modelName:t,schemas:n,adminConfig:a}),Z=(0,f.default)(G,4),B=Z[0],Y=Z[1],J=Z[2],K=Z[3];function X(){D(),P(),z(),J(),b()}var H={display:x,filter:E,inlineActions:F,actions:T,tableActions:Y,sortable:N,filterLayout:U};function Q(){var e=j();H.inlineActions=e;var t=q();H.actions=t;var n=I();H.display=n;var a=C();H.filter=a;var l=K();return H.tableActions=l,H}var ee=c.default.createElement(c.default.Fragment,null,O,c.default.createElement(o.default,null),y,c.default.createElement("div",null,c.default.createElement(r.default,{type:"inner"},c.default.createElement(u.default,{layout:"inline"},c.default.createElement(u.default.Item,{label:"\u4f4d\u7f6e"},c.default.createElement(i.default.Group,{value:U,onChange:function(e){return $(e.target.value)}},c.default.createElement(i.default,{value:"default"},"\u9876\u90e8"),c.default.createElement(i.default,{value:"drawer"},"\u4fa7\u62c9")))))),c.default.createElement(o.default,null),_,c.default.createElement(o.default,null),V,c.default.createElement(o.default,null),B);return[ee,H,X,Q]}var g=h;t.default=g},LK96:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("SePM");var r=l(n("PMX6"));n("vmZS");var u=l(n("NjVP"));n("6dnR");var i=l(n("CQJL")),o=l(n("qIgq")),f=a(n("q1tI")),c=l(n("Ol5k"));function d(e){var t=e.modelName,n=e.schemas,a=e.adminConfig,l=e.bsmSetting,d=(0,c.default)({modelName:t,schemas:n,adminConfig:a,bsmSetting:l}),s=(0,o.default)(d,5),m=s[0],p=s[1],v=s[2],h=s[3],g=s[4],y=(0,f.useState)(a[t].modalDetail),E=(0,o.default)(y,2),b=E[0],C=E[1],S={detail:void 0,details:v,modalDetail:b},w=function(){var e=g();return S.details=e,S};function O(){h()}var x=f.default.createElement(f.default.Fragment,null,m,f.default.createElement(r.default,{title:"\u57fa\u672c\u8bbe\u7f6e",type:"inner"},f.default.createElement(u.default,{layout:"inline"},f.default.createElement(u.default.Item,{label:"\u8be6\u60c5\u754c\u9762"},f.default.createElement(i.default.Group,{value:!!b,onChange:function(e){return C(e.target.value)}},f.default.createElement(i.default,{value:!0},"\u5f39\u7a97"),f.default.createElement(i.default,{value:!1},"\u65b0\u9875\u9762"))))),p);return[x,S,O,w]}var s=d;t.default=s},MxUj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG_VERSION=t.VERSION_SECOND=t.VERSION_FIRST=void 0;var a="v1";t.VERSION_FIRST=a;var l="v2";t.VERSION_SECOND=l;var r=l;t.CONFIG_VERSION=r},OTll:function(e,t,n){"use strict";var a=n("g09b"),l=n("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.useFormFieldsEditorV2=W,t.default=void 0;var r=a(n("eHn4"));n("4X2C");var u=a(n("xvon"));n("eE3J");var i=a(n("GSZB"));n("eNCU");var o=a(n("pjJH"));n("QjdF");var f=a(n("U4Vl"));n("SePM");var c=a(n("PMX6"));n("Ahcs");var d=a(n("k0dM"));n("vc6j");var s=a(n("Q9CN"));n("UvA9");var m=a(n("u4G2"));n("vmZS");var p=a(n("NjVP"));n("yavW");var v,h,g=a(n("WuMn")),y=a(n("p0pE")),E=a(n("gWZ8")),b=a(n("d6i3")),C=a(n("1l/V")),S=a(n("qIgq")),w=l(n("q1tI")),O=a(n("4b23")),x=a(n("RsOY")),D=n("9Ndd"),N=a(n("MU2A")),I=n("VW+w"),A=a(n("O/S9")),k=n("jfUH"),F=n("mmaM"),P=a(n("umGZ")),j=l(n("cPjh")),M=a(n("hzhw")),R=n("MxUj"),V=a(n("U/ol")),T={group:"\u5206\u7ec4",tab:"\u6807\u7b7e",step:"\u5206\u6b65"};function z(e){var t=e.schemas,n=e.modelName,a=e.adminConfig,l=e.bsmSetting.staff_model,r=(0,w.useState)(_.cloneDeep(a[n].formFields)),u=(0,S.default)(r,2),i=u[0],o=u[1],f=(0,w.useState)([]),c=(0,S.default)(f,2),d=c[0],v=c[1],h=(0,w.useState)(!1),x=(0,S.default)(h,2),j=x[0],M=x[1],R=t[n].fields,T=(0,D.useFormWidgetNames)(),z=(0,D.useFormWidgetMap)(),q={},W=function(e,t){var n=[],a=[];e.forEach(function(e,t){var l=e;l.showIf&&(_.isArray(l.showIf)?l.showIf:[l.showIf]).forEach(function(e,l){if(_.isObject(e.value)){var r=R.find(function(t){return t.name===e.field}),u=new Promise(function(a){(0,F.queryContent)({model:r.ref,filters:[{field:(0,k.pkField)(r.ref),operator:"in",value:e.value}]}).then(function(e){var r=e.list;n.push([t,l,r]),a()})});a.push(u)}})});var l=e;_.isEmpty(a)?t&&t(l):Promise.all(a).then(function(){n.forEach(function(e){var t=(0,S.default)(e,3),n=t[0],a=t[1],r=t[2];l[n].showIf[a].value=r}),o(l),t&&t(l)})},L=function(e,t){var a=[],l=[];e.forEach(function(e,t){e.choicesFilter&&e.choicesFilter.forEach(function(r,u){if(_.isArray(r.value)){var i=(0,k.getSchemaField)(n,"".concat(e.name,".").concat(r.field)),o=new Promise(function(){var e=(0,C.default)(b.default.mark(function e(n){return b.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:(0,F.queryContent)({model:i.ref,filters:[{field:(0,k.pkField)(i.ref),operator:"in",value:r.value}]}).then(function(e){var l=e.list;a.push([t,u,l]),n()});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());l.push(o)}})});var r=_.cloneDeep(e);_.isEmpty(l)?t&&t(r):Promise.all(l).then(function(){a.forEach(function(e){var t=(0,S.default)(e,3),n=t[0],a=t[1],l=t[2];r[n].choicesFilter[a].value=l}),o(r),t&&t(r)})};function U(){o(a[n].formFields)}function $(){return!0}function G(){o([].concat((0,E.default)(i),[{params:{}}]))}function Z(e){return{name:e,params:{}}}function B(e){var t=e.map(Z);o([].concat((0,E.default)(i),(0,E.default)(t)))}function Y(e){var t=_.cloneDeep(i);t.splice(e,1),o(t)}function J(e,t){var n=_.cloneDeep(i);n[e]={name:t,params:{}},o(n)}function K(e,t,n){var a=_.cloneDeep(i);a[e][n]=t,o(a)}function X(e,t,n){var a=_.cloneDeep(i);a[e].params[t]=n,o(a)}function H(e,a){var l=_.cloneDeep(i);if(a){l[e].widget=a;var r=t[n].fields.find(function(t){return t.name===l[e].name});if(["TreeSelect","Cascader"].includes(a)){var u=t[r.ref].fields.find(function(e){return"ref"===e.type&&e.ref===r.ref});u&&(l[e].params.parent=u.name)}if(["Gallery"].includes(a)){var f=t[r.ref].fields.find(function(e){return["string","text","image","file"].includes(e.type)});f&&(l[e].params.urlField=f.name)}}else delete l[e].widget;o(l)}function Q(){var e=_.cloneDeep(i).filter(function(e){return e.name}).map(function(e){var t=e;return t.showIf&&(t.showIf=t.showIf.filter(function(e){return e.field&&e.operator&&void 0!==e.value}).map(function(e){var t=(0,y.default)({},e);if(_.isObject(t.value)){var n=R.find(function(t){return t.name===e.field});_.isArray(t.value)&&(t.value=t.value.map(function(e){return(0,k.pk)(e,n.ref)}))}return t}),t.choicesFilter&&(t.choicesFilter=t.choicesFilter.filter(function(e){return e.field&&e.operator&&void 0!==e.value}).map(function(t){var a=(0,y.default)({},t);if(_.isObject(a.value)){var l=(0,k.getSchemaField)(n,"".concat(e.name,".").concat(t.field));_.isArray(a.value)&&(a.value=a.value.map(function(e){return(0,k.pk)(e,l.ref)}))}return a}))),_.isEmpty(e.groups)||(t.groups=t.groups.filter(function(e){return e}).map(function(e){return e.id||e})),e.id||(t.id=(0,O.default)(6)),t});return e}(0,w.useEffect)(function(){if(l){var e=[];t[n].fields.forEach(function(t){t.ref===l&&e.push(t)}),v(e)}W(i,function(e){return L(e,function(){return M(!0)})})},[]);var ee={handleAdd:G,handleDelete:Y,setFormFields:o,changeFieldName:J,addFields:B,getField:Z};function te(e){var r,u;if(void 0===e)return null;var f=i[e];if(!f.name)return null;var c=R.find(function(e){return e.name===f.name}),v=f.name&&(0,I.formFieldsPreprocess)([_.cloneDeep(f)],[_.cloneDeep(c)])[0].widget;return w.default.createElement(p.default,{labelCol:{span:5},wrapperCol:{span:19}},w.default.createElement(p.default.Item,{label:"\u5b57\u6bb5"},w.default.createElement(g.default,{value:f.name,onChange:function(t){return J(e,t)},showSearch:!0,filterOption:function(e,t){var n=t.props,a=n.value,l=n.children,r=e.toLowerCase();return a.replace(/_/g,"").toLowerCase().includes(r)||l.toLowerCase().includes(r)}},R.map(function(e){return w.default.createElement(g.default.Option,{value:e.name,disabled:i.map(function(e){return e.name}).includes(e.name)&&e.name!==f.name},e.displayName)}))),f.name&&w.default.createElement(p.default.Item,{label:"\u7ec4\u4ef6"},w.default.createElement(g.default,{value:f.widget||null,onChange:function(t){return H(e,t)}},w.default.createElement(g.default.Option,{value:null},"\u9ed8\u8ba4\uff08",T[D.formWidgetMapping[c.type]]||D.formWidgetMapping[c.type],"\uff09"),_.uniq(z[c.type].concat(c.choices?["Select"]:[])).map(function(e){return w.default.createElement(g.default.Option,{value:e,disabled:q[e]},T[e]||e)}))),["TreeSelect","Cascader"].includes(v)&&w.default.createElement(p.default.Item,{label:"\u7236\u7ea7\u5b57\u6bb5",help:"\u8fd9\u4e2a\u5b57\u6bb5\u7528\u4e8e\u6307\u5411\u7236\u7ea7\u8bb0\u5f55"},w.default.createElement(g.default,{value:f.params.parent,onChange:function(t){return X(e,"parent",t)}},t[c.ref].fields.filter(function(e){return"ref"===e.type&&e.ref===c.ref}).map(function(e){return w.default.createElement(g.default.Option,{value:e.name},e.displayName)}))),["GroupCascader"].includes(v)&&w.default.createElement(p.default.Item,{label:"\u5206\u7ec4\u5b57\u6bb5",required:!0},w.default.createElement(N.default,{value:f.params.groupBy,model:c.ref,onChange:function(t){return X(e,"groupBy",t)},fieldFilter:function(e){return"ref"===e.type}})),["Gallery"].includes(v)&&w.default.createElement(p.default.Item,{label:"\u56fe\u7247\u5730\u5740\u5b57\u6bb5",help:"\u8fd9\u4e2a\u5b57\u6bb5\u7528\u4e8e\u5b58\u653e\u56fe\u7247\u94fe\u63a5\u5730\u5740"},w.default.createElement(g.default,{value:f.params.urlField,onChange:function(t){return X(e,"urlField",t)}},t[c.ref].fields.filter(function(e){return["string","text","image","file"].includes(e.type)}).map(function(e){return w.default.createElement(g.default.Option,{value:e.name},e.displayName)}))),[("InlineForm"===v||"InnerTable"===v||"Select"===v&&"mref"===c.type)&&w.default.createElement(p.default.Item,{label:"\u5141\u8bb8\u65b0\u589e"},w.default.createElement(m.default,{checked:f.params.canAdd,onChange:function(t){return X(e,"canAdd",t.target.checked)}}))],"Select"===v&&["ref","mref"].includes(c.type)&&w.default.createElement(p.default.Item,{label:"\u9009\u9879\u4e2a\u6570",help:"\u4e0b\u62c9\u9009\u62e9\u6846\u9009\u62e9\u65f6\u663e\u793a\u7684\u4e2a\u6570"},w.default.createElement(s.default,{min:1,placeholder:"\u9ed8\u8ba4\u4e3a7",value:f.params.optionSize,onChange:function(t){return X(e,"optionSize",t)}})),w.default.createElement("div",{className:V.default.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),w.default.createElement(P.default,{groupsValue:null!==(r=null===(u=f.groups)||void 0===u?void 0:u.filter(function(e){return!("number"===typeof e)}))&&void 0!==r?r:[],groupsOnChange:function(t){var n=_.cloneDeep(i);n[e].groups=t,o((0,E.default)(n))},userValue:f.userField,userOnChange:function(t){var n=_.cloneDeep(i);n[e].userField=t,o((0,E.default)(n))},staffModelFields:d,staffModel:l,defauldGroupValue:a[n].formFields[e]}),w.default.createElement(p.default.Item,{label:"\u6ee1\u8db3\u6761\u4ef6\u663e\u793a"},w.default.createElement(A.default,{fields:R,onChange:function(t){return K(e,t,"showIf")},value:f.showIf,disabledField:function(e){return f.showIf.filter(function(e){return e.field}).map(function(e){return e.field}).includes(e.name)}})),[!_.isEmpty(c)&&["ref","mref"].includes(c.type)&&w.default.createElement(p.default.Item,{label:"\u8fc7\u6ee4\u6761\u4ef6\uff1a"},w.default.createElement(A.default,{fields:t[n].fields,onChange:function(t){return K(e,t,"choicesFilter")},value:f.choicesFilter,disabledFilte:f.choicesFilter}))])}return[te,i,U,$,Q,ee,j]}function q(e){var t=e.schemas,n=e.modelName,a=e.adminConfig,l=e.bsmSetting,r=(0,w.useState)(String(0)),u=(0,S.default)(r,2),i=u[0],o=u[1],s=z({schemas:t,modelName:n,adminConfig:a,bsmSetting:l}),m=(0,S.default)(s,6),p=m[0],v=m[1],h=m[2],g=m[3],y=m[4],E=m[5],b=(0,M.default)({modelName:n,schemas:t,adminConfig:a,formFields:v}),C=(0,S.default)(b,3),O=C[0],x=C[1],D=C[2],N=E.handleAdd,I=E.handleDelete,A=t[n].fields;function k(){h(),D()}var _=w.default.createElement(w.default.Fragment,null,w.default.createElement(c.default,{title:"\u8868\u5355\u5b57\u6bb5",type:"inner"},w.default.createElement(d.default,{tabBarStyle:{minWidth:48},activeKey:i,tabPosition:"left",type:"editable-card",onChange:o,onEdit:function(e,t){switch(t){case"add":N(),o(String(v.length));break;case"remove":I(e);break;default:}}},v.map(function(e,t){var n=A.find(function(t){return t.name===e.name});return w.default.createElement(d.default.TabPane,{tab:(n||{}).displayName||"\u5b57\u6bb5".concat(t+1),key:t,closable:!n||!n.required||v.filter(function(t){return t.name===e.name}).length>=2},p(t))}))),w.default.createElement(f.default,null),O);return[_,v,k,g,y,x]}function W(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=e.bsmSetting,r=z({schemas:a,modelName:t,adminConfig:n,bsmSetting:l}),f=(0,S.default)(r,7),c=f[0],d=f[1],s=f[2],m=f[3],p=f[4],v=f[5],g=f[6],y=(0,w.useState)([d.length]),b=(0,S.default)(y,2),C=b[0],O=b[1],D=(0,w.useState)([]),I=(0,S.default)(D,2),A=I[0],k=I[1],F=v.handleDelete,P=v.setFormFields,M=v.changeFieldName,R=v.getField;function V(e){var t=0,n=e.length+C[h];C.forEach(function(e,n){n<=h&&(t+=e)});var a=e.map(R),l=(0,x.default)(d,{$splice:[[t,0].concat((0,E.default)(a))]});P(l),O((0,x.default)(C,{$splice:[[h,1,n]]}))}var q,W=(0,j.useSelectFields)({modelName:t,schemas:a,onOk:function(){return V($)},fieldDisabled:function(e){return d.map(function(e){return e.name}).includes(e.name)},expand:!1}),L=(0,S.default)(W,3),U=L[0],$=L[1],G=L[2],Z=n[t].formLayout,B=(0,w.useState)((null===Z||void 0===Z?void 0:Z.style)||"default"),Y=(0,S.default)(B,2),J=Y[0],K=Y[1];function X(e,t){F((0,j.getRealIndex)(e,t,C)),O((0,x.default)(C,{$splice:[[t,1,C[t]-1]]}))}function H(e){var t=C.reduce(function(t,n,a){return a<e?t+n:t},0);P((0,x.default)(d,{$splice:[[t,C[e]]]})),O((0,x.default)(C,{$splice:[[e,1]]})),k((0,x.default)(A,{$splice:[[e,1]]}))}function Q(e,t,n){M((0,j.getRealIndex)(e,t,C),n)}function ee(e,t){k((0,x.default)(A,{$splice:[[e,1,t]]}))}function te(e){K(e),"default"===e&&(O([d.length]),k([A[0]]))}function ne(e){return 0!==e&&w.default.createElement(o.default,{icon:"delete",onClick:function(){return H(e)}},"\u5220\u9664")}function ae(e){var t=_.cloneDeep(C);t.splice(e,0,0),O(t),k((0,x.default)(A,{$splice:[[e,0,null]]}))}var le=(0,j.default)({sections:C,setSections:O,allData:d,setData:P,title:"\u8868\u5355\u5b57\u6bb5",modalView:U,columns:[{title:"\u5b57\u6bb5",key:"name",render:function(e,n,a,l){return w.default.createElement(N.default,{value:e.name,onChange:function(e){return Q(a,l,e)},model:t})}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n,a){return w.default.createElement(w.default.Fragment,null,w.default.createElement("a",{onClick:function(){return X(n,a)}},"\u5220\u9664"))}}],footer:function(e){return w.default.createElement(o.default,{onClick:function(){h=e,G()}},"\u6dfb\u52a0\u5b57\u6bb5")},expandedRowRender:function(e,t,n,a,l){return c((0,j.getRealIndex)(t,l,C))},addAndDeleteView:"default"!==J?ne:null,addAndWidget:function(e){return"default"!==J&&w.default.createElement("div",null,w.default.createElement(o.default,{type:"dashed",onClick:function(){return ae(e+1)},block:!0},w.default.createElement(i.default,{type:"plus"})))},styleView:function(){return w.default.createElement(j.StyleView,{onChange:te,value:J,layouts:T})},tableTitle:function(e){return"default"!==J&&w.default.createElement("div",null,"".concat(T[J],"\u540d\u79f0"),"\xa0\xa0",w.default.createElement(u.default,{style:{width:100},value:A[e],onChange:function(t){return ee(e,t.target.value)},placeholder:"\u7b2c".concat(e+1,"\u7ec4")}))}}),re=(0,S.default)(le,1),ue=re[0];function ie(){if(Z&&"default"!==Z.style&&!_.isEmpty(Z.sections)){var e=[],t=[],n=[];Z.sections.forEach(function(a){var l=[];a.fields.forEach(function(e){var t=d.find(function(t){return t.name===e});t&&l.push(t)}),n.push.apply(n,l),t.push(l.length),a.title&&e.push(a.title)}),P(n),O(t),k(e)}}if((0,w.useEffect)(function(){g&&ie()},[g]),"default"!==J){q={style:J,sections:[]};var oe=0;C.forEach(function(e,t){e&&(q.sections.push({title:A[t],fields:d.slice(oe,oe+e).map(function(e){return e.name})}),oe+=e)})}else q=void 0;function fe(){s(),ie()}return[ue,d,fe,m,p,q]}var L=(v={},(0,r.default)(v,R.VERSION_FIRST,q),(0,r.default)(v,R.VERSION_SECOND,W),v),U=L[R.CONFIG_VERSION];t.default=U},Ol5k:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var r=l(n("p0pE"));n("Ahcs");var u=l(n("k0dM"));n("52nx");var i=l(n("7bDm"));n("4X2C");var o=l(n("xvon")),f=l(n("qIgq")),c=l(n("gWZ8")),d=a(n("q1tI")),s=n("Ty5D"),m=l(n("4b23")),p=n("jfUH"),v=n("wiuW"),h=l(n("+dfd"));function g(e,t){e(t)}var y=_.debounce(g,100);function E(e){var t,n=e.modelName,a=e.adminConfig,l=e.schemas,g=e.bsmSetting,E=(0,s.useRouteMatch)(),b=E.params.key,C=function(){return(0,c.default)(a[n].details||[])},S=(0,d.useState)(C),w=(0,f.default)(S,2),O=w[0],x=w[1],D=(0,d.useState)(),N=(0,f.default)(D,2),I=N[0],A=N[1],k=(0,d.useState)(),F=(0,f.default)(k,2),P=F[0],j=F[1],M=(0,d.useState)(b||(null===(t=O[0])||void 0===t?void 0:t.key)),R=(0,f.default)(M,2),V=R[0],T=R[1],z=d.default.createElement("div",null,d.default.createElement(i.default,{title:"\u6dfb\u52a0\u6807\u7b7e",visible:I,okButtonProps:{disabled:!P},destroyOnClose:!0,onOk:function(){var e=O,t=(0,m.default)(6);e.push({key:t,sections:[],title:P,style:"group"}),x(e),T(t),A(!1)},onCancel:function(){return A(!1)}},d.default.createElement("span",null,"\u6807\u7b7e\u540d\u79f0\uff1a"),d.default.createElement(o.default,{onChange:function(e){return y(j,e.target.value)},style:{width:300}})),d.default.createElement(u.default,{type:"editable-card",activeKey:V,onChange:function(e){return T(e)},onEdit:function(e,t){if("add"===t&&A(!0),"remove"===t){var n,a,l=O.filter(function(t,n){return t.key!==e||(a=n-1,a<0&&(a=0),!1)});e===V&&T(null===(n=l[a])||void 0===n?void 0:n.key),x(l)}}},O.map(function(e,t){return d.default.createElement(u.default.TabPane,{tab:e.title||"\u8be6\u60c5".concat(t+1),key:e.key,closable:1!==O.length},d.default.createElement(h.default,{modelName:n,schemas:l,detailValue:e,bsmSetting:g,onChange:function(e){var n=O;n[t]=e,x(n)}}))})));function q(){x(C())}function W(e){var t=e;function a(e){return e.map(function(e){return _.isString(e)?{name:e}:e}).filter(function(e){return e.name}).map(function(e){var t=(0,r.default)({},e);return t.showIf&&(t.showIf=(0,p.mapShowIfID)(e.showIf,n)),_.isEmpty(e.groups)||(t.groups=t.groups.filter(function(e){return e}).map(function(e){return e.id||e})),e.id||(t.id=(0,m.default)(6)),t})}return"default"!==e.style&&e.sections?t.sections=t.sections.filter(function(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.widget)in v.detailComponent||!_.isEmpty(e.fields)}).map(function(e){var t,n=e;return(null===(t=e.style)||void 0===t?void 0:t.widget)in v.detailComponent?n.fields=[]:n.fields=a(n.fields),n}):t.fields=a(t.fields),t}function L(){return O.map(function(e){return W(e)})}return[z,void 0,O,q,L]}},OnYD:function(e,t,n){},Q8IV:function(e,t,n){"use strict";var a=n("g09b"),l=n("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.useInlineActionsEditorV2=M,t.default=void 0;var r=a(n("eHn4"));n("52nx");var u=a(n("7bDm"));n("SePM");var i=a(n("PMX6"));n("Ahcs");var o=a(n("k0dM"));n("eNCU");var f=a(n("pjJH"));n("eE3J");var c=a(n("GSZB")),d=a(n("jehZ"));n("h/qz");var s=a(n("GmeQ"));n("4X2C");var m=a(n("xvon"));n("vmZS");var p=a(n("NjVP"));n("yavW");var v,h=a(n("WuMn")),g=a(n("p0pE")),y=a(n("gWZ8")),E=a(n("qIgq")),b=l(n("q1tI")),C=a(n("4b23")),S=a(n("MU2A")),w=n("556t"),O=a(n("O/S9")),x=a(n("umGZ")),D=a(n("cPjh")),N=n("MxUj"),I=a(n("U/ol")),A=n("9Ndd"),k=["ref","mref","bref"];function F(e){var t={action:e,title:w.actionTypes[e],params:{},showIf:[],groups:[],id:(0,C.default)(6)};return["partEdit","nowEdit"].includes(e)&&(t.params.fields=[]),"partEdit"===e&&(t.params.editFields=[]),["refEdit","refDetail"].includes(e)&&(t.showInModal=!0),t}function P(e){var t=e.modelName,n=e.schemas,a=e.adminConfig,l=e.bsmSetting.staff_model,r=(0,b.useState)(a[t].inlineActions),u=(0,E.default)(r,2),i=u[0],o=u[1],v=(0,b.useState)([]),D=(0,E.default)(v,2),N=D[0],P=D[1];function j(){o(a[t].inlineActions)}function M(){o([].concat((0,y.default)(i),[{}]))}function R(e){var t=e.map(F);o([].concat((0,y.default)(i),(0,y.default)(t)))}function V(e){var t=_.cloneDeep(i);t.splice(e,1),o(t)}function T(e,t){var n=_.cloneDeep(i);n[e]=F(t),o(n)}function z(e,t){var n=_.cloneDeep(i);n[e].title=t,o(n)}function q(e,t,n){var a=_.cloneDeep(i);a[e].params[t]=n,o(a)}function W(){var e=_.cloneDeep(i);return e.filter(function(e){var t=!!e.action;return w.refActions.includes(e.action)&&(t=t&&!(!e.params.field&&!e.field)),t}).map(function(e){var t,n,a=(0,g.default)({},e);["partEdit","nowEdit"].includes(e.action)&&(a.params.fields=null===(t=a.params.fields)||void 0===t?void 0:t.filter(function(e){return e.name&&void 0!==e.value}),a.showIf=null===(n=a.showIf)||void 0===n?void 0:n.filter(function(e){return e.field&&e.operator&&void 0!==e.value}));return _.isEmpty(e.groups)||(a.groups=a.groups.filter(function(e){return e}).map(function(e){return e.id||e})),e.id||(a.id=(0,C.default)(6)),a})}(0,b.useEffect)(function(){var e=_.cloneDeep(a[t].inlineActions);if(e.forEach(function(e){_.isObject(e.showIf)&&!_.isArray(e.showIf)&&(e.showIf=[e.showIf])}),l){var r=[];n[t].fields.forEach(function(e){e.ref===l&&r.push(e)}),P(r)}var u=new Set;(a[t].inlineActions||[]).forEach(function(e){_.isEmpty(e.groups)||e.groups.forEach(function(e){return u.add(e)})}),o(e)},[]);var L={handleParamsChange:q,handleTitleChange:z,handleDelete:V,handleAdd:M,setInlineActions:o,addActions:R};function U(e){var r,u;if(void 0===e)return null;var v=i[e];return b.default.createElement(p.default,{labelCol:{span:6},wrapperCol:{span:8}},b.default.createElement(p.default.Item,{label:"\u64cd\u4f5c\u7c7b\u578b"},b.default.createElement(h.default,{value:v.action,onChange:function(t){return T(e,t)}},_.map(w.actionTypes,function(e,t){return b.default.createElement(h.default.Option,{value:t},e)}))),b.default.createElement(p.default.Item,{label:"\u64cd\u4f5c\u540d\u79f0"},b.default.createElement(m.default,{value:v.title,onChange:function(t){return z(e,t.target.value)}})),"action"===v.action&&b.default.createElement(b.default.Fragment,null,b.default.createElement(p.default.Item,{label:"\u51fd\u6570\u540d"},b.default.createElement(m.default,{value:v.params.action,onChange:function(t){return q(e,"action",t.target.value)}})),b.default.createElement(p.default.Item,{label:"\u53c2\u6570"},b.default.createElement(m.default.TextArea,{defaultValue:JSON.stringify(v.params.payload),autosize:{minRows:5},onChange:function(t){try{q(e,"payload",JSON.parse(t.target.value))}catch(e){console.error(e)}}}),b.default.createElement("p",{style:{color:"grey"}},"\u53c2\u6570\u683c\u5f0f\u4e3aJSON object"))),"info"===v.action&&b.default.createElement(b.default.Fragment,null,b.default.createElement(p.default.Item,{label:"\u6807\u9898"},b.default.createElement(m.default,{value:v.params.title,onChange:function(t){return q(e,"title",t.target.value)}})),b.default.createElement(p.default.Item,{label:"\u6b63\u6587"},b.default.createElement(m.default,{value:v.params.content,onChange:function(t){return q(e,"content",t.target.value)}}))),"link"===v.action&&b.default.createElement(b.default.Fragment,null,b.default.createElement(p.default.Item,{label:"\u7f51\u5740"},b.default.createElement(m.default,{value:v.params.link,onChange:function(t){return q(e,"link",t.target.value)}}))),w.refActions.includes(v.action)&&b.default.createElement(b.default.Fragment,null,b.default.createElement(p.default.Item,{label:"\u5173\u8054\u5b57\u6bb5"},b.default.createElement(S.default,{value:v.params.field||v.field,onChange:function(t){var n=_.cloneDeep(i);n[e].params.field=t,o(n)},layer:1,fieldFilter:function(e){return"refAdd"===v.action?["mref","bref"].includes(e.type):"ref"===e.type},model:t})),"refAdd"!==v.action&&b.default.createElement(p.default.Item,{label:"\u5f39\u7a97\u663e\u793a"},b.default.createElement(s.default,{checked:v.showInModal,onChange:function(t){var n=_.cloneDeep(i);n[e].showInModal=t,o(n)}}))),["partEdit","nowEdit"].includes(v.action)&&b.default.createElement(b.default.Fragment,null,"partEdit"===v.action&&b.default.createElement(p.default.Item,{label:"\u53ef\u7f16\u8f91\u5b57\u6bb5"},b.default.createElement(h.default,{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u6dfb\u52a0\u53ef\u7f16\u8f91\u5b57\u6bb5",value:v.params.editFields,onChange:function(t){var n=_.cloneDeep(i);n[e].params.editFields=t,o((0,y.default)(n))}},n[t].fields.map(function(e){return b.default.createElement(h.default.Option,{key:e.name},e.displayName)}))),b.default.createElement(p.default.Item,{label:"\u8bbe\u7f6e\u5c5e\u6027\u503c",wrapperCol:{span:10}},b.default.createElement("div",null,(v.params.fields||[]).map(function(a,l){var r=A.bsmWidgets.TextInput,u={};if(a.name){var f=n[t].fields.find(function(e){return e.name===a.name});if(!f)return null;u.field=f,r=A.bsmWidgets[A.formWidgetMapping[f.type]]}return b.default.createElement("div",{style:{display:"flex"}},b.default.createElement("div",{style:{marginRight:8}},b.default.createElement(S.default,{value:a.name,onChange:function(t){var n=_.cloneDeep(i);n[e].params.fields[l].name=t,n[e].params.fields[l].value=void 0,o(n)},fieldDisable:function(e){return v.params.fields.map(function(e){return e.name}).includes(e.name)},fieldFilter:function(e){return!k.includes(e.type)&&!e.primaryKey},model:t})),b.default.createElement("div",{style:{marginRight:8}},b.default.createElement(r,(0,d.default)({value:a.value,onChange:function(t){var n=_.cloneDeep(i);n[e].params.fields[l].value=t,o(n)}},u))),b.default.createElement("div",null,b.default.createElement("a",{onClick:function(){var t=_.cloneDeep(i);t[e].params.fields=t[e].params.fields.filter(function(e,t){return t!==l}),o(t)},style:{marginLeft:8}},b.default.createElement(c.default,{type:"delete",style:{fontSize:20}}))))})),b.default.createElement("div",null,b.default.createElement(f.default,{type:"dashed",style:{width:"100%"},onClick:function(){var t=_.cloneDeep(i);t[e].params.fields.push({}),o(t)}},b.default.createElement(c.default,{type:"plus"}))))),b.default.createElement("div",{className:I.default.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),b.default.createElement(x.default,{groupsValue:null!==(r=null===(u=v.groups)||void 0===u?void 0:u.filter(function(e){return!("number"===typeof e)}))&&void 0!==r?r:[],groupsOnChange:function(t){var n=_.cloneDeep(i);n[e].groups=t,o((0,y.default)(n))},userValue:v.userField,userOnChange:function(t){var n=_.cloneDeep(i);n[e].userField=t,o((0,y.default)(n))},staffModelFields:N,staffModel:l,defauldGroupValue:a[t].inlineActions[e]}),b.default.createElement(p.default.Item,{label:"\u6ee1\u8db3\u6761\u4ef6\u663e\u793a",wrapperCol:{span:15}},b.default.createElement("div",null,b.default.createElement(O.default,{fields:n[t].fields,value:v.showIf||[],onChange:function(t){var n=_.cloneDeep(i);n[e].showIf=t,o(n)},disabledField:function(e){return v.showIf.map(function(e){return e.field}).filter(function(e){return e}).includes(e.name)}}))))}return[U,i,j,W,L]}function j(e){var t=e.modelName,n=e.schemas,a=e.adminConfig,l=e.bsmSetting,r=(0,b.useState)(String(0)),u=(0,E.default)(r,2),f=u[0],c=u[1],d=P({modelName:t,schemas:n,adminConfig:a,bsmSetting:l}),s=(0,E.default)(d,5),m=s[0],p=s[1],v=s[2],h=s[3],g=s[4],y=g.handleAdd,C=g.handleDelete,S=b.default.createElement(i.default,{title:"\u64cd\u4f5c\u9879",type:"inner"},b.default.createElement(o.default,{tabBarStyle:{minWidth:48},activeKey:f,tabPosition:"left",type:"editable-card",onChange:c,onEdit:function(e,t){switch(t){case"add":y();break;case"remove":C(e);break;default:}}},p.map(function(e,t){return b.default.createElement(o.default.TabPane,{tab:e.title,key:t},m(t))})));return[S,p,v,h]}function M(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=e.bsmSetting,r=P({modelName:t,schemas:a,adminConfig:n,bsmSetting:l}),i=(0,E.default)(r,5),o=i[0],c=i[1],d=i[2],s=i[3],m=i[4],v=(0,b.useState)([]),g=(0,E.default)(v,2),y=g[0],C=g[1],S=(0,b.useState)(!1),O=(0,E.default)(S,2),x=O[0],N=O[1],I=m.addActions,A=m.handleDelete,k=m.setInlineActions,_=(0,D.default)({allData:c,setData:k,sections:[c.length||0],title:"\u64cd\u4f5c\u9879",setSections:function(e){k(e[0].fields)},columns:[{title:"\u64cd\u4f5c\u9879",key:"name",render:function(e){return e.title||w.actionTypes[e.action]}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n){return b.default.createElement(b.default.Fragment,null,b.default.createElement("a",{onClick:function(){return A(n)}},"\u5220\u9664"))}}],footer:function(){return b.default.createElement(f.default,{onClick:function(){return N(!0)}},"\u6dfb\u52a0\u64cd\u4f5c\u9879")},expandedRowRender:function(e,t){return o(t)}}),F=(0,E.default)(_,1),j=F[0];function M(){I(y),N(!1)}function R(){N(!1),C([])}var V=b.default.createElement("div",null,b.default.createElement(p.default.Item,{label:"\u9009\u62e9\u7c7b\u578b",labelCol:{span:6},wrapperCol:{span:18}},b.default.createElement(h.default,{mode:"multiple",defaultValue:[],value:y,onChange:C,style:{minWidth:160}},Object.keys(w.actionTypes).map(function(e,t){return b.default.createElement(h.default.Option,{value:e,key:"".concat(e,"__").concat(t+1)},w.actionTypes[e])})))),T=b.default.createElement(b.default.Fragment,null,b.default.createElement(u.default,{title:"\u6dfb\u52a0\u64cd\u4f5c\u9879",visible:x,onOk:M,onCancel:function(){return N(!1)},afterClose:R,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},V),j);return[T,c,d,s]}var R=(v={},(0,r.default)(v,N.VERSION_FIRST,j),(0,r.default)(v,N.VERSION_SECOND,M),v),V=R[N.CONFIG_VERSION];t.default=V},RsOY:function(e,t,n){"use strict";(function(n){function a(e){return"object"!==typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var l="object"===typeof n&&!0;function r(e,t){if(!e){if(l)throw new Error("Invariant failed");throw new Error(t())}}t.invariant=r;var u=Object.prototype.hasOwnProperty,i=Array.prototype.splice,o=Object.prototype.toString;function f(e){return o.call(e).slice(8,-1)}var c=Object.assign||function(e,t){return d(t).forEach(function(n){u.call(t,n)&&(e[n]=t[n])}),e},d="function"===typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function s(e){return Array.isArray(e)?c(e.constructor(e.length),e):"Map"===f(e)?new Map(e):"Set"===f(e)?new Set(e):e&&"object"===typeof e?c(Object.create(Object.getPrototypeOf(e)),e):e}var m=function(){function e(){this.commands=c({},p),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var n=this,a="function"===typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(a)||r(!Array.isArray(a),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),r("object"===typeof a&&null!==a,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(n.commands).join(", ")+"."});var l=e;return d(a).forEach(function(t){if(u.call(n.commands,t)){var r=e===l;l=n.commands[t](a[t],l,a,e),r&&n.isEquals(l,e)&&(l=e)}else{var i="Map"===f(e)?n.update(e.get(t),a[t]):n.update(e[t],a[t]),o="Map"===f(l)?l.get(t):l[t];n.isEquals(i,o)&&("undefined"!==typeof i||u.call(e,t))||(l===e&&(l=s(e)),"Map"===f(l)?l.set(t,i):l[t]=i)}}),l},e}();t.Context=m;var p={$push:function(e,t,n){return h(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return h(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,a){return y(t,n),e.forEach(function(e){E(e),t===a&&e.length&&(t=s(a)),i.apply(t,e)}),t},$set:function(e,t,n){return C(n),e},$toggle:function(e,t){g(e,"$toggle");var n=e.length?s(t):t;return e.forEach(function(e){n[e]=!t[e]}),n},$unset:function(e,t,n,a){return g(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===a&&(t=s(a)),delete t[e])}),t},$add:function(e,t,n,a){return w(t,"$add"),g(e,"$add"),"Map"===f(t)?e.forEach(function(e){var n=e[0],l=e[1];t===a&&t.get(n)!==l&&(t=s(a)),t.set(n,l)}):e.forEach(function(e){t!==a||t.has(e)||(t=s(a)),t.add(e)}),t},$remove:function(e,t,n,a){return w(t,"$remove"),g(e,"$remove"),e.forEach(function(e){t===a&&t.has(e)&&(t=s(a)),t.delete(e)}),t},$merge:function(e,t,n,a){return S(t,e),d(e).forEach(function(n){e[n]!==t[n]&&(t===a&&(t=s(a)),t[n]=e[n])}),t},$apply:function(e,t){return b(e),e(t)}},v=new m;function h(e,t,n){r(Array.isArray(e),function(){return"update(): expected target of "+a(n)+" to be an array; got "+a(e)+"."}),g(t[n],n)}function g(e,t){r(Array.isArray(e),function(){return"update(): expected spec of "+a(t)+" to be an array; got "+a(e)+". Did you forget to wrap your parameter in an array?"})}function y(e,t){r(Array.isArray(e),function(){return"Expected $splice target to be an array; got "+a(e)}),E(t.$splice)}function E(e){r(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got "+a(e)+". Did you forget to wrap your parameters in an array?"})}function b(e){r("function"===typeof e,function(){return"update(): expected spec of $apply to be a function; got "+a(e)+"."})}function C(e){r(1===Object.keys(e).length,function(){return"Cannot have more than one key in an object with $set"})}function S(e,t){r(t&&"object"===typeof t,function(){return"update(): $merge expects a spec of type 'object'; got "+a(t)}),r(e&&"object"===typeof e,function(){return"update(): $merge expects a target of type 'object'; got "+a(e)})}function w(e,t){var n=f(e);r("Map"===n||"Set"===n,function(){return"update(): "+a(t)+" expects a target of type Set or Map; got "+a(n)})}t.isEquals=v.update.isEquals,t.extend=v.extend,t.default=v.update,t.default.default=e.exports=c(t.default,t)}).call(this,n("Q2Ig"))},SWtE:function(e,t,n){},"U/ol":function(e,t,n){e.exports={divider:"antd-pro-bsm-pages-config-editor-inline-actions-editor-divider"}},"Va/H":function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("cW/2");var r=l(n("RtDF")),u=l(n("gWZ8")),i=l(n("qIgq")),o=a(n("q1tI")),f=n("jfUH");function c(e){var t=e.modelName,n=e.onChange,a=e.value,l=(0,f.useSchemas)(),c=(0,o.useState)([]),d=(0,i.default)(c,2),s=d[0],m=d[1],p=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l[t].fields.map(function(t){var a=t.ref,l=n.map(function(e){return e.name}).join("."),i=[].concat((0,u.default)(n),[t]),f=i.map(function(e){return e.name}).join("."),c=i.map(function(e){return e.displayName}).join(".");return o.default.createElement(r.default.TreeNode,{displayName:c,title:t.displayName,value:f,key:f},(!n.length||s.includes(l))&&a&&e(a,i))})},v=function(e){return(0,f.getFieldsFromSchemaByPath)(l,e,t).map(function(e){return e.displayName}).join(".")};return o.default.createElement(r.default,{treeExpandedKeys:s,onTreeExpand:m,treeDefaultExpandAll:!0,onChange:function(e){return n(e.map(function(e){return e.value}))},value:a&&a.map(function(e){return{label:v(e),value:e}}),showCheckedStrategy:r.default.SHOW_ALL,treeNodeLabelProp:"displayName",treeCheckable:!0,treeCheckStrictly:!0,style:{width:"100%"}},p(t))}var d=c;t.default=d},cPjh:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.getRealIndex=D,t.StyleView=j,t.AddView=M,t.useSelectFields=V,t.default=void 0,n("52nx");var r=l(n("7bDm"));n("yavW");var u=l(n("WuMn"));n("vmZS");var i=l(n("NjVP")),o=l(n("qIgq"));n("eNCU");var f=l(n("pjJH"));n("6dnR");var c=l(n("CQJL"));n("SePM");var d=l(n("PMX6"));n("Dvpn");var s=l(n("myml"));n("eE3J");var m=l(n("GSZB")),p=l(n("jehZ")),v=l(n("p0pE")),h=l(n("Y/ft")),g=a(n("q1tI")),y=n("IYwU"),E=l(n("qJlv")),b=l(n("RsOY")),C=l(n("4b23")),S=n("wiuW");n("SWtE");var w=l(n("Va/H")),O=-1,x=-1;function D(e,t,n){var a=e;return n.forEach(function(e,n){n<t&&(a+=e)}),a}function N(e){var t=e.isOver,n=e.connectDragSource,a=e.connectDropTarget,l=(e.moveRow,(0,h.default)(e,["isOver","connectDragSource","connectDropTarget","moveRow"])),r=(0,v.default)({},l.style,{cursor:"move"}),u=l.className;return t&&((l.sectionindex>x||x===l.sectionindex&&l.index>O)&&(u+=" drop-item-over-downward"),(l.sectionindex<x||x===l.sectionindex&&l.index<O)&&(u+=" drop-item-over-upward")),n(a(g.default.createElement("tr",(0,p.default)({},l,{className:u,style:r}))))}var I={beginDrag:function(e){return O=e.index,x=e.sectionindex,{index:e.index,sectionindex:e.sectionindex}}},A={drop:function(e,t){var n=t.getItem(),a=n.index,l=n.sectionindex,r=e.index,u=e.sectionindex;l===u&&a===r||e.moveRow(a,r,l,u)}},k=function(e){return(0,y.DropTarget)(e,A,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})((0,y.DragSource)(e,I,function(e){return{connectDragSource:e.dragSource()}})(N))},F=function(e){return(0,y.DropTarget)(e,{drop:function(e,t){var n=t.getItem(),a=n.index,l=n.sectionindex,r=e.sectionindex;l!==r&&e.addRow(a,l,r)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t=e.connectDropTarget,n=e.isOver,a=e.sectionindex,l=n&&x!==a;return t(g.default.createElement("div",{style:{display:"flex",alignItems:"center",marginRight:18,color:"#1890ff"}},"\u52a0\u5165\u672c\u7ec4:\xa0",g.default.createElement(m.default,{type:l?"fullscreen-exit":"plus",style:{fontSize:20}})))})};function P(e){var t=e.setData,n=e.allData,a=e.sections,l=e.addAndDeleteView,r=e.styleView,u=e.cardTitle,i=e.footer,o=e.columns,f=e.expandedRowRender,c=e.tableTitle,m=e.setSections,h=e.key,w=void 0===h?(0,C.default)(5):h,O=e.sectionStyle,x=e.detailStyle,N=e.addAndWidget,I=F(w),A={body:{row:k(w)}};function P(e,l,r,u){var i=D(e,r,a),o=D(l,u,a),f=n[i];t((0,b.default)(n,{$splice:[[i,1],[o,0,f]]})),m&&r!==u&&m((0,b.default)(a,{$splice:[[r,1,a[r]-1],[u,1,a[u]+1]]}))}function j(e,l,r){var u=D(e,l,a),i=n[u];t((0,b.default)(n,{$splice:[[u,1],[D(0,r,a),0,i]]})),m((0,b.default)(a,{$splice:[[l,1,a[l]-1],[r,1,a[r]+1]]}))}var M=function(e){return o.map(function(t){var n=(0,v.default)({},t);if(n.render){var a=n.render;n.render=function(t,n,l){return a(t,n,l,e)}}return n})},R=function(e){return function(t,n,a,l){return f(t,n,a,l,e)}};function V(e){var t=0,l=0;a.forEach(function(n,a){a<e&&(t+=n),a===e&&(l=n)});var r=null===n||void 0===n?void 0:n.slice(t,t+l);return r}return g.default.createElement(y.DndProvider,{backend:E.default},g.default.createElement(d.default,{title:u,bodyStyle:{padding:0},extra:r&&r()},a.map(function(t,n){var a,r,u=V(n);return g.default.createElement(d.default,{title:c&&c(n),bodyStyle:{padding:0},extra:!!l&&g.default.createElement("div",{style:{display:"flex",alignItems:"center"}},_.isEmpty(u)&&!(O&&(null===(a=O[n])||void 0===a?void 0:a.widget)in S.detailComponent)&&g.default.createElement(I,{addRow:j,sectionindex:n}),l(n)),bordered:l},g.default.createElement("div",{className:"container"},"default"!==x&&O&&(null===(r=O[n])||void 0===r?void 0:r.widget)in S.detailComponent||g.default.createElement(s.default,(0,p.default)({},e,{dataSource:u,components:A,onRow:function(e,t){return{index:t,moveRow:P,sectionindex:n}},footer:function(){return i(n)},columns:M(n),expandedRowRender:f&&R(n)})),g.default.createElement("div",{style:{marginBottom:14,minHeight:32}},g.default.createElement("div",{className:"content"},N&&N(n)))))})))}function j(e){var t=e.onChange,n=e.value,a=e.layouts,l=void 0===a?{}:a;return g.default.createElement("div",null,"\u6392\u5217\u65b9\u5f0f : \xa0\xa0",g.default.createElement(c.default.Group,{value:n,onChange:function(e){return t(e.target.value)}},g.default.createElement(c.default,{value:"default"},"\u9ed8\u8ba4"),_.map(l,function(e,t){return g.default.createElement(c.default,{value:t},e)})))}function M(e){var t=e.addSections,n=e.deleteSections,a=e.hiddenDelete,l=e.sectionindex;return g.default.createElement(g.default.Fragment,null,g.default.createElement(f.default,{icon:"plus",onClick:function(){return t(l)},style:{marginRight:10}},"\u6dfb\u52a0\u4e00\u7ec4"),!a&&g.default.createElement(f.default,{icon:"delete",onClick:function(){return n(l)}},"\u5220\u9664"))}function R(e,t){return e.toLowerCase().includes(t.toLowerCase())}function V(e){var t=e.modelName,n=e.schemas,a=e.fieldDisabled,l=(0,h.default)(e,["modelName","schemas","fieldDisabled"]),f=(0,g.useState)([]),c=(0,o.default)(f,2),d=c[0],s=c[1],m=(0,g.useState)(!1),p=(0,o.default)(m,2),v=p[0],y=p[1];function E(){y(!1),l.onOk&&l.onOk()}function b(){y(!0)}function C(){y(!1),s([])}var S=g.default.createElement(i.default.Item,{label:"\u9009\u62e9\u5b57\u6bb5",labelCol:{span:6},wrapperCol:{span:18}},g.default.createElement(w.default,{modelName:t,value:d,onChange:s})),O=g.default.createElement("div",null,g.default.createElement(i.default.Item,{label:"\u9009\u62e9\u5b57\u6bb5",labelCol:{span:6},wrapperCol:{span:18}},g.default.createElement(u.default,{mode:"multiple",defaultValue:[],value:d,onChange:s,style:{minWidth:160},filterOption:function(e,t){var n=t.props,a=n.value,l=n.children;return R(a,e)||R(l,e)}},n[t].fields.map(function(e){return g.default.createElement(u.default.Option,{value:e.name,key:e.name,disabled:a&&a(e)},e.displayName)})))),x=l.expand,D=g.default.createElement(r.default,{title:"\u6dfb\u52a0\u5b57\u6bb5",visible:v,onOk:E,onCancel:function(){return y(!1)},afterClose:C,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},x?S:O);return[D,d,b]}function T(e){var t=e.sections,n=void 0===t?[{}]:t,a=e.setData,l=e.columns,r=e.footer,u=e.expandedRowRender,i=e.hiddenAdd,o=void 0!==i&&i,f=e.addAndDeleteView,c=e.styleView,d=e.title,s=e.modalView,m=e.allData,p=e.tableTitle,v=e.setSections,h=e.sectionStyle,y=e.style,E=e.addAndWidget,b=g.default.createElement("div",null,s,g.default.createElement(P,{modalView:s,columns:l,expandedRowRender:u,sections:n,allData:m,setData:a,size:"middle",bordered:!0,pagination:!1,footer:r,styleView:c,addAndDeleteView:f,hiddenAdd:o,cardTitle:d,tableTitle:p,setSections:v,sectionStyle:h,detailStyle:y,addAndWidget:E}));return[b,n]}var z=T;t.default=z},fUL4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n("r+aA"));function l(e){return e&&e.__esModule?e:{default:e}}var r=a;t.default=r,e.exports=r},fscj:function(e,t,n){},hq6h:function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var l=a(n("eHn4")),r=a(n("p0pE")),u=a(n("q1tI")),i=a(n("LvDl")),o=n("9Ndd"),f=n("xNPh"),c=a(n("rS6g")),d="Form_winght_new",s=["choices","default","displayName","editable","help","maxDigits","maxLength","name","precision","primaryKey","readonly","ref","refField","refTo","required","type","validators"],m=(0,f.getForm)();function p(e){return i.default.pick(e,s)}function v(e,t){var n=t.model,a=t.values,l=(0,r.default)({},i.default.omit(e,s),{name:e.name}),u=l.params;return u&&"function"===typeof u&&(l.params=u({model:n,values:a})),l}function h(e){var t=e.paramsDef,n=void 0===t?[]:t,a=e.onChange,r=e.model,i=e.values,o=(0,l.default)({},d,{fields:n.map(p)}),f=(0,l.default)({},d,{formFields:n.map(function(e){return v(e,{model:r,values:i})})});return u.default.createElement(m,{hideCard:!0,model:d,schemas:o,admins:f,showButtons:!1,object:i,onValuesChange:a})}(0,o.registerWidget)("FieldsSet",c.default,"\u5b57\u6bb5\u914d\u7f6e\u5668")},hzhw:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("Dvpn");var r=l(n("myml"));n("eNCU");var u=l(n("pjJH")),i=l(n("gWZ8"));n("QjdF");var o=l(n("U4Vl"));n("yavW");var f=l(n("WuMn"));n("4X2C");var c=l(n("xvon"));n("vmZS");var d=l(n("NjVP"));n("6dnR");var s=l(n("CQJL")),m=l(n("qIgq")),p=a(n("q1tI")),v={group:"\u5206\u7ec4",tab:"\u6807\u7b7e",step:"\u5206\u6b65"};function h(e){var t=e.schemas,n=e.modelName,a=e.adminConfig,l=e.formFields,h="default",g=[];a[n].formLayout&&(h=a[n].formLayout.style||h,g=_.cloneDeep(a[n].formLayout.sections));var y=(0,p.useState)(h),E=(0,m.default)(y,2),b=E[0],C=E[1],S=(0,p.useState)(g),w=(0,m.default)(S,2),O=w[0],x=w[1];function D(e,t){var n=_.cloneDeep(O);n[e].title=t,x(n)}function N(e,t){var n=_.cloneDeep(O);n[e].fields=t,x(n)}function I(){C(h),x(g)}function A(e){var t=_.cloneDeep(O);t.splice(e,1),x(t)}function k(e){var t=_.cloneDeep(O),n=e-1,a=[t[e],t[n]];t[n]=a[0],t[e]=a[1],x(t)}function F(e){var t=_.cloneDeep(O),n=e+1,a=[t[e],t[n]];t[n]=a[0],t[e]=a[1],x(t)}var P=p.default.createElement(d.default,{layout:"inline"},p.default.createElement(d.default.Item,{label:"\u6392\u5217\u65b9\u5f0f"},p.default.createElement(s.default.Group,{value:b,onChange:function(e){return C(e.target.value)}},p.default.createElement(s.default,{value:"default"},"\u9ed8\u8ba4"),_.map(v,function(e,t){return p.default.createElement(s.default,{value:t},e)}))),"default"!==b&&p.default.createElement(p.default.Fragment,null,p.default.createElement(r.default,{style:{marginTop:24},size:"middle",bordered:!0,dataSource:O,pagination:!1,columns:[{title:"".concat(v[b],"\u540d\u79f0"),key:"title",render:function(e,t,n){return p.default.createElement(c.default,{value:e.title,onChange:function(e){return D(n,e.target.value)}})}},{title:"\u6240\u542b\u5b57\u6bb5",key:"fields",render:function(e,a,r){return p.default.createElement(f.default,{mode:"multiple",value:e.fields,onChange:function(e){return N(r,e)}},l.filter(function(e){return e.name}).map(function(a){return p.default.createElement(f.default.Option,{value:a.name,disabled:O.map(function(e){return e.fields}).flat().includes(a.name)&&!(e.fields||[]).includes(a.name)},t[n].fields.find(function(e){return e.name===a.name}).displayName)}))}},{title:"\u64cd\u4f5c",key:"option",render:function(e,t,n){return p.default.createElement(p.default.Fragment,null,p.default.createElement("a",{onClick:function(){return A(n)}},"\u5220\u9664"),n>0&&p.default.createElement(p.default.Fragment,null,p.default.createElement(o.default,{type:"vertical"}),p.default.createElement("a",{onClick:function(){return k(n)}},"\u4e0a\u79fb")),n<O.length-1&&p.default.createElement(p.default.Fragment,null,p.default.createElement(o.default,{type:"vertical"}),p.default.createElement("a",{onClick:function(){return F(n)}},"\u4e0b\u79fb")))}}],footer:function(){return p.default.createElement(u.default,{onClick:function(){return x([].concat((0,i.default)(O),[{}]))}},"\u6dfb\u52a0",v[b])}}))),j={style:b,sections:O};return[P,"default"===b?void 0:j,I]}var g=h;t.default=g},"r+aA":function(e,t,n){"use strict";var a=n("TqRt"),l=n("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n("q1tI")),u=a(n("s2MQ")),i=a(n("KQxl")),o=function(e,t){return r.createElement(i.default,Object.assign({},e,{ref:t,icon:u.default}))};o.displayName="EyeInvisibleOutlined";var f=r.forwardRef(o);t.default=f},rS6g:function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("eNCU");var l=a(n("pjJH"));n("eE3J");var r=a(n("GSZB")),u=a(n("jehZ")),i=a(n("q1tI")),o=a(n("LvDl")),f=n("Hg0r"),c=n("9Ndd"),d=a(n("MU2A"));function s(e){var t=e.schemas,n=e.model,a=e.onChange,f=e.fieldFilter,s=e.value,m=void 0===s?[]:s,p=function(){var e=o.default.cloneDeep(m);e.push({}),a(e)};function v(e){var t=o.default.cloneDeep(m);t.splice(e,1),a(t)}if(!o.default.isArray(m))return null;var h=c.bsmWidgets.TextInput,g={};return i.default.createElement(i.default.Fragment,null,m.map(function(e,l){if(e.name){var s=t[n].fields.find(function(t){return t.name===e.name});h=c.bsmWidgets[c.formWidgetMapping[s.type]]}return i.default.createElement("div",null,i.default.createElement("div",{style:{display:"flex"}},i.default.createElement("div",{style:{marginRight:8}},i.default.createElement(d.default,{value:e.name,fieldFilter:f,onChange:function(e){var t=o.default.cloneDeep(m);t[l].name=e,t[l].value&&(t[l].value=void 0),a(t)},model:n})),i.default.createElement("div",{style:{marginRight:8}},i.default.createElement(h,(0,u.default)({onChange:function(e){var t=o.default.cloneDeep(m);t[l].value=e,a(t)},value:e.value},g))),i.default.createElement("a",{onClick:function(){return v(l)},style:{marginLeft:8}},i.default.createElement(r.default,{type:"delete",style:{fontSize:20}}))))}),i.default.createElement(l.default,{type:"dashed",style:{width:354},onClick:p},i.default.createElement(r.default,{type:"plus"})))}var m=(0,f.connect)(function(e){var t=e.content.schemas;return{schemas:t}})(s);t.default=m},rfrl:function(e,t,n){"use strict";function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function l(e){return!!e&&!!e[Q]}function r(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[H]||!!e.constructor[H]||m(e)||p(e))}function u(e){return l(e)||a(23,e),e[Q].t}function i(e,t,n){void 0===n&&(n=!1),0===o(e)?(n?Object.keys:te)(e).forEach(function(a){n&&"symbol"==typeof a||t(a,e[a],e)}):e.forEach(function(n,a){return t(a,n,e)})}function o(e){var t=e[Q];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:m(e)?2:p(e)?3:0}function f(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===o(e)?e.get(t):e[t]}function d(e,t,n){var a=o(e);2===a?e.set(t,n):3===a?(e.delete(t),e.add(n)):e[t]=n}function s(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function m(e){return Y&&e instanceof Map}function p(e){return J&&e instanceof Set}function v(e){return e.o||e.t}function h(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ne(e);delete t[Q];for(var n=te(t),a=0;a<n.length;a++){var l=n[a],r=t[l];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(t[l]={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[l]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){E(e)||l(e)||!r(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=y),Object.freeze(e),t&&i(e,function(e,t){return g(t,!0)},!0))}function y(){a(2)}function E(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var t=ae[e];return t||a(18,e),t}function C(e,t){ae[e]||(ae[e]=t)}function S(){return Z}function w(e,t){t&&(b("Patches"),e.u=[],e.s=[],e.v=t)}function O(e){x(e),e.p.forEach(N),e.p=null}function x(e){e===Z&&(Z=e.l)}function D(e){return Z={p:[],l:Z,h:e,m:!0,_:0}}function N(e){var t=e[Q];0===t.i||1===t.i?t.j():t.g=!0}function I(e,t){t._=t.p.length;var n=t.p[0],l=void 0!==e&&e!==n;return t.h.O||b("ES5").S(t,e,l),l?(n[Q].P&&(O(t),a(4)),r(e)&&(e=A(t,e),t.l||_(t,e)),t.u&&b("Patches").M(n[Q],e,t.u,t.s)):e=A(t,n,[]),O(t),t.u&&t.v(t.u,t.s),e!==X?e:void 0}function A(e,t,n){if(E(t))return t;var a=t[Q];if(!a)return i(t,function(l,r){return k(e,a,t,l,r,n)},!0),t;if(a.A!==e)return t;if(!a.P)return _(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var l=4===a.i||5===a.i?a.o=h(a.k):a.o;i(3===a.i?new Set(l):l,function(t,r){return k(e,a,l,t,r,n)}),_(e,l,!1),n&&e.u&&b("Patches").R(a,n,e.u,e.s)}return a.o}function k(e,t,n,a,u,i){if(l(u)){var o=A(e,u,i&&t&&3!==t.i&&!f(t.D,a)?i.concat(a):void 0);if(d(n,a,o),!l(o))return;e.m=!1}if(r(u)&&!E(u)){if(!e.h.N&&e._<1)return;A(e,u),t&&t.A.l||_(e,u)}}function _(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&g(t,n)}function F(e,t){var n=e[Q];return(n?v(n):e)[t]}function P(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Object.getPrototypeOf(n)}}function j(e){e.P||(e.P=!0,e.l&&j(e.l))}function M(e){e.o||(e.o=h(e.t))}function R(e,t,n){var a=m(t)?b("MapSet").T(t,n):p(t)?b("MapSet").F(t,n):e.O?function(e,t){var n=Array.isArray(e),a={i:n?1:0,A:t?t.A:S(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},l=a,r=le;n&&(l=[a],r=re);var u=Proxy.revocable(l,r),i=u.revoke,o=u.proxy;return a.k=o,a.j=i,o}(t,n):b("ES5").J(t,n);return(n?n.A:S()).p.push(a),a}function V(e){return l(e)||a(22,e),function e(t){if(!r(t))return t;var n,a=t[Q],l=o(t);if(a){if(!a.P&&(a.i<4||!b("ES5").K(a)))return a.t;a.I=!0,n=T(t,l),a.I=!1}else n=T(t,l);return i(n,function(t,l){a&&c(a.t,t)===l||d(n,t,e(l))}),3===l?new Set(n):n}(e)}function T(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return h(e)}function z(){function e(e,t){var n=r[e];return n?n.enumerable=t:r[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Q];return le.get(t,e)},set:function(t){var n=this[Q];le.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var l=e[t][Q];if(!l.P)switch(l.i){case 5:a(l)&&j(l);break;case 4:n(l)&&j(l)}}}function n(e){for(var t=e.t,n=e.k,a=te(n),l=a.length-1;l>=0;l--){var r=a[l];if(r!==Q){var u=t[r];if(void 0===u&&!f(t,r))return!0;var i=n[r],o=i&&i[Q];if(o?o.t!==u:!s(i,u))return!0}}var c=!!t[Q];return a.length!==te(t).length+(c?0:1)}function a(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var r={};C("ES5",{J:function(t,n){var a=Array.isArray(t),l=function(t,n){if(t){for(var a=Array(n.length),l=0;l<n.length;l++)Object.defineProperty(a,""+l,e(l,!0));return a}var r=ne(n);delete r[Q];for(var u=te(r),i=0;i<u.length;i++){var o=u[i];r[o]=e(o,t||!!r[o].enumerable)}return Object.create(Object.getPrototypeOf(n),r)}(a,t),r={i:a?5:4,A:n?n.A:S(),P:!1,I:!1,D:{},l:n,t:t,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Q,{value:r,writable:!0}),l},S:function(e,n,r){r?l(n)&&n[Q].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Q];if(n){var l=n.t,r=n.k,u=n.D,o=n.i;if(4===o)i(r,function(t){t!==Q&&(void 0!==l[t]||f(l,t)?u[t]||e(r[t]):(u[t]=!0,j(n)))}),i(l,function(e){void 0!==r[e]||f(r,e)||(u[e]=!1,j(n))});else if(5===o){if(a(n)&&(j(n),u.length=!0),r.length<l.length)for(var c=r.length;c<l.length;c++)u[c]=!1;else for(var d=l.length;d<r.length;d++)u[d]=!0;for(var s=Math.min(r.length,l.length),m=0;m<s;m++)void 0===u[m]&&e(r[m])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):a(e)}})}function q(){function e(t){if(!r(t))return t;if(Array.isArray(t))return t.map(e);if(m(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(p(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var a in t)n[a]=e(t[a]);return n}function t(t){return l(t)?e(t):t}var n="add";C("Patches",{$:function(t,l){return l.forEach(function(l){for(var r=l.path,u=l.op,i=t,f=0;f<r.length-1;f++)"object"!=typeof(i=c(i,r[f]))&&a(15,r.join("/"));var d=o(i),s=e(l.value),m=r[r.length-1];switch(u){case"replace":switch(d){case 2:return i.set(m,s);case 3:a(16);default:return i[m]=s}case n:switch(d){case 1:return i.splice(m,0,s);case 2:return i.set(m,s);case 3:return i.add(s);default:return i[m]=s}case"remove":switch(d){case 1:return i.splice(m,1);case 2:return i.delete(m);case 3:return i.delete(l.value);default:return delete i[m]}default:a(17,u)}}),t},R:function(e,a,l,r){switch(e.i){case 0:case 4:case 2:return function(e,a,l,r){var u=e.t,o=e.o;i(e.D,function(e,i){var d=c(u,e),s=c(o,e),m=i?f(u,e)?"replace":n:"remove";if(d!==s||"replace"!==m){var p=a.concat(e);l.push("remove"===m?{op:m,path:p}:{op:m,path:p,value:s}),r.push(m===n?{op:"remove",path:p}:"remove"===m?{op:n,path:p,value:t(d)}:{op:"replace",path:p,value:t(d)})}})}(e,a,l,r);case 5:case 1:return function(e,a,l,r){var u=e.t,i=e.D,o=e.o;if(o.length<u.length){var f=[o,u];u=f[0],o=f[1];var c=[r,l];l=c[0],r=c[1]}for(var d=0;d<u.length;d++)if(i[d]&&o[d]!==u[d]){var s=a.concat([d]);l.push({op:"replace",path:s,value:t(o[d])}),r.push({op:"replace",path:s,value:t(u[d])})}for(var m=u.length;m<o.length;m++){var p=a.concat([m]);l.push({op:n,path:p,value:t(o[m])})}u.length<o.length&&r.push({op:"replace",path:a.concat(["length"]),value:u.length})}(e,a,l,r);case 3:return function(e,t,a,l){var r=e.t,u=e.o,i=0;r.forEach(function(e){if(!u.has(e)){var r=t.concat([i]);a.push({op:"remove",path:r,value:e}),l.unshift({op:n,path:r,value:e})}i++}),i=0,u.forEach(function(e){if(!r.has(e)){var u=t.concat([i]);a.push({op:n,path:u,value:e}),l.unshift({op:"remove",path:u,value:e})}i++})}(e,a,l,r)}},M:function(e,t,n,a){n.push({op:"replace",path:[],value:t}),a.push({op:"replace",path:[],value:e.t})}})}function W(){function e(e,t){function n(){this.constructor=e}u(e,t),e.prototype=(n.prototype=t.prototype,new n)}function t(e){e.o||(e.D=new Map,e.o=new Map(e.t))}function n(e){e.o||(e.o=new Set,e.t.forEach(function(t){if(r(t)){var n=R(e.A.h,t,e);e.p.set(t,n),e.o.add(n)}else e.o.add(t)}))}function l(e){e.g&&a(3,JSON.stringify(v(e)))}var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},o=function(){function n(e,t){return this[Q]={i:2,l:t,A:t?t.A:S(),P:!1,I:!1,o:void 0,D:void 0,t:e,k:this,C:!1,g:!1},this}e(n,Map);var a=n.prototype;return Object.defineProperty(a,"size",{get:function(){return v(this[Q]).size}}),a.has=function(e){return v(this[Q]).has(e)},a.set=function(e,n){var a=this[Q];return l(a),v(a).has(e)&&v(a).get(e)===n||(t(a),j(a),a.D.set(e,!0),a.o.set(e,n),a.D.set(e,!0)),this},a.delete=function(e){if(!this.has(e))return!1;var n=this[Q];return l(n),t(n),j(n),n.D.set(e,!1),n.o.delete(e),!0},a.clear=function(){var e=this[Q];l(e),v(e).size&&(t(e),j(e),e.D=new Map,i(e.t,function(t){e.D.set(t,!1)}),e.o.clear())},a.forEach=function(e,t){var n=this;v(this[Q]).forEach(function(a,l){e.call(t,n.get(l),l,n)})},a.get=function(e){var n=this[Q];l(n);var a=v(n).get(e);if(n.I||!r(a))return a;if(a!==n.t.get(e))return a;var u=R(n.A.h,a,n);return t(n),n.o.set(e,u),u},a.keys=function(){return v(this[Q]).keys()},a.values=function(){var e,t=this,n=this.keys();return(e={})[ee]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},a.entries=function(){var e,t=this,n=this.keys();return(e={})[ee]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var a=t.get(e.value);return{done:!1,value:[e.value,a]}},e},a[ee]=function(){return this.entries()},n}(),f=function(){function t(e,t){return this[Q]={i:3,l:t,A:t?t.A:S(),P:!1,I:!1,o:void 0,t:e,k:this,p:new Map,g:!1,C:!1},this}e(t,Set);var a=t.prototype;return Object.defineProperty(a,"size",{get:function(){return v(this[Q]).size}}),a.has=function(e){var t=this[Q];return l(t),t.o?!!t.o.has(e)||!(!t.p.has(e)||!t.o.has(t.p.get(e))):t.t.has(e)},a.add=function(e){var t=this[Q];return l(t),this.has(e)||(n(t),j(t),t.o.add(e)),this},a.delete=function(e){if(!this.has(e))return!1;var t=this[Q];return l(t),n(t),j(t),t.o.delete(e)||!!t.p.has(e)&&t.o.delete(t.p.get(e))},a.clear=function(){var e=this[Q];l(e),v(e).size&&(n(e),j(e),e.o.clear())},a.values=function(){var e=this[Q];return l(e),n(e),e.o.values()},a.entries=function(){var e=this[Q];return l(e),n(e),e.o.entries()},a.keys=function(){return this.values()},a[ee]=function(){return this.values()},a.forEach=function(e,t){for(var n=this.values(),a=n.next();!a.done;)e.call(t,a.value,a.value,this),a=n.next()},t}();C("MapSet",{T:function(e,t){return new o(e,t)},F:function(e,t){return new f(e,t)}})}function L(){z(),W(),q()}function U(e){return e}function $(e){return e}n.r(t),n.d(t,"Immer",function(){return ue}),n.d(t,"applyPatches",function(){return se}),n.d(t,"castDraft",function(){return U}),n.d(t,"castImmutable",function(){return $}),n.d(t,"createDraft",function(){return me}),n.d(t,"current",function(){return V}),n.d(t,"enableAllPlugins",function(){return L}),n.d(t,"enableES5",function(){return z}),n.d(t,"enableMapSet",function(){return W}),n.d(t,"enablePatches",function(){return q}),n.d(t,"finishDraft",function(){return pe}),n.d(t,"immerable",function(){return H}),n.d(t,"isDraft",function(){return l}),n.d(t,"isDraftable",function(){return r}),n.d(t,"nothing",function(){return X}),n.d(t,"original",function(){return u}),n.d(t,"produce",function(){return oe}),n.d(t,"produceWithPatches",function(){return fe}),n.d(t,"setAutoFreeze",function(){return ce}),n.d(t,"setUseProxies",function(){return de});var G,Z,B="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Y="undefined"!=typeof Map,J="undefined"!=typeof Set,K="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,X=B?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),H=B?Symbol.for("immer-draftable"):"__$immer_draftable",Q=B?Symbol.for("immer-state"):"__$immer_state",ee="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",te="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ne=Object.getOwnPropertyDescriptors||function(e){var t={};return te(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},ae={},le={get:function(e,t){if(t===Q)return e;var n=v(e);if(!f(n,t))return function(e,t,n){var a,l=P(t,n);return l?"value"in l?l.value:null===(a=l.get)||void 0===a?void 0:a.call(e.k):void 0}(e,n,t);var a=n[t];return e.I||!r(a)?a:a===F(e.t,t)?(M(e),e.o[t]=R(e.A.h,a,e)):a},has:function(e,t){return t in v(e)},ownKeys:function(e){return Reflect.ownKeys(v(e))},set:function(e,t,n){var a=P(v(e),t);if(null==a?void 0:a.set)return a.set.call(e.k,n),!0;if(!e.P){var l=F(v(e),t),r=null==l?void 0:l[Q];if(r&&r.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(s(n,l)&&(void 0!==n||f(e.t,t)))return!0;M(e),j(e)}return e.o[t]=n,e.D[t]=!0,!0},deleteProperty:function(e,t){return void 0!==F(e.t,t)||t in e.t?(e.D[t]=!1,M(e),j(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=v(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:a.enumerable,value:n[t]}:a},defineProperty:function(){a(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){a(12)}},re={};i(le,function(e,t){re[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),re.deleteProperty=function(e,t){return le.deleteProperty.call(this,e[0],t)},re.set=function(e,t,n){return le.set.call(this,e[0],t,n,e[0])};var ue=function(){function e(e){this.O=K,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,n){if("function"==typeof e&&"function"!=typeof t){var l=t;t=e;var u=this;return function(e){var n=this;void 0===e&&(e=l);for(var a=arguments.length,r=Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return u.produce(e,function(e){var a;return(a=t).call.apply(a,[n,e].concat(r))})}}var i;if("function"!=typeof t&&a(6),void 0!==n&&"function"!=typeof n&&a(7),r(e)){var o=D(this),f=R(this,e,void 0),c=!0;try{i=t(f),c=!1}finally{c?O(o):x(o)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then(function(e){return w(o,n),I(e,o)},function(e){throw O(o),e}):(w(o,n),I(i,o))}if(!e||"object"!=typeof e){if((i=t(e))===X)return;return void 0===i&&(i=e),this.N&&g(i,!0),i}a(21,e)},t.produceWithPatches=function(e,t){var n,a,l=this;return"function"==typeof e?function(t){for(var n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return l.produceWithPatches(t,function(t){return e.apply(void 0,[t].concat(a))})}:[this.produce(e,t,function(e,t){n=e,a=t}),n,a]},t.createDraft=function(e){r(e)||a(8),l(e)&&(e=V(e));var t=D(this),n=R(this,e,void 0);return n[Q].C=!0,x(t),n},t.finishDraft=function(e,t){var n=e&&e[Q],a=n.A;return w(a,t),I(void 0,a)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!K&&a(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var a=t[n];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}var r=b("Patches").$;return l(e)?r(e,t):this.produce(e,function(e){return r(e,t.slice(n+1))})},e}(),ie=new ue,oe=ie.produce,fe=ie.produceWithPatches.bind(ie),ce=ie.setAutoFreeze.bind(ie),de=ie.setUseProxies.bind(ie),se=ie.applyPatches.bind(ie),me=ie.createDraft.bind(ie),pe=ie.finishDraft.bind(ie);t["default"]=oe},s2MQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};t.default=a},seZw:function(e,t,n){"use strict";var a=n("g09b"),l=n("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.useActionsEditorV2=k,t.default=void 0;var r=a(n("eHn4"));n("52nx");var u=a(n("7bDm"));n("eNCU");var i=a(n("pjJH"));n("SePM");var o=a(n("PMX6"));n("Ahcs");var f=a(n("k0dM"));n("4X2C");var c=a(n("xvon"));n("vmZS");var d=a(n("NjVP"));n("yavW");var s,m=a(n("WuMn")),p=a(n("p0pE")),v=a(n("gWZ8")),h=a(n("qIgq")),g=l(n("q1tI")),y=a(n("LvDl")),E=a(n("4b23")),b=a(n("cPjh")),C=n("MxUj"),S=a(n("umGZ")),w=n("EBSl"),O=a(n("hq6h")),x=a(n("U/ol")),D=w.ACTIONS.ACTION_TYPE_BATCH;function N(e){var t={action:e,name:D[e].name,params:{},groups:[]};return t}function I(e){var t=e.modelName,n=e.schemas,a=e.adminConfig,l=e.bsmSetting.staff_model,r=(0,g.useState)(a[t].actions),u=(0,h.default)(r,2),i=u[0],o=void 0===i?[]:i,f=u[1],s=(0,g.useState)([]),b=(0,h.default)(s,2),C=b[0],w=b[1];function I(){f(a[t].actions)}function A(){f([].concat((0,v.default)(o),[{}]))}function k(e){var t=e.map(N);f([].concat((0,v.default)(o),(0,v.default)(t)))}function _(e){var t=y.default.cloneDeep(o);t.splice(e,1),f(t)}function F(e,t){var n=y.default.cloneDeep(o);n[e].action=t,n[e].name=D[t].name,n[e].params={},f(n)}function P(e,t){var n=y.default.cloneDeep(o);n[e].name=t,f(n)}(0,g.useEffect)(function(){if(l){var e=[];n[t].fields.forEach(function(t){t.ref===l&&e.push(t)}),w(e)}},[]);var j=function(){var e=y.default.cloneDeep(o);return e.map(function(e){var t=(0,p.default)({},e);return y.default.isEmpty(e.groups)||(t.groups=t.groups.filter(function(e){return e}).map(function(e){return e.id||e})),e.id||(t.id=(0,E.default)(6)),t})},M={handleTitleChange:P,handleDelete:_,handleAdd:A,setActions:f,addActions:k};function R(e){var n,r,u;if(void 0===e)return null;var i=o[e];return g.default.createElement(d.default,{labelCol:{span:6},wrapperCol:{span:8}},g.default.createElement(d.default.Item,{label:"\u6279\u91cf\u64cd\u4f5c\u7c7b\u578b"},g.default.createElement(m.default,{value:i.action,onChange:function(t){return F(e,t)}},Object.keys(D).map(function(e){return g.default.createElement(m.default.Option,{value:e},D[e].name)}))),g.default.createElement(d.default.Item,{label:"\u6279\u91cf\u64cd\u4f5c\u540d\u79f0"},g.default.createElement(c.default,{value:i.name,onChange:function(t){return P(e,t.target.value)}})),g.default.createElement(O.default,{paramsDef:D[i.action].paramsDef,model:t,values:i.params,onChange:function(t,n){var a=(0,v.default)(o),l=D[i.action].paramsDef.find(function(e){return e.name===t});console.log("paramdef: ",l,e),a[e].params[t]=!0===l["isJson"]?JSON.parse(n):n,f(a)}}),g.default.createElement("div",{className:x.default.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),g.default.createElement(S.default,{groupsValue:null!==(n=null===(r=i.groups)||void 0===r?void 0:r.filter(function(e){return!("number"===typeof e)}))&&void 0!==n?n:[],groupsOnChange:function(t){var n=y.default.cloneDeep(o);n[e].groups=t,f((0,v.default)(n))},userValue:i.userField,userOnChange:function(t){var n=y.default.cloneDeep(o);n[e].userField=t,f((0,v.default)(n))},staffModelFields:C,staffModel:l,defauldGroupValue:null===(u=a[t].actions)||void 0===u?void 0:u[e]}))}return[R,o,I,j,M]}function A(e){var t=e.modelName,n=e.schemas,a=e.adminConfig,l=e.bsmSetting,r=(0,g.useState)(String(0)),u=(0,h.default)(r,2),i=u[0],c=u[1],d=I({modelName:t,schemas:n,adminConfig:a,bsmSetting:l}),s=(0,h.default)(d,5),m=s[0],p=s[1],v=s[2],y=s[3],E=s[4],b=E.handleAdd,C=E.handleDelete,S=g.default.createElement(o.default,{title:"\u6279\u91cf\u64cd\u4f5c",type:"inner"},g.default.createElement(f.default,{tabBarStyle:{minWidth:48},activeKey:i,tabPosition:"left",type:"editable-card",onChange:c,onEdit:function(e,t){switch(t){case"add":b();break;case"remove":C(e);break;default:}}},p.map(function(e,t){return g.default.createElement(f.default.TabPane,{tab:e.name,key:t},m(t))})));return[S,p,v,y]}function k(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=e.bsmSetting,r=I({modelName:t,schemas:a,adminConfig:n,bsmSetting:l}),o=(0,h.default)(r,5),f=o[0],c=o[1],s=o[2],p=o[3],v=o[4],y=(0,g.useState)([]),E=(0,h.default)(y,2),C=E[0],S=E[1],w=(0,g.useState)(!1),O=(0,h.default)(w,2),x=O[0],N=O[1],A=v.addActions,k=v.handleDelete,_=v.setActions,F=(0,b.default)({allData:c,setData:_,sections:[c.length||0],title:"\u6279\u91cf\u64cd\u4f5c",setSections:function(e){_(e[0].fields)},columns:[{title:"\u6279\u91cf\u64cd\u4f5c",key:"name",render:function(e){return e.name||D[e.action].name}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n){return g.default.createElement(g.default.Fragment,null,g.default.createElement("a",{onClick:function(){return k(n)}},"\u5220\u9664"))}}],footer:function(){return g.default.createElement(i.default,{onClick:function(){return N(!0)}},"\u6dfb\u52a0\u64cd\u4f5c\u9879")},expandedRowRender:function(e,t){return f(t)}}),P=(0,h.default)(F,1),j=P[0];function M(){A(C),N(!1)}function R(){N(!1),S([])}var V=g.default.createElement("div",null,g.default.createElement(d.default.Item,{label:"\u9009\u62e9\u7c7b\u578b",labelCol:{span:6},wrapperCol:{span:18}},g.default.createElement(m.default,{mode:"multiple",defaultValue:[],value:C,onChange:S,style:{minWidth:160}},Object.keys(D).map(function(e,t){return g.default.createElement(m.default.Option,{value:e,key:"".concat(e,"__").concat(t+1)},D[e].name)})))),T=g.default.createElement(g.default.Fragment,null,g.default.createElement(u.default,{title:"\u6dfb\u52a0\u64cd\u4f5c\u9879",visible:x,onOk:M,onCancel:function(){return N(!1)},afterClose:R,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},V),j);return[T,c,s,p]}var _=(s={},(0,r.default)(s,C.VERSION_FIRST,A),(0,r.default)(s,C.VERSION_SECOND,k),s),F=_[C.CONFIG_VERSION];t.default=F},uKwZ:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("SePM");var r=l(n("PMX6"));n("UvA9");var u=l(n("u4G2"));n("6dnR");var i=l(n("CQJL"));n("vmZS");var o=l(n("NjVP"));n("4X2C");var f=l(n("xvon"));n("GPKB");var c=l(n("mFAc")),d=l(n("p0pE")),s=l(n("gWZ8"));n("c94q");var m=l(n("Y/eX")),p=l(n("qIgq")),v=a(n("q1tI")),h=n("LvDl"),g={version:"v2",name:"",file_type:"csv",merge_bref:!1,fields:[],collapseActiveKey:[]};function y(e){var t=e.modelName,n=e.adminConfig,a=e.schemas,l=(0,v.useState)(_.cloneDeep(n[t].exportable)||g),y=(0,p.default)(l,2),E=y[0],b=y[1],C=(0,v.useState)("success"),S=(0,p.default)(C,2),w=S[0],O=S[1],x=(0,v.useState)(E.collapseActiveKey||[]),D=(0,p.default)(x,2),N=D[0],I=D[1],A=(0,v.useState)([]),k=(0,p.default)(A,2),F=k[0],P=k[1],j=(0,v.useState)([]),M=(0,p.default)(j,2),R=M[0],V=M[1],T=(0,v.useState)([]),z=(0,p.default)(T,2),q=z[0],W=z[1],L=m.default.Panel;function U(){b(n[t].exportable||g)}function $(e,t){var n=(0,s.default)(E.fields||[]);t?n.includes(e)||n.push(e):n=n.filter(function(t){return t!==e}),b((0,d.default)({},E,{fields:n}))}function G(e,t){var n=N||[];e.length>0?n.includes(t)||n.push(t):n=n.filter(function(e){return e!==t}),I(n)}function Z(){return E.collapseActiveKey=N,b(E),!!(0,h.isEmpty)(E.fields)||(!!E.name||(O("error"),c.default.error("\u8bf7\u8f93\u5165\u5bfc\u51fa\u914d\u7f6e\u7684\u540d\u79f0"),!1))}(0,v.useEffect)(function(){var e=[],n=[],l=[];a[t].fields.forEach(function(t){if("ref"===t.type){var r=t,u=[];a[t.ref].fields.forEach(function(e){"mref"!==e.type&&"ref"!==e.type&&"bref"!==e.type&&u.push({displayName:e.displayName,name:e.name})}),n.push({parenField:r,fieldxs:u})}else if("bref"===t.type||"mref"===t.type){var i=t,o=[],f=[];a[t.ref]&&a[t.ref].fields.forEach(function(e){if("mref"!==e.type&&"bref"!==e.type&&"ref"!==e.type)o.push({displayName:e.displayName,name:e.name});else if("ref"===e.type){var t=e,n=[];a[e.ref].fields.forEach(function(e){"mref"!==e.type&&"bref"!==e.type&&"ref"!==e.type&&n.push({displayName:e.displayName,name:e.name})}),f.push({shildParenField:t,shildDieldxs:n})}}),l.push({parenField:i,fieldxs:o,shildRefFiledsData:f})}else e.push({displayName:t.displayName,name:t.name})}),P(e),V(n),W(l)},[]);var B={background:"white",border:0},Y={labelCol:{xs:{span:18},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:18}}},J=v.default.createElement(o.default,Y,v.default.createElement(o.default.Item,{label:"\u540d\u79f0\uff1a",required:!0,validateStatus:w},v.default.createElement(f.default,{placeholder:"\u8bf7\u8f93\u5165\u5bfc\u51fa\u6309\u94ae\u7684\u540d\u79f0",onChange:function(e){var t=e.target.value;""===t&&O("error"),b((0,d.default)({},E,{name:t}))},value:E.name})),v.default.createElement(o.default.Item,{label:"\u683c\u5f0f\uff1a"},v.default.createElement(i.default.Group,{value:E.file_type,onChange:function(e){var t=e.target.value;b((0,d.default)({},E,{file_type:t}))}},v.default.createElement(i.default,{value:"csv"},"CSV"))),v.default.createElement(o.default.Item,{label:"\u5408\u5e76\u5b50\u9879\uff1a"},v.default.createElement(i.default.Group,{value:E.merge_bref||!1,onChange:function(e){var t=e.target.value;b((0,d.default)({},E,{merge_bref:t}))}},v.default.createElement(i.default,{value:!0},"\u662f"),v.default.createElement(i.default,{value:!1},"\u5426")),v.default.createElement("br",null),"\u5408\u5e76\u5b50\u9879\u4f1a\u628a\u591a\u6761\u5b50\u9879\u7684\u6570\u636e\u62fc\u63a5\u6210\u4e00\u6761\u6765\u663e\u793a\u3002"),v.default.createElement(o.default.Item,null,v.default.createElement(r.default,{bordered:!1,title:"\u5bfc\u51fa\u5b57\u6bb5\uff1a",style:{marginLeft:50,width:800}},v.default.createElement("div",{style:{marginLeft:70}},v.default.createElement(u.default.Group,{value:E.fields},F.map(function(e){return v.default.createElement(u.default,{onChange:function(t){$(e.name,t.target.checked)},style:{marginLeft:8},value:e.name},e.displayName)})),R.map(function(e){var t=e.parenField,n=e.fieldxs;return v.default.createElement(m.default,{style:{border:0},defaultActiveKey:E.collapseActiveKey},v.default.createElement(L,{header:"".concat(t.displayName,"(\u7236\u9879)"),key:t.displayName,style:B},v.default.createElement(u.default.Group,{value:E.fields,onChange:function(e){G(e,t.displayName)}},n.map(function(e){return v.default.createElement(u.default,{onChange:function(e){var t=e.target,n=t.value,a=t.checked;$(n,a)},value:"".concat(t.name,".").concat(e.name),style:{marginLeft:8}},"".concat(t.displayName,".").concat(e.displayName))}))))}),q&&q.map(function(e){var t=e.parenField,n=e.fieldxs,a=e.shildRefFiledsData;return v.default.createElement(m.default,{style:{border:0},defaultActiveKey:E.collapseActiveKey},v.default.createElement(L,{header:"".concat(t.displayName,"(\u5b50\u9879)"),key:t.displayName,style:B},v.default.createElement(u.default.Group,{value:E.fields,onChange:function(e){G(e,t.displayName)}},n.map(function(e){return v.default.createElement(u.default,{onChange:function(e){var t=e.target,n=t.value,a=t.checked;$(n,a)},value:"".concat(t.name,".").concat(e.name),style:{marginLeft:8}},"".concat(t.displayName,".").concat(e.displayName))})),a&&a.map(function(e){var n=e.shildParenField,a=e.shildDieldxs;return v.default.createElement(m.default,{style:{border:0,marginLeft:20},defaultActiveKey:E.collapseActiveKey},v.default.createElement(L,{header:"".concat(t.displayName,".").concat(n.displayName,"(\u7236\u9879)"),key:"".concat(t.displayName,".").concat(n.displayName),style:B},v.default.createElement(u.default.Group,{value:E.fields,onChange:function(e){G(e,"".concat(t.displayName,".").concat(n.displayName))}},a.map(function(e){return v.default.createElement(u.default,{onChange:function(e){var t=e.target,n=t.value,a=t.checked;$(n,a)},value:"".concat(t.name,".").concat(n.name,".").concat(e.name),style:{marginLeft:8}},"".concat(t.displayName,".").concat(n.displayName,".").concat(e.displayName))}))))})))})))));return[J,E,U,Z]}var E=y;t.default=E},umGZ:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("yavW");var r=l(n("WuMn"));n("vmZS");var u=l(n("NjVP")),i=a(n("q1tI")),o=l(n("LvDl")),f=n("mmaM"),c=l(n("8YRU"));function d(e){var t=e.groupsValue,n=e.groupsOnChange,a=e.userValue,l=e.userOnChange,d=e.staffModelFields,s=e.staffModel,m=e.defauldGroupValue,p=void 0===m?{}:m;return(0,i.useEffect)(function(){o.default.isEmpty(p.groups)||(0,f.queryContent)({model:"auth__group",filters:[{field:"id",operator:"in",value:p.groups}]}).then(function(e){var t=e.list;n(t)})},[]),i.default.createElement(i.default.Fragment,null,i.default.createElement(u.default.Item,{label:"\u4ec5\u6307\u5b9a\u89d2\u8272\u53ef\u89c1"},i.default.createElement(c.default,{value:t,field:{displayName:"\u89d2\u8272",name:"group",ref:"auth__group",refField:"permissions",refTo:"id",required:!1,type:"mref"},onChange:n})),!o.default.isEmpty(d)&&s&&i.default.createElement(u.default.Item,{label:"\u8be5\u5b57\u6bb5\u503c\u4e3a\u5f53\u524d\u7528\u6237\u65f6\u53ef\u89c1"},i.default.createElement(r.default,{style:{width:"100%"},placeholder:"\u672a\u9009\u62e9",value:a,onChange:l},d.map(function(e){return i.default.createElement(r.default.Option,{key:e.name},e.displayName)}))))}var s=d;t.default=s},yPhJ:function(e,t,n){"use strict";var a=n("tAuX"),l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("SePM");var r=l(n("PMX6"));n("eNCU");var u=l(n("pjJH")),i=l(n("p0pE")),o=l(n("qIgq")),f=a(n("q1tI")),c=n("Hg0r"),d=n("jfUH"),s=l(n("uKwZ")),m=l(n("Evl9")),p=l(n("D27F")),v=l(n("LK96"));function h(e){var t=e.schemas,n=e.modelName,a=e.adminWithoutDefault,l=e.updateAdmin,c=e.afterSubmit,d=e.defaultTab,h=void 0===d?"list":d,g=e.bsmSetting;if(!t[n])return null;var y=(0,m.default)({modelName:n,schemas:t,adminConfig:a,bsmSetting:g}),E=(0,o.default)(y,4),b=E[0],C=E[1],S=E[2],w=E[3],O=(0,p.default)({modelName:n,schemas:t,adminConfig:a,bsmSetting:g}),x=(0,o.default)(O,5),D=x[0],N=x[1],I=x[2],A=x[3],k=x[4],F=(0,v.default)({modelName:n,schemas:t,adminConfig:a,bsmSetting:g}),P=(0,o.default)(F,4),j=P[0],M=P[1],R=P[2],V=P[3],T=(0,s.default)({modelName:n,schemas:t,adminConfig:a}),z=(0,o.default)(T,4),q=z[0],W=z[1],L=z[2],U=z[3],$=(0,i.default)({},a[n],{exportable:W},C,N,M),G=function(){return _.mapValues(w(),function(e,t){$[t]=e}),_.mapValues(A(),function(e,t){$[t]=e}),_.mapValues(V(),function(e,t){$[t]=e}),$};function Z(){L(),S(),I(),R()}function B(){return k()&&U()}var Y={list:function(){return b},form:function(){return D},detail:function(){return j},export:function(){return q}},J=(0,f.useState)(h),K=(0,o.default)(J,2),X=K[0],H=K[1];return f.default.createElement(r.default,{activeTabKey:X,tabList:[{key:"list",tab:"\u5217\u8868\u9875\u8bbe\u7f6e"},{key:"form",tab:"\u8868\u5355\u8bbe\u7f6e"},{key:"detail",tab:"\u8be6\u60c5\u9875\u8bbe\u7f6e"},{key:"export",tab:"\u5bfc\u51fa\u8bbe\u7f6e"}],onTabChange:H,actions:[f.default.createElement("div",{style:{textAlign:"left",marginTop:12,marginBottom:12}},f.default.createElement(u.default,{onClick:function(){if(B()){G();var e=_.cloneDeep($);l({model:n,config:e}),c&&c({model:n,config:e})}},type:"primary",style:{marginLeft:24}},"\u66f4\u65b0"),f.default.createElement(u.default,{onClick:Z,style:{marginLeft:24}},"\u91cd\u7f6e"))]},Y[X]())}var g=(0,c.connect)(function(e){var t=e.bsmSetting;return{bsmSetting:t}})((0,d.connectContent)(h)),y=g;t.default=y}}]);