(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{Xjaj:function(t,e,n){"use strict";n.r(e);var r,i,c=n("2Taf"),a=n.n(c),o=n("vZ4D"),u=n.n(o),l=n("MhPg"),s=n.n(l),d=n("l4Ni"),f=n.n(d),p=n("ujKo"),h=n.n(p),m=n("q1tI"),v=n.n(m),y=n("bKel"),F=n.n(y),g=n("jehZ"),j=n.n(g),R=n("eHn4"),b=n.n(R),k=n("3a4m"),E=n.n(k),w=n("MuoO"),x=n("Hx5s"),D=n("xNPh"),P=n("jfUH"),U=n("pjZx"),C=n("C2ml");function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var H,K=(r=Object(w.connect)(function(t){var e=t.content,n=e.schemas,r=e.data;return{schemas:n,currentUser:t.user.currentUser,data:r}}),F()(i=r(i=function(t){s()(n,t);var e=O(n);function n(){return a()(this,n),e.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var t,e,n,r=this,i=this.props,c=i.match.params,a=c.id,o=c.pId,u=i.location.query.redirect_path,l=i.schemas,s=i.data,d=this.permissions,f=this.model;if(!d)return null;var p=0!==a&&a,h=l[f]||{},m=p?"编辑":"新建",y=p&&h.titleField&&(null===s||void 0===s?void 0:null===(t=s[f])||void 0===t?void 0:null===(e=t.detail)||void 0===e?void 0:null===(n=e[a])||void 0===n?void 0:n[h.titleField]),F="".concat(m).concat(h.displayName||""),g=Object(D.a)(f),R=this.pField&&{hiddenFields:b()({},this.pField.refField,o),hiddenvalues:b()({},this.pField.refField,o)},k=function(t){return r.pField?E.a.goBack():E.a.push(u?u.replace("{id}",Object(P.B)(t,f)):"/content/".concat(f))};return v.a.createElement(x.b,{title:y||F},v.a.createElement(C.a,null,y?"".concat(y," - "):"",F),p&&d.includes("change")||!p&&d.includes("add")?v.a.createElement(g,j()({onCreate:k,onUpdate:k,model:f,objectid:a},R)):v.a.createElement(U.a,null))}},{key:"pField",get:function(){var t,e=this.props,n=e.match.params,r=n.pModel,i=n.ref,c=e.schemas;return r&&(null===(t=c[r])||void 0===t?void 0:t.fields.find(function(t){return t.name===i}))}},{key:"model",get:function(){var t,e,n=this.props.match.params.model;return null!==(t=null===(e=this.pField)||void 0===e?void 0:e.ref)&&void 0!==t?t:n}},{key:"permissions",get:function(){var t=this.props.currentUser.permissions,e=this.model;return t?t.filter(function(t){return t.endsWith(e)}).map(function(t){return t.split("_")[0]}):null}}]),n}(m.PureComponent))||i)||i),M=n("7gdK");function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Z=F()(H=function(t){s()(n,t);var e=N(n);function n(){return a()(this,n),e.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var t=this.props.match.params.model;return v.a.createElement(v.a.Fragment,null,v.a.createElement(K,this.props),v.a.createElement(M.a,{key:t,model:t,defaultTab:"form"}))}}]),n}(m.Component))||H;e.default=Z}}]);