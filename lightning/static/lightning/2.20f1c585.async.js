(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"/IKB":function(e,a,t){"use strict";t("vmZS");var n=t("NjVP"),l=(t("yavW"),t("WuMn")),r=t("jrin"),i=t("k1fw"),o=t("tJVT"),c=t("q1tI"),u=t.n(c),m=t("mmaM"),s=t("0Owb"),d=(t("6dnR"),t("CQJL")),f=t("oBTY"),p=t("9Ndd"),v=t("jfUH");function b(e){var a=e.param,t=e.preset,l=e.onChange,r=e.mode,i=p["b"][p["e"][a.type]],o=function(e){var t=e.target.value,n="preset"===t?p["d"][a.type]:null;l(a.name,n,t)},c=function(e){l(a.name,e,r)},m=-1!==[].concat(Object(f["a"])(v["P"]),["date","datetime"]).indexOf(a.type)?{field:a}:{};return u.a.createElement(u.a.Fragment,null,u.a.createElement(n["a"].Item,{label:a.displayName||a.name},u.a.createElement(d["a"].Group,{onChange:o,value:r},u.a.createElement(d["a"],{value:"custom"},"\u7528\u6237\u8f93\u5165"),u.a.createElement(d["a"],{value:"preset"},"\u9884\u8bbe\u503c"))),"preset"===r&&u.a.createElement(n["a"].Item,{label:"\u9884\u8bbe\u503c"},u.a.createElement(i,Object(s["a"])({value:t,onChange:c},m))))}var g=b;function h(e){var a=e.model,t=e.scene,s=e.config,d=e.onChange,f=Object(c["useState"])([]),p=Object(o["a"])(f,2),v=p[0],b=p[1],h=Object(c["useState"])({}),E=Object(o["a"])(h,2),y=(E[0],E[1],function(e){return v.find((function(a){return a.name===e}))}),O=function(e){var a=y(e).params,t=Object(i["a"])(Object(i["a"])({},s),{},{action:e,fields:a});d(t)},C=function(e){d(Object(i["a"])(Object(i["a"])({},s),{},{rsp_processor:e}))},j=function(e,a,t,n){var l=s.fields,o=void 0===l?e.params:l,c=s.payload,u=void 0===c?{}:c;if("preset"===n&&d(Object(i["a"])(Object(i["a"])({},s),{},{action:e.name,fields:o.filter((function(e){return e.name!==a})),payload:Object(i["a"])(Object(i["a"])({},u),{},Object(r["a"])({},a,t))})),"custom"===n){var m=e.params.find((function(e){return e.name===a})),f=Object(i["a"])({},u);delete f[a],d(Object(i["a"])(Object(i["a"])({},s),{},{action:e.name,fields:o.concat(m),payload:f}))}};Object(c["useEffect"])((function(){Object(m["cloudFunction"])({model:"api_db__function",functionName:"cloud_functions",params:{model:a,scene:t}}).then((function(e){var a=e.result;b(a)}))}),[]);var w=y(null===s||void 0===s?void 0:s.action);return u.a.createElement(c["Fragment"],null,u.a.createElement(n["a"],{layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20}},u.a.createElement(n["a"].Item,{label:"\u51fd\u6570\u540d"},u.a.createElement(l["a"],{onChange:O,value:null===s||void 0===s?void 0:s.action},v.map((function(e){return u.a.createElement(l["a"].Option,{value:e.name,key:e.name},e.name)})))),w&&w.params&&u.a.createElement(n["a"].Item,{label:"\u53c2\u6570"},u.a.createElement(n["a"],{layout:"horizontal",labelCol:{span:6},wrapperCol:{span:18}},w.params.map((function(e){var a=null!==s&&void 0!==s&&s.payload?s.payload[e.name]:null,t=null!==s&&void 0!==s&&s.payload&&-1!==Object.keys(s.payload).indexOf(e.name)?"preset":"custom";return u.a.createElement(g,{param:Object(i["a"])(Object(i["a"])({},e),{},{nestForm:!1}),preset:a,mode:t,onChange:function(e,a,t){return j(w,e,a,t)}})})))),u.a.createElement(n["a"].Item,{label:"\u7ed3\u679c\u5904\u7406"},u.a.createElement(l["a"],{value:null===s||void 0===s?void 0:s.rsp_processor,onChange:C},u.a.createElement(l["a"].Option,{key:"nop",value:"nop"},"\u5ffd\u7565"),u.a.createElement(l["a"].Option,{key:"show",value:"show"},"\u5c55\u793a")))))}a["a"]=h},"5jOq":function(e,a,t){e.exports={divider:"divider___35NWu"}},"9fIt":function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return W}));t("+L6B");var n=t("2/Rp"),l=t("0Owb"),r=(t("sRBo"),t("kaz8")),i=(t("WlnS"),t("7sSx")),o=(t("yavW"),t("WuMn")),c=(t("h/qz"),t("GmeQ")),u=(t("4X2C"),t("xvon")),m=(t("vmZS"),t("NjVP")),s=t("k1fw"),d=t("oBTY"),f=t("tJVT"),p=t("q1tI"),v=t.n(p),b=t("4b23"),g=t.n(b),h=t("HrPU"),E=t("VW+w"),y=t("3i6F"),O=t("jfUH"),C=t("umGZ"),j=t("cPjh"),w=t("5jOq"),D=t.n(w),S=(t("fscj"),t("poQN")),F=[{label:"magenta",value:"magenta"},{label:"red",value:"red"},{label:"orange",value:"orange"},{label:"gold",value:"gold"},{label:"lime",value:"lime"},{label:"green",value:"green"},{label:"cyan",value:"cyan"},{label:"blue",value:"blue"},{label:"purple",value:"purple"}],I=[{label:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{label:"YYYY\u5e74MM\u6708DD\u65e5",value:"YYYY\u5e74MM\u6708DD\u65e5"},{label:"YYYY/MM/DD",value:"YYYY/MM/DD"}],N=[{label:"longText",value:"\u957f\u6587\u672c"},{label:"richText",value:"\u5bcc\u6587\u672c"},{label:"jsonText",value:"JSON"}],x={labelCol:{span:4},wrapperCol:{span:10}},k={Sum:"\u603b\u8ba1",Avg:"\u5e73\u5747",Max:"\u6700\u5927\u503c",Min:"\u6700\u5c0f\u503c"};function T(e){var a=e;return a.params||(a.params={}),"tag"!==a.widget||a.params.tagSetting||(a.params.tagSetting={}),a}var M=function(e,a){var t,n;return(null===(t=a[e])||void 0===t||null===(n=t.display)||void 0===n?void 0:n.map(T))||[]},A=function(e,a){var t;return(null===(t=a[e])||void 0===t?void 0:t.sortable)||[]};function V(a){var t=a.modelName,n=a.adminConfig,l=a.schemas,r=a.bsmSetting.staff_model,i=Object(p["useState"])((function(){return t&&n&&M(t,n)})),o=Object(f["a"])(i,2),c=o[0],u=o[1],m=Object(p["useState"])((function(){return t&&n&&A(t,n)})),v=Object(f["a"])(m,2),b=v[0],h=v[1],E=Object(p["useState"])([]),O=Object(f["a"])(E,2),C=O[0],j=O[1],w=Object(y["j"])(),D=Object(y["k"])();function S(a,t){var n=e.cloneDeep(c);n[a]={name:t},u(n)}function F(a,t){var n=e.cloneDeep(c);return t?n[a].alias=t:delete n[a].alias,u(n),n}function N(a,t,n){var l=Object(d["a"])(c);l[a]=null===t?e.omit(l[a],["summary"]):Object(s["a"])(Object(s["a"])({},l[a]),{},{summary:{field:n,method:t}}),u(l)}function x(e,a,t){var n=Object(d["a"])(c);n[e]=Object(s["a"])({},n[e]),n[e].summary=Object(s["a"])({},n[e].summary),n[e].summary[a]=t,u(n)}function k(){var e=[].concat(Object(d["a"])(c),[{params:{}}]);return u(e),e}function T(){u([].concat(Object(d["a"])(c),[{type:"combo",fields:{},params:{}}]))}function V(a){var t=e.cloneDeep(c);t.splice(a,1),u(t)}function R(e,a){u(M(e,a)),h(A(e,a))}function P(a,t){var n=e.cloneDeep(c),l=n[t];l.params={},l.name&&("tag"===a&&(l.params.tagSetting={}),"timeStamp"===a&&(l.params.timeFormat=I[0].value),l.fields={value:l.name}),l.widget=a,u(n)}function W(){var a=e.cloneDeep(c);return a.map((function(a){var t=Object(s["a"])({},a);return e.isEmpty(a.groups)||(t.groups=t.groups.filter((function(e){return e})).map((function(e){return e.id||e}))),a.id||(t.id=g()(6)),t}))}function L(a,t){var n=e.cloneDeep(b),l=c[t].name;if(!0===a)n.push(l),h(n);else{var r=n.filter((function(e){return e!==l}));h(r)}}function Y(a){var t=e.cloneDeep(c),n=t[FieldIndex];n.params={},n.widget=a,u(t)}function K(a,t){var n=e.cloneDeep(c);n[t].params.timeFormat=a,u(n)}function _(a,t){var n=e.cloneDeep(c);n[t].params.customFormat=a,u(n)}Object(p["useEffect"])((function(){if(t&&l&&r){var e=[];l[t].fields.forEach((function(a){a.ref===r&&e.push(a)})),j(e)}}),[t,r,l]);var B={modelName:t,adminConfig:n,schemas:l,staffModel:r,sortables:b,display:c,staffModelFields:C,handleFieldChange:S,handleAliasChange:F,handleFieldDelete:V,handleFieldAdd:k,setDisplay:u,handletemp:T,selectWidget:P,changeSortable:L,changeCombo:Y,changeTimeFormat:K,changeCustomFormat:_,handleSummaryChange:N,handleSummaryPropertyChange:x,displayWidgetMapping:w,displayWidgetName:D};return[c,b,R,W,B]}function R(a){var t,n,p,b,g,j,w,S=a.index,T=a.field,M=a.display,A=a.setDisplay,V=a.staffModelFields,R=a.handleFieldChange,P=a.handleAliasChange,W=a.sortables,L=a.modelName,Y=a.schemas,K=a.adminConfig,_=a.staffModel,B=a.selectWidget,J=a.handleSummaryChange,H=a.handleSummaryPropertyChange,G=a.changeSortable,q=a.changeCombo,U=a.changeTimeFormat,Z=a.changeCustomFormat,Q=a.displayWidgetMapping,z=a.displayWidgetName;if(!T||!L)return null;var X,$=T.name&&Object(O["t"])(L,T.name);$||($=Object(O["t"])(L,null===(X=T.fields)||void 0===X?void 0:X.value));var ee=[];$&&Q[$.type]&&(ee=Q[$.type]);var ae=T.name,te=T.type;"combo"===te&&(ee=y["d"]);var ne=[];return"mref"===(null===(t=$)||void 0===t?void 0:t.type)&&Y[$.ref].fields.forEach((function(e){["string","image","file"].includes(e.type)&&ne.push({label:e.name,value:e.displayName})})),v.a.createElement(m["a"],Object(l["a"])({},x,{name:"basic"}),v.a.createElement(m["a"].Item,{label:"\u5b57\u6bb5"},v.a.createElement(h["a"],{value:T.name,onChange:function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return R.apply(void 0,[S].concat(a))},model:L,disabled:"combo"===T.type,allowClear:!1})),v.a.createElement(m["a"].Item,{label:"\u5217\u540d"},v.a.createElement(u["a"],{allowClear:!0,value:T.alias,placeholder:T.name&&Object(E["displayPreprocess"])([e.cloneDeep(T)],L,Y)[0].alias,onChange:function(e){return P(S,e.target.value)}})),!te&&v.a.createElement(m["a"].Item,{label:"\u5f00\u542f\u6392\u5e8f"},v.a.createElement(c["a"],{defaultChecked:!1,checked:W.includes(ae),onChange:function(e){return G(e,S)}})),"combo"!==te&&!e.isEmpty(ee)&&v.a.createElement(m["a"].Item,{label:"\u9009\u62e9\u7ec4\u4ef6"},v.a.createElement(o["a"],{showSearch:!0,style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u8981\u663e\u793a\u7684\u7ec4\u4ef6",optionFilterProp:"children",value:T.widget?T.widget:null,onChange:function(e){return B(e,S)}},!$||e.uniq(ee.concat($.choices?["tag"]:[])).map((function(e){return v.a.createElement(o["a"].Option,{value:e},z[e]||e)})))),"combo"===te&&!e.isEmpty(ee)&&v.a.createElement(m["a"].Item,{label:"\u9009\u62e9\u6a21\u677f\u7ec4\u4ef6"},v.a.createElement(o["a"],{showSearch:!0,style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u8981\u663e\u793a\u7684\u7ec4\u4ef6",optionFilterProp:"children",value:T.widget?T.widget:null,onChange:function(e){return q(e,S)}},$||e.uniq(ee).map((function(e){return v.a.createElement(o["a"].Option,{value:e},z[e]||e)})))),T.widget&&"timeStamp"===T.widget&&v.a.createElement(m["a"].Item,{label:"\u914d\u7f6e\u65f6\u95f4\u683c\u5f0f"},v.a.createElement("div",{onMouseDown:function(e){return e.preventDefault(),!1}},v.a.createElement(o["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u65f6\u95f4\u683c\u5f0f",value:T.params.timeFormat,onChange:function(e){return U(e,S)}},I.map((function(e){return v.a.createElement(o["a"].Option,{value:e.value},e.label)}))))),T.widget&&"timeStamp"===T.widget&&v.a.createElement(m["a"].Item,{label:"\u81ea\u5b9a\u4e49\u65f6\u95f4\u683c\u5f0f"},v.a.createElement(u["a"],{style:{flex:"auto",width:"50%"},value:T.params.customFormat,onChange:function(e){var a=e.target.value;return Z(a,S)}})),T.widget&&"tag"===T.widget&&v.a.createElement(m["a"].Item,{label:"\u914d\u7f6e\u989c\u8272"},$.choices.map((function(a){var t=Object(f["a"])(a,2),n=t[0],l=t[1],r=T.params.tagSetting[n];return v.a.createElement("div",null,v.a.createElement(i["a"],{color:r},l),v.a.createElement(o["a"],{showSearch:!0,style:{width:200},placeholder:"\u8bf7\u914d\u7f6e\u989c\u8272",value:r,onChange:function(a){var t=e.cloneDeep(M);t[S].params.tagSetting[n]=a,A(t)}},F.map((function(e){return v.a.createElement(o["a"].Option,{className:"tagSetting".concat(e.value),value:e.value},e.label)}))))}))),T.widget&&"longtext"===T.widget&&v.a.createElement(m["a"].Item,{label:"\u914d\u7f6e\u5b57\u6bb5\u7c7b\u578b"},v.a.createElement("div",{onMouseDown:function(e){return e.preventDefault(),!1}},v.a.createElement(o["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u5b57\u6bb5\u7c7b\u578b",value:T.params.textType?N.filter((function(e){return e.label===T.params.textType})).map((function(e){return e.label})):null,onChange:function(a){var t=e.cloneDeep(M);t[S].params.textType=a,A(t)}},N.map((function(e){return v.a.createElement(o["a"].Option,{value:e.label},e.value)}))))),T.widget&&"textimg"===T.widget&&v.a.createElement(v.a.Fragment,null,v.a.createElement(m["a"].Item,{label:"\u6807\u9898\u5b57\u6bb5"},v.a.createElement(o["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u6807\u9898\u5b57\u6bb5",value:null===(n=T.fields)||void 0===n?void 0:n.title,onChange:function(a){if(a){var t=e.cloneDeep(M);t[S].fields.title=a,A(t)}}},Y[L].fields.map((function(e){return v.a.createElement(o["a"].Option,{value:e.name}," ",e.displayName)})))),v.a.createElement(m["a"].Item,{label:"\u56fe\u7247\u5b57\u6bb5"},v.a.createElement(o["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u56fe\u7247\u5b57\u6bb5",value:null===(p=T.fields)||void 0===p?void 0:p.avatar,onChange:function(a){if(a){var t=e.cloneDeep(M);t[S].fields.avatar=a,A(t)}}},Y[L].fields.map((function(e){return v.a.createElement(o["a"].Option,{value:e.name}," ",e.displayName)})))),v.a.createElement(m["a"].Item,{label:"\u5185\u5bb9\u5b57\u6bb5"},v.a.createElement(o["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u5185\u5bb9\u5b57\u6bb5",value:null===(b=T.fields)||void 0===b?void 0:b.text,onChange:function(a){if(a){var t=e.cloneDeep(M);t[S].fields.text=a,A(t)}}},Y[L].fields.map((function(e){return v.a.createElement(o["a"].Option,{value:e.name}," ",e.displayName)}))))),T.widget&&"urlImg"===T.widget&&"mref"===$.type&&v.a.createElement(m["a"].Item,{label:"\u56fe\u7247\u5b57\u6bb5",help:"\u8be5\u5b57\u6bb5\u5b58\u50a8\u56fe\u7247\u7684URL"},v.a.createElement("div",{onMouseDown:function(e){return e.preventDefault(),!1}},v.a.createElement(o["a"],{style:{width:240},placeholder:"\u8bf7\u914d\u7f6e\u56fe\u7247\u5b57\u6bb5",value:null===(g=T.params)||void 0===g?void 0:g.urlImgName,onChange:function(a){var t=e.cloneDeep(M);t[S].params.urlImgName=a,A(t)}},ne.map((function(e){return v.a.createElement(o["a"].Option,{value:e.label},e.value)}))))),["integer","float","decimal"].includes($.type)&&v.a.createElement(v.a.Fragment,null,v.a.createElement(m["a"].Item,{label:"\u603b\u7ed3\u884c"},v.a.createElement(o["a"],{onChange:function(e){return J(S,e,T.name)},value:T.summary?T.summary.method:null},v.a.createElement(o["a"].Option,{value:null},"\u7981\u7528"),e.map(k,(function(e,a){return v.a.createElement(o["a"].Option,{value:a},e)})))),T.summary&&v.a.createElement(v.a.Fragment,null,v.a.createElement(m["a"].Item,{label:"\u524d\u7f00"},v.a.createElement(u["a"],{allowClear:!0,placeholder:"\u5982\uff1a".concat(k[T.summary.method]),value:T.summary.prefix,onChange:function(e){return H(S,"prefix",e.target.value)}})),v.a.createElement(m["a"].Item,{label:"\u540e\u7f00"},v.a.createElement(u["a"],{allowClear:!0,value:T.summary.suffix,onChange:function(e){return H(S,"suffix",e.target.value)}})))),!$.type.endsWith("ref")&&v.a.createElement(m["a"].Item,{label:"\u5408\u5e76\u76f8\u540c\u884c"},v.a.createElement(r["a"],{checked:T.mergeRow,onChange:function(e){var a=Object(d["a"])(M);a[S]=Object(s["a"])({},a[S]),e.target.checked?a[S].mergeRow=!0:delete a[S].mergeRow,A(a)}})),v.a.createElement("div",{className:D.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),v.a.createElement(C["a"],{groupsValue:null!==(j=null===(w=T.groups)||void 0===w?void 0:w.filter((function(e){return!("number"===typeof e)})))&&void 0!==j?j:[],groupsOnChange:function(a){var t=e.cloneDeep(M);t[S].groups=a,A(Object(d["a"])(t))},userValue:T.userField,userOnChange:function(a){var t=e.cloneDeep(M);t[S].userField=a,A(Object(d["a"])(t))},staffModelFields:V,staffModel:_,defauldGroupValue:K[L].display[S]}))}function P(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting,r=V({modelName:a,adminConfig:t,schemas:n,bsmSetting:l}),i=Object(f["a"])(r,5),o=i[0],c=i[1],u=i[2],m=i[3],d=i[4],p=Object(O["cb"])(a);return[o,c,u,m,Object(s["a"])(Object(s["a"])({},d),{},{pathGetter:p})]}function W(e){var a=e.pathGetter,t=e.display,r=e.handleFieldChange,i=e.handleFieldDelete,o=e.handleFieldAdd,c=e.setDisplay,u=e.handletemp,m=e.modelName;return v.a.createElement(j["b"],{bordered:!1,allData:t,setData:c,title:"\u5217\u8868\u5b57\u6bb5",sections:[(null===t||void 0===t?void 0:t.length)||0],setSections:function(e){c(e[0].fields)},columns:[{title:"\u663e\u793a\u540d\u79f0",key:"alias",render:function(e){var t;return null!==(t=e.alias)&&void 0!==t?t:e.name&&a(e.name).join("")}},{title:"\u5b57\u6bb5",key:"name",render:function(e,a,t){return v.a.createElement(h["a"],{value:e.name,onChange:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return r.apply(void 0,[t].concat(a))},model:m,disabled:"combo"===e.type},e.name&&v.a.createElement(S["a"],{fieldPath:e.name,modelName:m}))}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,a,t){return v.a.createElement(v.a.Fragment,null,v.a.createElement("a",{onClick:function(){return i(t)}},"\u5220\u9664"))}}],footer:function(){return v.a.createElement("div",null,v.a.createElement(n["a"],{onClick:o},"\u6dfb\u52a0\u4e00\u5217"),v.a.createElement(n["a"],{style:{margin:5},onClick:u},"\u6dfb\u52a0\u7ec4\u5408\u5b57\u6bb5"))},expandedRowRender:function(a,n){return v.a.createElement(R,Object(l["a"])({index:n,field:t[n]},e))}})}a["b"]=P}).call(this,t("LvDl"))},Evl9:function(e,a,t){"use strict";t.d(a,"a",(function(){return Se}));t("SePM");var n=t("PMX6"),l=(t("vmZS"),t("NjVP")),r=(t("6dnR"),t("CQJL")),i=(t("QjdF"),t("U4Vl")),o=t("0Owb"),c=t("tJVT"),u=t("q1tI"),m=t.n(u),s=(t("52nx"),t("7bDm")),d=(t("cW/2"),t("RtDF")),f=(t("eNCU"),t("pjJH")),p=t("jrin"),v=t("k1fw"),b=t("oBTY"),g=t("RsOY"),h=t.n(g),E=t("LvDl"),y=t.n(E),O=t("4b23"),C=t.n(O),j=t("HrPU"),w=t("umGZ"),D=t("cPjh"),S=t("5jOq"),F=t.n(S),I=t("poQN"),N=function(e){return e.name?e:{name:e}};function x(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:0},n=t.id,l=t.title,r=void 0===l?"":l,i=[];return a[e].fields.forEach((function(e){if("bref"!==e.type){var a=n?"".concat(n,".").concat(e.name):e.name,t={id:a,pId:n,value:a,title:"".concat(r?"".concat(r,"."):"").concat(e.displayName)};e.ref&&(t.fieldRef=e.ref),i.push(t)}})),i}var k=function(e,a){var t,n;return(null===a||void 0===a||null===(t=a[e])||void 0===t||null===(n=t.filter)||void 0===n?void 0:n.map(N))||[]};function T(e){var a=e.modelName,t=e.schemas,n=e.adminConfig,l=e.staffModel,r=Object(u["useState"])((function(){return k(a,n)})),i=Object(c["a"])(r,2),o=i[0],m=i[1],s=Object(u["useState"])([]),d=Object(c["a"])(s,2),f=d[0],g=d[1];Object(u["useEffect"])((function(){if(a&&n&&l){var e=[];t[a].fields.forEach((function(a){a.ref===l&&e.push(a)})),g(e)}}),[a,n,l,t]);var h=function(e,a){return m(k(e,a))},E=function(e,a,t){var n=Object(b["a"])(o);n[e]=Object(v["a"])(Object(v["a"])({},n[e]),{},Object(p["a"])({},t,a)),m(n)},O=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return E.apply(void 0,a.concat(["name"]))},j=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return E.apply(void 0,a.concat(["groups"]))},w=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return E.apply(void 0,a.concat(["userField"]))},D=function(){var e=y.a.cloneDeep(o);return e.map((function(e){var a=Object(v["a"])({},e);return y.a.isEmpty(e.groups)||(a.groups=a.groups.filter((function(e){return e})).map((function(e){return e.id||e}))),e.id||(a.id=C()(6)),a}))};return[o,m,{handleTitleChange:O,checkFilters:D,reset:h,groupsOnChange:j,userOnChange:w,staffModelFields:f}]}function M(e){var a,t,n=e.adminConfig,r=e.modelName,i=e.index,o=e.filter,c=e.staffModel,u=e.handleTitleChange,s=e.staffModelFields,d=e.groupsOnChange,f=e.userOnChange;return o&&m.a.createElement(l["a"],{labelCol:{span:6},wrapperCol:{span:8}},m.a.createElement(l["a"].Item,{label:"\u5b57\u6bb5"},m.a.createElement(j["a"],{value:o.name,onChange:function(e){return u(i,e)},model:r,allowClear:!1})),m.a.createElement("div",{className:F.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),m.a.createElement(w["a"],{groupsValue:null!==(a=null===(t=o.groups)||void 0===t?void 0:t.filter((function(e){return!("number"===typeof e)})))&&void 0!==a?a:[],groupsOnChange:function(e){return d(i,e)},userValue:o.userField,userOnChange:function(e){return f(i,e)},staffModelFields:s,staffModel:c,defauldGroupValue:n[r].filter[i]}))}function A(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting.staff_model,r=Object(u["useState"])([]),i=Object(c["a"])(r,2),o=i[0],m=i[1],s=Object(u["useState"])(!1),d=Object(c["a"])(s,2),f=d[0],p=d[1],v=Object(u["useState"])([]),g=Object(c["a"])(v,2),E=g[0],y=g[1],O=T({modelName:a,adminConfig:t,schemas:n,staffModel:l}),C=Object(c["a"])(O,3),j=C[0],w=C[1],D=C[2],S=D.handleTitleChange,F=D.checkFilters,I=D.reset,k=D.groupsOnChange,M=D.userOnChange,A=D.staffModelFields;function V(e){var a=Object(b["a"])(j);a.splice(e,1),w(a)}function R(e,a){w(h()(j,{$splice:[[e,1,{name:a}]]}))}function P(e){w([].concat(Object(b["a"])(j),Object(b["a"])(e.map(N))))}function W(){P(E),p(!1)}function L(){p(!1),y([])}return Object(u["useEffect"])((function(){if(a&&n){var e=x(a,n);e.forEach((function(a){a.fieldRef&&e.push.apply(e,Object(b["a"])(x(a.fieldRef,n,a)))})),m(e)}}),[a,n]),[j,I,F,{selectKeys:E,setSelectKeys:y,setFilters:w,filterData:o,handleFieldChange:R,deleteField:V,visible:f,setVisible:p,onOK:W,handleTitleChange:S,checkFilters:F,groupsOnChange:k,userOnChange:M,staffModelFields:A,afterClose:L}]}function V(e){var a=e.filters,t=e.modelName,n=e.adminConfig,l=e.bsmSetting.staff_model,r=e.selectKeys,i=e.setSelectKeys,o=e.setFilters,c=e.filterData,u=e.handleFieldChange,p=e.deleteField,v=e.visible,b=e.setVisible,g=e.onOK,E=e.handleTitleChange,y=e.groupsOnChange,O=e.userOnChange,C=e.staffModelFields,w=e.afterClose,S=m.a.createElement(D["b"],{allData:a,setData:o,title:"\u7b5b\u9009\u5b57\u6bb5",sections:[(null===a||void 0===a?void 0:a.length)||0],columns:[{title:"\u5b57\u6bb5",key:"name",render:function(e,a,n){return m.a.createElement(j["a"],{value:e.name||e,onChange:function(e){return u(n,e)},model:t,layer:2},m.a.createElement(I["a"],{fieldPath:e.name,modelName:t}))}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,a,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{onClick:function(){return p(t)}},"\u5220\u9664"))}}],footer:function(){return m.a.createElement("div",null,m.a.createElement(f["a"],{onClick:function(){return b(!0)}},"\u6dfb\u52a0\u5b57\u6bb5"))},expandedRowRender:function(e,r){return m.a.createElement(M,{index:r,filter:null===a||void 0===a?void 0:a[r],adminConfig:n,modelName:t,staffModel:l,setFilters:o,handleTitleChange:E,staffModelFields:C,groupsOnChange:y,userOnChange:O})}}),F=m.a.createElement(d["a"],{treeDataSimpleMode:!0,style:{width:"100%"},value:r,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8bf7\u9009\u62e9",onChange:i,multiple:!0,treeData:c.map((function(e){return h()(e,{disabled:{$set:a.some((function(a){return a.name===e.value}))}})})),filterTreeNode:function(e,a){var t=a.props;return["title","value"].some((function(a){return t[a].toLowerCase().includes(e.toLowerCase())}))}});return m.a.createElement(m.a.Fragment,null,m.a.createElement(s["a"],{title:"\u6dfb\u52a0\u5b57\u6bb5",visible:v,onOk:g,onCancel:function(){return b(!1)},afterClose:w,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},F),S)}var R=A,P=t("9fIt"),W=t("Q8IV"),L=(t("4X2C"),t("xvon")),Y=(t("yavW"),t("WuMn")),K=t("EBSl"),_=t("9Ndd"),B=t("xNPh"),J=(t("eE3J"),t("GSZB")),H=t("/MKj");function G(e){var a=e.schemas,t=e.model,n=e.onChange,l=e.fieldFilter,r=e.value,i=void 0===r?[]:r,c=function(){var e=y.a.cloneDeep(i);e.push({}),n(e)};function u(e){var a=y.a.cloneDeep(i);a.splice(e,1),n(a)}if(!y.a.isArray(i))return null;var s=_["b"].TextInput,d={};return m.a.createElement(m.a.Fragment,null,i.map((function(e,r){if(e.name){var c=a[t].fields.find((function(a){return a.name===e.name}));s=_["b"][_["e"][c.type]]}return m.a.createElement("div",null,m.a.createElement("div",{style:{display:"flex"}},m.a.createElement("div",{style:{marginRight:8}},m.a.createElement(j["a"],{value:e.name,fieldFilter:l,onChange:function(e){var a=y.a.cloneDeep(i);a[r].name=e,a[r].value&&(a[r].value=void 0),n(a)},model:t})),m.a.createElement("div",{style:{marginRight:8}},m.a.createElement(s,Object(o["a"])({onChange:function(e){var a=y.a.cloneDeep(i);a[r].value=e,n(a)},value:e.value},d))),m.a.createElement("a",{onClick:function(){return u(r)},style:{marginLeft:8}},m.a.createElement(J["a"],{type:"delete",style:{fontSize:20}}))))})),m.a.createElement(f["a"],{type:"dashed",style:{width:354},onClick:c},m.a.createElement(J["a"],{type:"plus"})))}var q=Object(H["c"])((function(e){var a=e.content.schemas;return{schemas:a}}))(G),U="Form_winght_new",Z=["choices","default","displayName","editable","help","maxDigits","maxLength","name","precision","primaryKey","readonly","ref","refField","refTo","required","type","validators"],Q=Object(B["a"])();function z(e){return y.a.pick(e,Z)}function X(e,a){var t=a.model,n=a.values,l=Object(v["a"])(Object(v["a"])({},y.a.omit(e,Z)),{},{name:e.name}),r=l.params;return r&&"function"===typeof r&&(l.params=r({model:t,values:n})),l}function $(e){var a=e.paramsDef,t=void 0===a?[]:a,n=e.onChange,l=e.model,r=e.values,i=Object(p["a"])({},U,{fields:t.map(z)}),o=Object(p["a"])({},U,{formFields:t.map((function(e){return X(e,{model:l,values:r})}))});return m.a.createElement(Q,{hideCard:!0,model:U,schemas:i,admins:o,showButtons:!1,object:r,onValuesChange:n})}Object(_["f"])("FieldsSet",q,"\u5b57\u6bb5\u914d\u7f6e\u5668");var ee=t("/IKB"),ae=K["a"].ACTION_TYPE_BATCH;function te(e){var a={action:e,name:ae[e].name,params:{},groups:[]};return a}var ne=function(e,a){var t;return(null===(t=a[e])||void 0===t?void 0:t.actions)||[]};function le(e){var a=e.modelName,t=e.schemas,n=e.adminConfig,l=e.bsmSetting.staff_model,r=Object(u["useState"])((function(){return n&&a&&ne(a,n)})),i=Object(c["a"])(r,2),o=i[0],m=void 0===o?[]:o,s=i[1],d=Object(u["useState"])([]),f=Object(c["a"])(d,2),p=f[0],g=f[1];function h(e,a){s(ne(e,a))}function E(){s([].concat(Object(b["a"])(m),[{}]))}function O(e){var a=e.map(te);s([].concat(Object(b["a"])(m),Object(b["a"])(a)))}function j(e){var a=y.a.cloneDeep(m);a.splice(e,1),s(a)}function w(e,a){var t=y.a.cloneDeep(m);t[e].action=a,t[e].name=ae[a].name,t[e].params={},s(t)}function D(e,a){var t=y.a.cloneDeep(m);t[e].name=a,s(t)}function S(e,a){var t=y.a.cloneDeep(m);t[e].confirm=a,s(t)}Object(u["useEffect"])((function(){if(a&&t&&l){var e=[];t[a].fields.forEach((function(a){a.ref===l&&e.push(a)})),g(e)}}),[l,a,t]);var F=function(){var e=y.a.cloneDeep(m);return e.map((function(e){var a=Object(v["a"])({},e);return y.a.isEmpty(e.groups)||(a.groups=a.groups.filter((function(e){return e})).map((function(e){return e.id||e}))),e.id||(a.id=C()(6)),a}))},I={handleTitleChange:D,handleDelete:j,handleAdd:E,setActions:s,addActions:O,handleConfirmChange:S,handleTypeChange:w,staffModelFields:p,modelName:a,schemas:t,adminConfig:n};return[m,h,F,I]}function re(e){var a,t,n,r=e.index,i=e.actions,o=e.staffModel,c=e.modelName,u=e.adminConfig,s=e.setActions,d=e.handleTitleChange,f=e.handleTypeChange,p=e.handleConfirmChange,v=e.staffModelFields;if(void 0===r)return null;var g=i[r];return m.a.createElement(l["a"],{labelCol:{span:6},wrapperCol:{span:14}},m.a.createElement(l["a"].Item,{label:"\u6279\u91cf\u64cd\u4f5c\u7c7b\u578b"},m.a.createElement(Y["a"],{value:g.action,onChange:function(e){return f(r,e)}},Object.keys(ae).map((function(e){return m.a.createElement(Y["a"].Option,{value:e},ae[e].name)})))),m.a.createElement(l["a"].Item,{label:"\u6279\u91cf\u64cd\u4f5c\u540d\u79f0"},m.a.createElement(L["a"],{value:g.name,onChange:function(e){return d(r,e.target.value)}})),m.a.createElement(l["a"].Item,{label:"\u64cd\u4f5c\u524d\u786e\u8ba4"},m.a.createElement(L["a"],{value:g.confirm,onChange:function(e){return p(r,e.target.value)}})),"action"===g.action?m.a.createElement(l["a"].Item,{label:"\u4e91\u51fd\u6570"},m.a.createElement(ee["a"],{model:c,scene:"batch",config:g.params,onChange:function(e){var a=Object(b["a"])(i);a[r].params=e,s(a)}})):m.a.createElement($,{paramsDef:ae[g.action].paramsDef,model:c,values:g.params,onChange:function(e,a){var t=Object(b["a"])(i),n=ae[g.action].paramsDef.find((function(a){return a.name===e}));t[r].params[e]=!0===n.isJson?JSON.parse(a):a,s(t)}}),m.a.createElement("div",{className:F.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),m.a.createElement(w["a"],{groupsValue:null!==(a=null===(t=g.groups)||void 0===t?void 0:t.filter((function(e){return!("number"===typeof e)})))&&void 0!==a?a:[],groupsOnChange:function(e){var a=y.a.cloneDeep(i);a[r].groups=e,s(Object(b["a"])(a))},userValue:g.userField,userOnChange:function(e){var a=y.a.cloneDeep(i);a[r].userField=e,s(Object(b["a"])(a))},staffModelFields:v,staffModel:o,defauldGroupValue:null===(n=u[c].actions)||void 0===n?void 0:n[r]}))}function ie(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting,r=le({modelName:a,schemas:n,adminConfig:t,bsmSetting:l}),i=Object(c["a"])(r,4),o=i[0],m=i[1],s=i[2],d=i[3],f=Object(u["useState"])([]),p=Object(c["a"])(f,2),b=p[0],g=p[1],h=Object(u["useState"])(!1),E=Object(c["a"])(h,2),y=E[0],O=E[1],C=d.addActions;function j(){C(b),O(!1)}function w(){O(!1),g([])}return[o,m,s,Object(v["a"])(Object(v["a"])({},d),{},{selectKeys:b,setSelectKeys:g,visible:y,setVisible:O,afterClose:w,onOK:j})]}function oe(e){var a=e.selectKeys,t=e.setSelectKeys,n=e.visible,r=e.setVisible,i=e.onOK,c=e.afterClose,u=e.setActions,d=e.handleDelete,p=e.actions,v=m.a.createElement("div",null,m.a.createElement(l["a"].Item,{label:"\u9009\u62e9\u7c7b\u578b",labelCol:{span:6},wrapperCol:{span:18}},m.a.createElement(Y["a"],{mode:"multiple",defaultValue:[],value:a,onChange:t,style:{minWidth:160}},Object.keys(ae).map((function(e,a){return m.a.createElement(Y["a"].Option,{value:e,key:"".concat(e,"__").concat(a+1)},ae[e].name)}))))),b=m.a.createElement(D["b"],{allData:p,setData:u,sections:[(null===p||void 0===p?void 0:p.length)||0],title:"\u6279\u91cf\u64cd\u4f5c",setSections:function(e){u(e[0].fields)},columns:[{title:"\u6279\u91cf\u64cd\u4f5c",key:"name",render:function(e){return e.name||ae[e.action].name}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,a,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{onClick:function(){return d(t)}},"\u5220\u9664"))}}],footer:function(){return m.a.createElement(f["a"],{onClick:function(){return r(!0)}},"\u6dfb\u52a0\u64cd\u4f5c\u9879")},expandedRowRender:function(a,t){return m.a.createElement(re,Object(o["a"])({index:t,actions:p},e))}});return m.a.createElement(m.a.Fragment,null,m.a.createElement(s["a"],{title:"\u6dfb\u52a0\u64cd\u4f5c\u9879",visible:n,onOk:i,onCancel:function(){return r(!1)},afterClose:c,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},v),b)}var ce=ie,ue=(t("2qtc"),t("kLXV")),me=(t("+L6B"),t("2/Rp")),se=(t("5NDa"),t("5rEg")),de=(t("y8nQ"),t("Vl3Y")),fe=(t("OaEy"),t("2fM7")),pe=t("uRgk"),ve=t("O/S9"),be={add:"\u65b0\u5efa",excelImport:"\u5bfc\u5165",link:"\u94fe\u63a5\u8df3\u8f6c",action:"\u4e91\u51fd\u6570"},ge={link:"\u7f51\u5740",action:"\u4e91\u51fd\u6570"};function he(e){var a={type:e,title:be[e],params:{},icon:""};return a}var Ee=function(e,a){var t;return(null===(t=a[e])||void 0===t?void 0:t.tableActions)||[]};function ye(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting.staff_model,r=Object(u["useState"])((function(){return t&&a&&Ee(a,t)})),i=Object(c["a"])(r,2),o=i[0],m=void 0===o?[]:o,s=i[1],d=Object(u["useState"])([]),f=Object(c["a"])(d,2),p=f[0],v=f[1];function g(e,a){s(Ee(e,a))}function h(){s([].concat(Object(b["a"])(m),[{}]))}function E(e){var a=e.map(he);s([].concat(Object(b["a"])(m),Object(b["a"])(a)))}function O(e){var a=y.a.cloneDeep(m);a.splice(e,1),s(a)}function C(e,a){var t=y.a.cloneDeep(m);t[e].type=a,t[e].title=be[a],t[e].params={},s(t)}function j(e,a){var t=y.a.cloneDeep(m);t[e].title=a,s(t)}function w(e,a){var t=y.a.cloneDeep(m);t[e].confirm=a,s(t)}function D(e,a,t){var n=y.a.cloneDeep(m);a?n[e].params[a]=t:n[e].params=t,s(n)}function S(e,a){var t=y.a.cloneDeep(m);t[e].icon=a,s(t)}Object(u["useEffect"])((function(){if(a&&l&&n){var e=[];n[a].fields.forEach((function(a){a.ref===l&&e.push(a)})),v(e)}}),[l,a,n]);var F=function(){var e=y.a.cloneDeep(m);return e.filter((function(e){return e.type}))},I={modelName:a,schemas:n,adminConfig:t,staffModel:l,staffModelFields:p,handleTypeChange:C,handleIcon:S,handleConfirmChange:w,handleParamsChange:D,handleTitleChange:j,handleDelete:O,handleAdd:h,setTabAction:s,addTabActions:E};return[m,g,F,I]}function Oe(e){var a,t,n=e.index,l=e.schemas,r=e.modelName,i=e.adminConfig,o=e.staffModel,c=e.tableActions,u=e.setTabAction,s=e.handleTypeChange,d=e.handleIcon,f=e.handleTitleChange,p=e.handleConfirmChange,v=e.handleParamsChange,g=e.staffModelFields;if(void 0===n||!i)return null;var h=c[n];return m.a.createElement(de["a"],{labelCol:{span:6},wrapperCol:{span:14}},m.a.createElement(de["a"].Item,{label:"\u5168\u5c40\u64cd\u4f5c\u7c7b\u578b"},m.a.createElement(fe["a"],{value:h.type,onChange:function(e){return s(n,e)}},Object.keys(be).map((function(e){return m.a.createElement(fe["a"].Option,{value:e},be[e])})))),m.a.createElement(de["a"].Item,{label:"\u64cd\u4f5c\u56fe\u6807"},m.a.createElement(pe["a"],{onChange:function(e){d(n,e)},value:h.icon})),m.a.createElement(de["a"].Item,{label:"\u5168\u5c40\u64cd\u4f5c\u540d\u79f0"},m.a.createElement(se["a"],{value:h.title,onChange:function(e){return f(n,e.target.value)}})),m.a.createElement(de["a"].Item,{label:"\u64cd\u4f5c\u524d\u786e\u8ba4"},m.a.createElement(se["a"],{value:h.confirm,onChange:function(e){return p(n,e.target.value)}})),"link"===h.type&&m.a.createElement(m.a.Fragment,null,m.a.createElement(de["a"].Item,{label:ge[h.type]},m.a.createElement(se["a"],{value:h.params[h.type],onChange:function(e){return v(n,h.type,e.target.value)}}))),"action"===h.type&&m.a.createElement(de["a"].Item,{label:ge[h.type]},m.a.createElement(ee["a"],{model:r,scene:"unlimit",config:h.params,onChange:function(e){return v(n,null,e)}})),m.a.createElement("div",{className:F.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),m.a.createElement(w["a"],{groupsValue:null!==(a=null===(t=h.groups)||void 0===t?void 0:t.filter((function(e){return!("number"===typeof e)})))&&void 0!==a?a:[],groupsOnChange:function(e){var a=y.a.cloneDeep(c);a[n].groups=e,u(Object(b["a"])(a))},userValue:h.userField,userOnChange:function(e){var a=y.a.cloneDeep(h);a[n].userField=e,u(Object(b["a"])(a))},staffModelFields:g,staffModel:o,defauldGroupValue:i[r].inlineActions[n]}),m.a.createElement(de["a"].Item,{label:"\u6ee1\u8db3\u6761\u4ef6\u663e\u793a",wrapperCol:{span:15}},m.a.createElement("div",null,m.a.createElement(ve["a"],{fields:l[r].fields,value:h.showIf||[],context:{model:r},onChange:function(e){var a=y.a.cloneDeep(c);a[n].showIf=e,u(a)},disabledField:function(e){return h.showIf.map((function(e){return e.field})).filter((function(e){return e})).includes(e.name)}}))))}function Ce(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting,r=Object(u["useState"])(!1),i=Object(c["a"])(r,2),o=i[0],m=i[1],s=Object(u["useState"])([]),d=Object(c["a"])(s,2),f=d[0],p=d[1],b=ye({modelName:a,schemas:n,adminConfig:t,bsmSetting:l}),g=Object(c["a"])(b,4),h=g[0],E=g[1],y=g[2],O=g[3],C=O.addTabActions;function j(){C(f),m(!1)}function w(){m(!1),p([])}function D(){m(!0)}return[h,E,y,Object(v["a"])(Object(v["a"])({},O),{},{addTableActions:D,afterClose:w,onOK:j,visible:o,selectKeys:f,setSelectKeys:p})]}function je(e){var a=e.tableActions,t=e.addTableActions,n=e.afterClose,l=e.onOK,r=e.visible,i=e.selectKeys,c=e.setSelectKeys,u=e.handleDelete,s=e.setTabAction,d=m.a.createElement(D["b"],{allData:a,setData:s,sections:[(null===a||void 0===a?void 0:a.length)||0],title:"\u5168\u5c40\u64cd\u4f5c",setSections:function(e){s(e[0].fields)},columns:[{title:"\u5168\u5c40\u64cd\u4f5c",key:"name",render:function(e){return e.title||be[e.type]}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,a,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement("a",{onClick:function(){return u(t)}},"\u5220\u9664"))}}],footer:function(){return m.a.createElement(me["a"],{onClick:t},"\u6dfb\u52a0\u64cd\u4f5c\u9879")},expandedRowRender:function(t,n){return m.a.createElement(Oe,Object(o["a"])({index:n,tableActions:a},e))}}),f=m.a.createElement("div",null,m.a.createElement(de["a"].Item,{label:"\u9009\u62e9\u7c7b\u578b",labelCol:{span:6},wrapperCol:{span:18}},m.a.createElement(fe["a"],{mode:"multiple",defaultValue:[],value:i,onChange:c,style:{minWidth:160}},Object.keys(be).map((function(e,a){return m.a.createElement(fe["a"].Option,{value:e,key:"".concat(e,"__").concat(a+1)},be[e])})))));return m.a.createElement(m.a.Fragment,null,m.a.createElement(ue["a"],{title:"\u6dfb\u52a0\u64cd\u4f5c\u9879",visible:r,onOk:l,onCancel:function(){return setVisible(!1)},afterClose:n,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},f),d)}var we=Ce;function De(e){var a,t=e.modelName,n=e.schemas,l=e.adminConfig,r=e.bsmSetting,i=R({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),o=Object(c["a"])(i,4),m=o[0],s=o[1],d=o[2],f=o[3],p=Object(P["b"])({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),v=Object(c["a"])(p,5),b=v[0],g=v[1],h=v[2],E=v[3],y=v[4],O=Object(W["b"])({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),C=Object(c["a"])(O,4),j=C[0],w=C[1],D=C[2],S=C[3],F=ce({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),I=Object(c["a"])(F,4),N=I[0],x=I[1],k=I[2],T=I[3],M=Object(u["useState"])((null===l||void 0===l||null===(a=l[t])||void 0===a?void 0:a.filterLayout)||"default"),A=Object(c["a"])(M,2),V=A[0],L=A[1],Y=we({modelName:t,schemas:n,adminConfig:l,bsmSetting:r}),K=Object(c["a"])(Y,4),_=K[0],B=K[1],J=K[2],H=K[3];function G(e,a){var t;L((null===(t=a[e])||void 0===t?void 0:t.filterLayout)||"default")}function q(e,a){h(e,a),w(e,a),x(e,a),B(e,a),s(e,a),G(e,a)}var U={display:b,filter:m,inlineActions:j,actions:N,tableActions:_,sortable:g,filterLayout:V};function Z(){var e=D();U.inlineActions=e;var a=k();U.actions=a;var t=E();U.display=t;var n=d();U.filter=n;var l=J();return U.tableActions=l,U}var Q={modelName:t,schemas:n,adminConfig:l,bsmSetting:r,filter:m,filterProps:f,inlineActions:j,inlineActionsProps:S,display:b,displayFomProps:y,actions:N,actionsProps:T,tableActions:_,tableactionProps:H,filterLayout:V,setFilterLayout:L};return[U,q,Z,Q]}function Se(e){var a=e.modelName,t=e.schemas,c=e.adminConfig,u=e.bsmSetting,s=e.filter,d=e.filterProps,f=e.inlineActions,p=e.inlineActionsProps,v=e.display,b=e.displayFomProps,g=e.actions,h=e.actionsProps,E=e.tableActions,y=e.tableactionProps,O=e.filterLayout,C=e.setFilterLayout,j=m.a.createElement(V,Object(o["a"])({filters:s,modelName:a,schemas:t,adminConfig:c,bsmSetting:u},d)),w=m.a.createElement(P["a"],Object(o["a"])({display:v},b)),D=m.a.createElement(W["a"],Object(o["a"])({inlineActions:f},p)),S=m.a.createElement(oe,Object(o["a"])({actions:g},h)),F=m.a.createElement(je,Object(o["a"])({tableActions:E},y));return m.a.createElement(m.a.Fragment,null,w,m.a.createElement(i["a"],null),j,m.a.createElement("div",null,m.a.createElement(n["a"],{type:"inner"},m.a.createElement(l["a"],{layout:"inline"},m.a.createElement(l["a"].Item,{label:"\u4f4d\u7f6e"},m.a.createElement(r["a"].Group,{value:O,onChange:function(e){var a=e.target.value;return C(a)}},m.a.createElement(r["a"],{value:"default"},"\u9876\u90e8"),m.a.createElement(r["a"],{value:"drawer"},"\u4fa7\u62c9")))))),m.a.createElement(i["a"],null),D,m.a.createElement(i["a"],null),S,m.a.createElement(i["a"],null),F)}a["b"]=De},"O/S9":function(e,a,t){"use strict";(function(e){t("eNCU");var n=t("pjJH"),l=(t("eE3J"),t("GSZB")),r=t("q1tI"),i=t.n(r),o=t("4b23"),c=t.n(o),u=t("yNIE"),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e;return e.key||(a.key="index__".concat(c()(5))),a};function s(a){var t=a.value,o=void 0===t?[]:t,c=a.onChange,s=a.fields,d=a.disabledField,f=a.setFieldName,p=a.context,v=a.valueTypes,b=function(){o.push(m()),c(o)};function g(a){var t=e.cloneDeep(o);t.splice(a,1),c(t)}return Object(r["useEffect"])((function(){e.isArray(o)?c(o.map((function(e){return m(e)}))):c([m(o)])}),[]),e.isArray(o)?i.a.createElement(i.a.Fragment,null,o.filter((function(e){return s.find((function(a){return!((!e.field||a.name!==(null===e||void 0===e?void 0:e.field))&&e.field)}))})).map((function(e,a){return i.a.createElement("div",{key:e.key},i.a.createElement(u["a"],{key:e.key,fields:s,onChange:function(e){c(o.map((function(a){return a.key===e.key?e:a})))},value:e,disabledField:d,setFieldName:f,context:p,valueTypes:v}),i.a.createElement("a",{onClick:function(){return g(a)},style:{marginLeft:8}},i.a.createElement(l["a"],{type:"delete",style:{fontSize:20}})))})),i.a.createElement(n["a"],{type:"dashed",style:{width:354},onClick:b},i.a.createElement(l["a"],{type:"plus"}))):null}a["a"]=s}).call(this,t("LvDl"))},Q8IV:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return M}));t("52nx");var n=t("7bDm"),l=(t("eNCU"),t("pjJH")),r=(t("eE3J"),t("GSZB")),i=t("0Owb"),o=(t("h/qz"),t("GmeQ")),c=(t("4X2C"),t("xvon")),u=(t("vmZS"),t("NjVP")),m=(t("yavW"),t("WuMn")),s=t("k1fw"),d=t("oBTY"),f=t("tJVT"),p=t("q1tI"),v=t.n(p),b=t("4b23"),g=t.n(b),h=t("HrPU"),E=t("556t"),y=t("O/S9"),O=t("umGZ"),C=t("cPjh"),j=t("9Ndd"),w=t("/IKB"),D=t("jfUH"),S=t("5jOq"),F=t.n(S);function I(e){var a={action:e,title:E["a"][e],params:{},showIf:[],groups:[],id:g()(6)};return["partEdit","nowEdit"].includes(e)&&(a.params.fields=[]),"partEdit"===e&&(a.params.editFields=[]),["refEdit","refDetail"].includes(e)&&(a.showInModal=!0),a}var N=function(e,a){return a[e].inlineActions||[]};function x(a){var t=a.modelName,n=a.schemas,l=a.adminConfig,r=a.bsmSetting.staff_model,i=Object(p["useState"])((function(){return t&&l&&N(t,l)})),o=Object(f["a"])(i,2),c=o[0],u=o[1],m=Object(p["useState"])([]),v=Object(f["a"])(m,2),b=v[0],h=v[1];function y(e,a){u(N(e,a))}function O(){u([].concat(Object(d["a"])(c),[{}]))}function C(e){var a=e.map(I);u([].concat(Object(d["a"])(c),Object(d["a"])(a)))}function j(a){var t=e.cloneDeep(c);t.splice(a,1),u(t)}function w(a,t){var n=e.cloneDeep(c);n[a]=I(t),u(n)}function D(a,t){var n=e.cloneDeep(c);n[a].title=t,u(n)}function S(a,t){var n=e.cloneDeep(c);n[a].confirm=t,u(n)}function F(a,t,n){var l=e.cloneDeep(c);t?l[a].params[t]=n:l[a].params=n,u(l)}function x(){var a=e.cloneDeep(c);return a.filter((function(e){var a=!!e.action;return E["b"].includes(e.action)&&(a=a&&!(!e.params.field&&!e.field)),a})).map((function(a){var t,n,l=Object(s["a"])({},a);["partEdit","nowEdit"].includes(a.action)&&(l.params.fields=null===(t=l.params.fields)||void 0===t?void 0:t.filter((function(e){return e.name&&void 0!==e.value})),l.showIf=null===(n=l.showIf)||void 0===n?void 0:n.filter((function(e){return e.field&&e.operator&&void 0!==e.value})));return e.isEmpty(a.groups)||(l.groups=l.groups.filter((function(e){return e})).map((function(e){return e.id||e}))),a.id||(l.id=g()(6)),l}))}Object(p["useEffect"])((function(){if(t&&l){var a=e.cloneDeep(l[t].inlineActions);if(a.forEach((function(a){e.isObject(a.showIf)&&!e.isArray(a.showIf)&&(a.showIf=[a.showIf])})),r){var i=[];n[t].fields.forEach((function(e){e.ref===r&&i.push(e)})),h(i)}var o=new Set;(l[t].inlineActions||[]).forEach((function(a){e.isEmpty(a.groups)||a.groups.forEach((function(e){return o.add(e)}))})),u(a)}}),[l,t,n,r]);var k={inlineActions:c,staffModelFields:b,staffModel:r,modelName:t,schemas:n,adminConfig:l,handleParamsChange:F,handleTitleChange:D,handleDelete:j,handleAdd:O,setInlineActions:u,addActions:C,reset:y,checkInlineActions:x,handleConfirmChange:S,handleTypeChange:w};return[c,y,x,k]}function k(a){var t,n,s=a.inlineActions,f=a.staffModelFields,p=a.staffModel,b=a.modelName,g=a.schemas,C=a.adminConfig,S=a.handleParamsChange,I=a.handleTitleChange,N=a.setInlineActions,x=a.handleConfirmChange,k=a.handleTypeChange,T=a.index;if(void 0===T)return null;var M=s[T];return v.a.createElement(u["a"],{labelCol:{span:6},wrapperCol:{span:14}},v.a.createElement(u["a"].Item,{label:"\u64cd\u4f5c\u7c7b\u578b"},v.a.createElement(m["a"],{value:M.action,onChange:function(e){return k(T,e)}},e.map(E["a"],(function(e,a){return v.a.createElement(m["a"].Option,{value:a},e)})))),v.a.createElement(u["a"].Item,{label:"\u64cd\u4f5c\u540d\u79f0"},v.a.createElement(c["a"],{value:M.title,onChange:function(e){return I(T,e.target.value)}})),v.a.createElement(u["a"].Item,{label:"\u64cd\u4f5c\u524d\u786e\u8ba4"},v.a.createElement(c["a"],{value:M.confirm,onChange:function(e){return x(T,e.target.value)}})),"action"===M.action&&v.a.createElement(u["a"].Item,{label:"\u4e91\u51fd\u6570"},v.a.createElement(w["a"],{model:b,scene:"inline",config:M.params,onChange:function(e){return S(T,null,e)}})),"info"===M.action&&v.a.createElement(v.a.Fragment,null,v.a.createElement(u["a"].Item,{label:"\u6807\u9898"},v.a.createElement(c["a"],{value:M.params.title,onChange:function(e){return S(T,"title",e.target.value)}})),v.a.createElement(u["a"].Item,{label:"\u6b63\u6587"},v.a.createElement(c["a"],{value:M.params.content,onChange:function(e){return S(T,"content",e.target.value)}}))),"link"===M.action&&v.a.createElement(v.a.Fragment,null,v.a.createElement(u["a"].Item,{label:"\u7f51\u5740"},v.a.createElement(c["a"],{value:M.params.link,onChange:function(e){return S(T,"link",e.target.value)}}))),E["b"].includes(M.action)&&v.a.createElement(v.a.Fragment,null,v.a.createElement(u["a"].Item,{label:"\u5173\u8054\u5b57\u6bb5"},v.a.createElement(h["a"],{value:M.params.field||M.field,onChange:function(a){var t=e.cloneDeep(s);t[T].params.field=a,N(t)},layer:1,fieldFilter:function(e){return"refAdd"===M.action?Object(D["z"])(e):Object(D["D"])(e)},model:b})),"refAdd"!==M.action&&v.a.createElement(u["a"].Item,{label:"\u5f39\u7a97\u663e\u793a"},v.a.createElement(o["a"],{checked:M.showInModal,onChange:function(a){var t=e.cloneDeep(s);t[T].showInModal=a,N(t)}}))),["partEdit","nowEdit"].includes(M.action)&&v.a.createElement(v.a.Fragment,null,"partEdit"===M.action&&v.a.createElement(u["a"].Item,{label:"\u53ef\u7f16\u8f91\u5b57\u6bb5"},v.a.createElement(m["a"],{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u6dfb\u52a0\u53ef\u7f16\u8f91\u5b57\u6bb5",value:M.params.editFields,onChange:function(a){var t=e.cloneDeep(s);t[T].params.editFields=a,N(Object(d["a"])(t))}},g[b].fields.map((function(e){return v.a.createElement(m["a"].Option,{key:e.name},e.displayName)})))),v.a.createElement(u["a"].Item,{label:"\u8bbe\u7f6e\u5c5e\u6027\u503c",wrapperCol:{span:10}},v.a.createElement("div",null,(M.params.fields||[]).map((function(a,t){var n=j["b"].TextInput,l={};if(a.name){var o=g[b].fields.find((function(e){return e.name===a.name}));if(!o)return null;l.field=o,n=j["b"][j["e"][o.type]]}return v.a.createElement("div",{style:{display:"flex"}},v.a.createElement("div",{style:{marginRight:8}},v.a.createElement(h["a"],{value:a.name,onChange:function(a){var n=e.cloneDeep(s);n[T].params.fields[t].name=a,n[T].params.fields[t].value=void 0,N(n)},fieldDisable:function(e){return M.params.fields.map((function(e){return e.name})).includes(e.name)},fieldFilter:function(e){return!Object(D["B"])(e)&&!e.primaryKey},model:b})),v.a.createElement("div",{style:{marginRight:8}},v.a.createElement(n,Object(i["a"])({value:a.value,onChange:function(a){var n=e.cloneDeep(s);n[T].params.fields[t].value=a,N(n)}},l))),v.a.createElement("div",null,v.a.createElement("a",{onClick:function(){var a=e.cloneDeep(s);a[T].params.fields=a[T].params.fields.filter((function(e,a){return a!==t})),N(a)},style:{marginLeft:8}},v.a.createElement(r["a"],{type:"delete",style:{fontSize:20}}))))}))),v.a.createElement("div",null,v.a.createElement(l["a"],{type:"dashed",style:{width:"100%"},onClick:function(){var a=e.cloneDeep(s);a[T].params.fields.push({}),N(a)}},v.a.createElement(r["a"],{type:"plus"}))))),v.a.createElement("div",{className:F.a.divider,style:{marginBottom:16}},"\u6743\u9650\u8bbe\u7f6e"),v.a.createElement(O["a"],{groupsValue:null!==(t=null===(n=M.groups)||void 0===n?void 0:n.filter((function(e){return!("number"===typeof e)})))&&void 0!==t?t:[],groupsOnChange:function(a){var t=e.cloneDeep(s);t[T].groups=a,N(Object(d["a"])(t))},userValue:M.userField,userOnChange:function(a){var t=e.cloneDeep(s);t[T].userField=a,N(Object(d["a"])(t))},staffModelFields:f,staffModel:p,defauldGroupValue:C[b].inlineActions[T]}),v.a.createElement(u["a"].Item,{label:"\u6ee1\u8db3\u6761\u4ef6\u663e\u793a",wrapperCol:{span:15}},v.a.createElement("div",null,v.a.createElement(y["a"],{fields:g[b].fields,value:M.showIf||[],context:{model:b},onChange:function(a){var t=e.cloneDeep(s);t[T].showIf=a,N(t)},disabledField:function(e){return M.showIf.map((function(e){return e.field})).filter((function(e){return e})).includes(e.name)}}))))}function T(e){var a=e.modelName,t=e.adminConfig,n=e.schemas,l=e.bsmSetting,r=x({modelName:a,schemas:n,adminConfig:t,bsmSetting:l}),i=Object(f["a"])(r,4),o=i[0],c=i[1],u=i[2],m=i[3],d=Object(p["useState"])([]),v=Object(f["a"])(d,2),b=v[0],g=v[1],h=Object(p["useState"])(!1),E=Object(f["a"])(h,2),y=E[0],O=E[1],C=m.addActions;function j(){C(b),O(!1)}function w(){O(!1),g([])}return[o,c,u,Object(s["a"])(Object(s["a"])({},m),{},{afterClose:w,onOK:j,visible:y,setVisible:O,selectKeys:b,setSelectKeys:g})]}function M(e){var a=e.handleDelete,t=e.setInlineActions,r=e.inlineActions,o=e.setVisible,c=e.visible,s=e.onOK,d=e.afterClose,f=e.selectKeys,p=e.setSelectKeys,b=v.a.createElement("div",null,v.a.createElement(u["a"].Item,{label:"\u9009\u62e9\u7c7b\u578b",labelCol:{span:6},wrapperCol:{span:18}},v.a.createElement(m["a"],{mode:"multiple",defaultValue:[],value:f,onChange:p,style:{minWidth:160}},Object.keys(E["a"]).map((function(e,a){return v.a.createElement(m["a"].Option,{value:e,key:"".concat(e,"__").concat(a+1)},E["a"][e])}))))),g=v.a.createElement(C["b"],{allData:r,setData:t,sections:[(null===r||void 0===r?void 0:r.length)||0],title:"\u64cd\u4f5c\u9879",setSections:function(e){t(e[0].fields)},columns:[{title:"\u64cd\u4f5c\u9879",key:"name",render:function(e){return e.title||E["a"][e.action]}},{title:"\u64cd\u4f5c",key:"operation",render:function(e,t,n){return v.a.createElement(v.a.Fragment,null,v.a.createElement("a",{onClick:function(){return a(n)}},"\u5220\u9664"))}}],footer:function(){return v.a.createElement(l["a"],{onClick:function(){return o(!0)}},"\u6dfb\u52a0\u64cd\u4f5c\u9879")},expandedRowRender:function(a,t){return v.a.createElement(k,Object(i["a"])({index:t},e))}});return v.a.createElement(v.a.Fragment,null,v.a.createElement(n["a"],{title:"\u6dfb\u52a0\u64cd\u4f5c\u9879",visible:c,onOk:s,onCancel:function(){return o(!1)},afterClose:d,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},b),g)}a["b"]=T}).call(this,t("LvDl"))},SWtE:function(e,a,t){},"Va/H":function(e,a,t){"use strict";t("cW/2");var n=t("RtDF"),l=t("oBTY"),r=t("tJVT"),i=t("q1tI"),o=t.n(i),c=t("jfUH");function u(e){var a=e.modelName,t=e.onChange,u=e.value,m=Object(c["ub"])(),s=Object(i["useState"])([]),d=Object(r["a"])(s,2),f=d[0],p=d[1],v=function e(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return m[a].fields.map((function(a){var r=a.ref,i=t.map((function(e){return e.name})).join("."),c=[].concat(Object(l["a"])(t),[a]),u=c.map((function(e){return e.name})).join("."),m=c.map((function(e){return e.displayName})).join(".");return o.a.createElement(n["a"].TreeNode,{displayName:m,title:a.displayName,value:u,key:u},(!t.length||f.includes(i))&&r&&e(r,c))}))},b=function(e){return Object(c["l"])(m,e,a).map((function(e){return e.displayName})).join(".")};return o.a.createElement(n["a"],{treeExpandedKeys:f,onTreeExpand:p,treeDefaultExpandAll:!0,onChange:function(e){return t(e.map((function(e){return e.value})))},value:u&&u.map((function(e){return{label:b(e),value:e}})),showCheckedStrategy:n["a"].SHOW_ALL,treeNodeLabelProp:"displayName",treeCheckable:!0,treeCheckStrictly:!0,style:{width:"100%"}},v(a))}a["a"]=u},cPjh:function(e,a,t){"use strict";(function(e){t.d(a,"c",(function(){return S})),t.d(a,"a",(function(){return k})),t.d(a,"d",(function(){return M}));t("52nx");var n=t("7bDm"),l=(t("yavW"),t("WuMn")),r=(t("vmZS"),t("NjVP")),i=t("tJVT"),o=(t("eNCU"),t("pjJH"),t("6dnR"),t("CQJL")),c=(t("fu2T"),t("gK9i")),u=(t("SePM"),t("PMX6")),m=(t("Dvpn"),t("myml")),s=(t("eE3J"),t("GSZB")),d=t("0Owb"),f=t("k1fw"),p=t("PpiC"),v=t("q1tI"),b=t.n(v),g=t("RsOY"),h=t.n(g),E=t("4b23"),y=t.n(E),O=t("wiuW"),C=t("4l6Y"),j=(t("SWtE"),t("Va/H")),w=-1,D=-1;function S(e,a,t){var n=e;return t.forEach((function(e,t){t<a&&(n+=e)})),n}function F(e){var a=e.isOver,t=e.connectDragSource,n=e.connectDropTarget,l=(e.moveRow,Object(p["a"])(e,["isOver","connectDragSource","connectDropTarget","moveRow"])),r=Object(f["a"])(Object(f["a"])({},l.style),{},{cursor:"move"}),i=l.className;return a&&((l.sectionindex>D||D===l.sectionindex&&l.index>w)&&(i+=" drop-item-over-downward"),(l.sectionindex<D||D===l.sectionindex&&l.index<w)&&(i+=" drop-item-over-upward")),t(n(b.a.createElement("tr",Object(d["a"])({},l,{className:i,style:r}))))}var I={beginDrag:function(e){return w=e.index,D=e.sectionindex,{index:e.index,sectionindex:e.sectionindex}}},N={drop:function(e,a){var t=a.getItem(),n=t.index,l=t.sectionindex,r=e.index,i=e.sectionindex;l===i&&n===r||e.moveRow(n,r,l,i)}};function x(a){var t=a.setData,n=a.allData,l=a.sections,r=a.sectionTitles,i=a.addAndDeleteView,o=a.styleView,p=a.cardTitle,v=a.footer,g=a.columns,E=a.expandedRowRender,j=a.tableTitle,w=a.setSections,x=a.key,k=void 0===x?y()(5):x,T=a.sectionStyle,M=a.detailStyle,A=a.addAndWidget;function V(e,a,r,i){var o=S(e,r,l),c=S(a,i,l),u=n[o];t(h()(n,{$splice:[[o,1],[c,0,u]]})),w&&r!==i&&w(h()(l,{$splice:[[r,1,l[r]-1],[i,1,l[i]+1]]}))}function R(e,a,r){var i=S(e,a,l),o=n[i];t(h()(n,{$splice:[[i,1],[S(0,r,l),0,o]]})),w(h()(l,{$splice:[[a,1,l[a]-1],[r,1,l[r]+1]]}))}var P=function(e){return g.map((function(a){var t=Object(f["a"])({},a);if(t.render){var n=t.render;t.render=function(a,t,l){return n(a,t,l,e)}}return t}))},W=function(e){return function(a,t,n,l){return E(a,t,n,l,e)}};function L(e){var a=0,t=0;l.forEach((function(n,l){l<e&&(a+=n),l===e&&(t=n)}));var r=null===n||void 0===n?void 0:n.slice(a,a+t);return r}return b.a.createElement(C["b"],null,(function(t){var n=t.DropTarget,f=t.DragSource,g=function(e){return n(e,{drop:function(e,a){var t=a.getItem(),n=t.index,l=t.sectionindex,r=e.sectionindex;l!==r&&e.addRow(n,l,r)}},(function(e,a){return{connectDropTarget:e.dropTarget(),isOver:a.isOver()}}))((function(e){var a=e.connectDropTarget,t=e.isOver,n=e.sectionindex,l=t&&D!==n;return a(b.a.createElement("div",{style:{display:"flex",alignItems:"center",marginRight:18,color:"#1890ff"}},"\u52a0\u5165\u672c\u7ec4:\xa0",b.a.createElement(s["a"],{type:l?"fullscreen-exit":"plus",style:{fontSize:20}})))}))},h=g(k),y=function(e){return n(e,N,(function(e,a){return{connectDropTarget:e.dropTarget(),isOver:a.isOver()}}))(f(e,I,(function(e){return{connectDragSource:e.dragSource()}}))(F))},C={body:{row:y(k)}},w=l.map((function(t,n){var o,s,f=L(n),p=b.a.createElement(u["a"],{title:j&&j(n),bodyStyle:{padding:0},extra:!!i&&b.a.createElement("div",{style:{display:"flex",alignItems:"center"}},e.isEmpty(f)&&!(T&&(null===(o=T[n])||void 0===o?void 0:o.widget)in O["c"])&&b.a.createElement(h,{addRow:R,sectionindex:n}),i(n)),bordered:i},b.a.createElement("div",{className:"container"},"default"!==M&&T&&(null===(s=T[n])||void 0===s?void 0:s.widget)in O["c"]||b.a.createElement(m["a"],Object(d["a"])({},a,{dataSource:f,components:C,onRow:function(e,a){return{index:a,moveRow:V,sectionindex:n}},footer:function(){return b.a.createElement(b.a.Fragment,null,v(n),b.a.createElement("div",{className:"content",style:{float:"right",width:300}},A&&A(n)))},columns:P(n),expandedRowRender:E&&W(n)}))));return l.length>1?b.a.createElement(c["a"].Panel,{header:r[n]||"\u7b2c".concat(n+1,"\u7ec4"),forceRender:!0},p):p}));return b.a.createElement(u["a"],{title:p,bodyStyle:{padding:0},extra:o&&o()},l.length>1?b.a.createElement(c["a"],{defaultActiveKey:["0","1","2","3","4"],ghost:!0},w):w)}))}function k(a){var t=a.onChange,n=a.value,l=a.layouts,r=void 0===l?{}:l;return b.a.createElement("div",null,"\u6392\u5217\u65b9\u5f0f : \xa0\xa0",b.a.createElement(o["a"].Group,{value:n,onChange:function(e){return t(e.target.value)}},b.a.createElement(o["a"],{value:"default"},"\u9ed8\u8ba4"),e.map(r,(function(e,a){return b.a.createElement(o["a"],{value:a},e)}))))}function T(e,a){return e.toLowerCase().includes(a.toLowerCase())}function M(e){var a=e.modelName,t=e.schemas,o=e.fieldDisabled,c=Object(p["a"])(e,["modelName","schemas","fieldDisabled"]),u=Object(v["useState"])([]),m=Object(i["a"])(u,2),s=m[0],d=m[1],f=Object(v["useState"])(!1),g=Object(i["a"])(f,2),h=g[0],E=g[1];function y(){E(!1),c.onOk&&c.onOk()}function O(){E(!0)}function C(){E(!1),d([])}var w=b.a.createElement(r["a"].Item,{label:"\u9009\u62e9\u5b57\u6bb5",labelCol:{span:6},wrapperCol:{span:18}},b.a.createElement(j["a"],{modelName:a,value:s,onChange:d})),D=b.a.createElement("div",null,b.a.createElement(r["a"].Item,{label:"\u9009\u62e9\u5b57\u6bb5",labelCol:{span:6},wrapperCol:{span:18}},b.a.createElement(l["a"],{mode:"multiple",defaultValue:[],value:s,onChange:d,style:{minWidth:160},filterOption:function(e,a){var t=a.props,n=t.value,l=t.children;return T(n,e)||T(l,e)}},t[a].fields.map((function(e){return b.a.createElement(l["a"].Option,{value:e.name,key:e.name,disabled:o&&o(e)},e.displayName)}))))),S=c.expand,F=b.a.createElement(n["a"],{title:"\u6dfb\u52a0\u5b57\u6bb5",visible:h,onOk:y,onCancel:function(){return E(!1)},afterClose:C,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},S?w:D);return[F,s,O]}function A(e){var a=e.sections,t=void 0===a?[{}]:a,n=e.sectionTitles,l=void 0===n?[]:n,r=e.setData,i=e.columns,o=e.footer,c=e.expandedRowRender,u=e.hiddenAdd,m=void 0!==u&&u,s=e.addAndDeleteView,d=e.styleView,f=e.title,p=e.modalView,v=e.allData,g=e.tableTitle,h=e.setSections,E=e.sectionStyle,y=e.style,O=e.addAndWidget,C=e.bordered,j=void 0===C||C;return b.a.createElement("div",null,p,b.a.createElement(x,{modalView:p,columns:i,expandedRowRender:c,sections:t,sectionTitles:l,allData:v,setData:r,size:"middle",bordered:j,pagination:!1,footer:o,styleView:d,addAndDeleteView:s,hiddenAdd:m,cardTitle:f,tableTitle:g,setSections:h,sectionStyle:E,detailStyle:y,addAndWidget:O}))}a["b"]=A}).call(this,t("LvDl"))},fscj:function(e,a,t){},poQN:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));t("GNNt");var n=t("wEI+"),l=(t("+L6B"),t("2/Rp")),r=t("q1tI"),i=t.n(r),o=t("jfUH"),c=function(e){var a=e.children;return i.a.createElement(n["a"],{autoInsertSpaceInButton:!1},i.a.createElement(l["a"],{style:{border:"none"}},a))},u=function(e){var a=e.fieldPath,t=e.modelName,n=Object(o["cb"])(t);return i.a.createElement(c,null,n(a).join(" > "))}},umGZ:function(e,a,t){"use strict";t("yavW");var n=t("WuMn"),l=(t("vmZS"),t("NjVP")),r=t("q1tI"),i=t.n(r),o=t("LvDl"),c=t.n(o),u=t("mmaM"),m=t("3V3B");function s(e){var a=e.groupsValue,t=e.groupsOnChange,o=e.userValue,s=e.userOnChange,d=e.staffModelFields,f=e.staffModel,p=e.defauldGroupValue,v=void 0===p?{}:p;return Object(r["useEffect"])((function(){c.a.isEmpty(v.groups)||Object(u["queryContent"])({model:"auth__group",filters:[{field:"id",operator:"in",value:v.groups}]}).then((function(e){var a=e.list;t(a)}))}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(l["a"].Item,{label:"\u4ec5\u6307\u5b9a\u89d2\u8272\u53ef\u89c1"},i.a.createElement(m["a"],{value:a,field:{displayName:"\u89d2\u8272",name:"group",ref:"auth__group",refField:"permissions",refTo:"id",required:!1,type:"mref"},onChange:t})),!c.a.isEmpty(d)&&f&&i.a.createElement(l["a"].Item,{label:"\u8be5\u5b57\u6bb5\u503c\u4e3a\u5f53\u524d\u7528\u6237\u65f6\u53ef\u89c1"},i.a.createElement(n["a"],{style:{width:"100%"},placeholder:"\u672a\u9009\u62e9",value:o,onChange:s},d.map((function(e){return i.a.createElement(n["a"].Option,{key:e.name},e.displayName)})))))}a["a"]=s},yNIE:function(e,a,t){"use strict";t("4csm");var n=t("2Fwu"),l=(t("eNCU"),t("pjJH")),r=(t("eE3J"),t("GSZB")),i=t("0Owb"),o=t("k1fw"),c=(t("9kbU"),t("vbHR")),u=t("tJVT"),m=(t("yavW"),t("WuMn")),s=t("q1tI"),d=t.n(s),f=t("LvDl"),p=t.n(f),v=t("9Ndd"),b=t("jfUH"),g=m["a"].Option,h={">":{name:"\u5927\u4e8e"},"=":{name:"\u7b49\u4e8e"},"<":{name:"\u5c0f\u4e8e"},between:{name:"\u65e5\u671f\u8303\u56f4"}},E="\u6307\u5b9a\u503c",y="\u53ef\u53d8\u503c",O={string:[">","<","="],integer:[">","<","="],decimal:[">","<","="],datetime:[">","<","="],float:[">","<","="],bool:["="],date:[">","<","="],ref:[">","<","="],mref:[">","<","="],bref:["="],richtext:[">","<","="]};function C(e){var a=e.value,t=void 0===a?{}:a,f=e.onChange,C=e.fields,j=e.disabledField,w=e.setFieldName,D=e.valueTypes,S=void 0===D?[E]:D,F=e.context.model,I={};t.field&&(I=C.find((function(e){return e.name===t.field})));var N=I,x=N.type,k=function(e){var a=p.a.cloneDeep(t);a.field=e,f(a)},T=function(e){var a=p.a.cloneDeep(t);a.operator=e,f(a)},M=function(e){var a=p.a.cloneDeep(t);a.value=e,f(a)},A=function(e){var a=p.a.cloneDeep(t);a.variable=e,f(a)},V=E;t.variable&&(V=y);var R=Object(s["useState"])(V),P=Object(u["a"])(R,2),W=P[0],L=P[1],Y=d.a.createElement(c["a"],{onClick:function(e){var a=e.key;return L(a)}},S.map((function(e){return d.a.createElement(c["a"].Item,{key:e},e)}))),K=v["b"].TextInput;if(!p.a.isEmpty(I)){var _=v["b"][v["e"][x]],B=v["b"].Select;K=Object(b["D"])(I)?function(e){return d.a.createElement(B,Object(i["a"])({},e,{placeholder:"\u641c\u7d22".concat(I.displayName),field:Object(o["a"])(Object(o["a"])({},I),{},{type:"mref"}),allowUndefined:!0}))}:["mref","bref"].includes(I.type)?function(e){return d.a.createElement(B,Object(i["a"])({},e,{placeholder:"\u641c\u7d22".concat(I.displayName),field:Object(o["a"])(Object(o["a"])({},I),{},{type:"mref"})}))}:function(e){return d.a.createElement(_,Object(i["a"])({},e,{field:I}))}}return d.a.createElement(d.a.Fragment,null,d.a.createElement(m["a"],{placeholder:"\u8bf7\u9009\u62e9",onChange:k,style:{width:110},value:t.field,allowClear:!0},C.map((function(e){return"text"!==e.type&&d.a.createElement(g,{key:e.name,value:e.name,disabled:j&&j(e)},w?w(e):e.displayName)}))),!p.a.isEmpty(t.field)&&d.a.createElement(d.a.Fragment,null,d.a.createElement(m["a"],{placeholder:"\u64cd\u4f5c\u7b26",style:{width:90,marginLeft:8,marginRight:8},onSelect:T,value:t.operator},O[x].map((function(e){return d.a.createElement(g,{key:e,value:e},h[e].name)}))),S.length>1&&d.a.createElement(n["a"],{overlay:Y},d.a.createElement(l["a"],null,W," ",d.a.createElement(r["a"],{type:"down",theme:"outlined"}))),W===E?d.a.createElement(K,{style:{width:130},value:t.value,onChange:M}):d.a.createElement(m["a"],{placeholder:"\u8bf7\u9009\u62e9\u5b57\u6bb5",style:{width:130},onSelect:A,value:t.variable},Object(b["s"])(F).fields.filter((function(e){return e.type===x&&(!Object(b["C"])(x)||e.ref===I.ref)})).map((function(e){return d.a.createElement(g,{key:e.name,value:e.name},e.displayName)})))))}a["a"]=C}}]);