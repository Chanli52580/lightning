(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{NeHv:function(e,t,r){e.exports={main:"antd-pro-bsm-user-register-main",getCaptcha:"antd-pro-bsm-user-register-getCaptcha",submit:"antd-pro-bsm-user-register-submit",login:"antd-pro-bsm-user-register-login",error:"antd-pro-bsm-user-register-error",success:"antd-pro-bsm-user-register-success",warning:"antd-pro-bsm-user-register-warning","progress-pass":"antd-pro-bsm-user-register-progress-pass",progress:"antd-pro-bsm-user-register-progress"}},uNUk:function(e,t,r){"use strict";r.r(t);r("14J3");var a,s=r("BMrR"),n=(r("+L6B"),r("2/Rp")),i=(r("jCWc"),r("kPKH")),o=(r("Q9mQ"),r("diRs")),l=(r("MXD1"),r("CFYs")),c=r("d6i3"),d=r.n(c),p=(r("2qtc"),r("kLXV")),m=r("1l/V"),u=r.n(m),g=r("2Taf"),f=r.n(g),b=r("vZ4D"),h=r.n(b),v=r("MhPg"),w=r.n(v),E=r("l4Ni"),y=r.n(E),j=r("ujKo"),O=r.n(j),k=(r("5NDa"),r("5rEg")),N=(r("OaEy"),r("2fM7")),F=(r("y8nQ"),r("Vl3Y")),P=r("q1tI"),S=r.n(P),C=r("Y2fQ"),x=r("wY1l"),q=r.n(x),D=r("ArA+"),M=r("gCt9"),V=r.n(M),R=r("HP82"),z=r("X5j4"),I=(r("7qOG"),r("NeHv")),G=r.n(I);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,a=O()(e);if(t){var s=O()(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return y()(this,r)}}var Q=F.a.Item,Y=N.a.Option,A=k.a.Group,B={ok:S.a.createElement("div",{className:G.a.success},S.a.createElement(C.FormattedMessage,{id:"validation.password.strength.strong"})),pass:S.a.createElement("div",{className:G.a.warning},S.a.createElement(C.FormattedMessage,{id:"validation.password.strength.medium"})),poor:S.a.createElement("div",{className:G.a.error},S.a.createElement(C.FormattedMessage,{id:"validation.password.strength.short"}))},J={ok:"success",pass:"normal",poor:"exception"},L=F.a.create()(a=function(e){w()(r,e);var t=H(r);function r(){var e;f()(this,r);for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={count:0,confirmDirty:!1,visible:!1,help:"",prefix:"86",sliderValidation:!1},e.onGetCaptcha=u()(d.a.mark(function t(){var r,a,s,n,i,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.form,a=r.getFieldValue("mobile"),s=59,e.setState({count:s}),e.interval=setInterval(function(){s-=1,e.setState({count:s}),0===s&&clearInterval(e.interval)},1e3),!a){t.next=17;break}return t.next=8,Object(R.verify)(a);case 8:if(n=t.sent,i=n.error_code,o=n.error_message,"0"===i){t.next=14;break}return p.a.info({title:o}),t.abrupt("return");case 14:p.a.info({title:Object(z.b)({id:"app.login.verification-code-warning"})}),t.next=18;break;case 17:p.a.info({title:Object(z.b)({id:"app.login.verification-code-err"})});case 18:case"end":return t.stop()}},t)})),e.getPasswordStatus=function(){var t=e.props.form.getFieldValue("password");return t&&t.length>9?"ok":t&&t.length>5?"pass":"poor"},e.handleSubmit=function(t){t.preventDefault();var r=e.props.form,a=_.omit(r.getFieldsValue(),["confirm"]);r.validateFields({force:!0},function(e){e?p.a.info({title:Object(z.b)({id:"app.login.err"})}):a&&(Object(R.register)(a),p.a.info({title:Object(z.b)({id:"app.register-result.msg"})}),D.router.push("/user/login"))})},e.handleConfirmBlur=function(t){var r=t.target.value,a=e.state.confirmDirty;e.setState({confirmDirty:a||!!r})},e.checkConfirm=function(t,r,a){var s=e.props.form;r&&r!==s.getFieldValue("password")?a(Object(z.b)({id:"validation.password.twice"})):a()},e.checkPassword=function(t,r,a){var s=e.state,n=s.visible,i=s.confirmDirty;if(r)if(e.setState({help:""}),n||e.setState({visible:!!r}),r.length<6)a("error");else{var o=e.props.form;r&&i&&o.validateFields(["confirm"],{force:!0}),a()}else e.setState({help:Object(z.b)({id:"validation.password.required"}),visible:!!r}),a("error")},e.changePrefix=function(t){e.setState({prefix:t})},e.renderPasswordProgress=function(){var t=e.props.form.getFieldValue("password"),r=e.getPasswordStatus();return t&&t.length?S.a.createElement("div",{className:G.a["progress-".concat(r)]},S.a.createElement(l.a,{status:J[r],className:G.a.progress,strokeWidth:6,percent:10*t.length>100?100:10*t.length,showInfo:!1})):null},e}return h()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.form,a=t.submitting,l=r.getFieldDecorator,c=this.state,d=c.count,p=c.prefix,m=c.help,u=c.visible,g=c.sliderValidation;return S.a.createElement("div",{className:G.a.main},S.a.createElement("h1",null,S.a.createElement(C.FormattedMessage,{id:"app.register.register"})),S.a.createElement(F.a,{onSubmit:this.handleSubmit},S.a.createElement(Q,{label:Object(z.b)({id:"app.login.userName"})},l("username",{rules:[{required:!0,message:Object(z.b)({id:"validation.userName.required"})}]})(S.a.createElement(k.a,{placeholder:Object(z.b)({id:"validation.userName.required"})}))),S.a.createElement(Q,{help:m,label:Object(z.b)({id:"app.login.password"})},S.a.createElement(o.a,{getPopupContainer:function(e){return e.parentNode},content:S.a.createElement("div",{style:{padding:"4px 0"}},B[this.getPasswordStatus()],this.renderPasswordProgress(),S.a.createElement("div",{style:{marginTop:10}},S.a.createElement(C.FormattedMessage,{id:"validation.password.strength.msg"}))),overlayStyle:{width:240},placement:"right",visible:u},l("password",{rules:[{validator:this.checkPassword}]})(S.a.createElement(k.a,{size:"large",type:"password",placeholder:Object(z.b)({id:"form.password.placeholder"})})))),S.a.createElement(Q,{label:Object(z.b)({id:"app.login.confirm.password"})},l("confirm",{rules:[{required:!0,message:Object(z.b)({id:"validation.confirm-password.required"})},{validator:this.checkConfirm}]})(S.a.createElement(k.a,{size:"large",type:"password",placeholder:Object(z.b)({id:"form.confirm-password.placeholder"})}))),S.a.createElement(Q,null,S.a.createElement(V.a,{width:385,success:function(){e.setState({sliderValidation:!0})}})),g&&S.a.createElement(S.a.Fragment,null,S.a.createElement(Q,null,S.a.createElement(A,{compact:!0},S.a.createElement(N.a,{size:"large",value:p,onChange:this.changePrefix,style:{width:"20%"}},S.a.createElement(Y,{value:"86"},"+86"),S.a.createElement(Y,{value:"87"},"+87")),l("mobile",{rules:[{required:!0,message:Object(z.b)({id:"validation.phone-number.required"})},{pattern:/^\d{11}$/,message:Object(z.b)({id:"validation.phone-number.wrong-format"})}]})(S.a.createElement(k.a,{size:"large",style:{width:"80%"},placeholder:Object(z.b)({id:"form.phone-number.placeholder"})})))),S.a.createElement(Q,null,S.a.createElement(s.a,{gutter:8},S.a.createElement(i.a,{span:16},l("code",{rules:[{required:!0,message:Object(z.b)({id:"validation.verification-code.required"})}]})(S.a.createElement(k.a,{size:"large",placeholder:Object(z.b)({id:"form.verification-code.placeholder"})}))),S.a.createElement(i.a,{span:8},S.a.createElement(n.a,{size:"large",disabled:d,className:G.a.getCaptcha,onClick:this.onGetCaptcha},d?"".concat(d," s"):Object(z.b)({id:"app.register.get-verification-code"})))))),S.a.createElement(Q,null,S.a.createElement(n.a,{size:"large",loading:a,className:G.a.submit,type:"primary",htmlType:"submit",disabled:!g},S.a.createElement(C.FormattedMessage,{id:"app.register.register"})),S.a.createElement(q.a,{className:G.a.login,to:"/User/Login"},S.a.createElement(C.FormattedMessage,{id:"app.register.sign-in"})))))}}]),r}(P.Component))||a;t.default=L}}]);